var JSON;if(!JSON){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());Rs={version:"0.1"};Rs.apply=function(d,e,b){if(b){Rs.apply(d,b)}if(d&&e&&typeof e=="object"){for(var a in e){d[a]=e[a]}}return d};(function(){var h=0,u=Object.prototype.toString,v=navigator.userAgent.toLowerCase(),A=function(e){return e.test(v)},j=document,m=j.compatMode=="CSS1Compat",C=A(/opera/),i=A(/chrome/),w=A(/webkit/),z=!i&&A(/safari/),g=z&&A(/applewebkit\/4/),b=z&&A(/version\/3/),D=z&&A(/version\/4/),s=!C&&A(/msie/),q=s&&A(/msie 7/),p=s&&A(/msie 8/),r=s&&!q&&!p,o=!w&&A(/gecko/),d=o&&A(/rv:1\.8/),a=o&&A(/rv:1\.9/),x=s&&!m,B=A(/windows|win32/),l=A(/macintosh|mac os x/),k=A(/adobeair/),n=A(/linux/),c=/^https/i.test(window.location.protocol),t=null;if(r){try{j.execCommand("BackgroundImageCache",false,true)}catch(y){}}(function(){var E=j.documentElement,F=j.createElement("script"),H="script"+(new Date()).getTime();F.type="text/javascript";try{F.appendChild(j.createTextNode("window."+H+"=1;"))}catch(G){}E.insertBefore(F,E.firstChild);if(window[H]){t=true;delete window[H]}else{t=false}E.removeChild(F);E=F=H=null})(this);Rs.apply(Rs,{BASE_PATH:"/com/rsc/rs/pub/rsclient2/rs",SSL_SECURE_URL:c&&s?'javascript:""':"about:blank",isStrict:m,isSecure:c,isReady:false,enableGarbageCollector:true,enableListenerCollection:false,enableNestedListenerRemoval:false,USE_NATIVE_JSON:false,applyIf:function(E,F){if(E){for(var e in F){if(!Rs.isDefined(E[e])){E[e]=F[e]}}}return E},id:function(e,E){return(e=Rs.getDom(e)||{}).id=e.id||(E||"rs-gen")+(++h)},emptyFn:function(){},num:function(E,e){E=Number(Rs.isEmpty(E)||Rs.isArray(E)||typeof E=="boolean"||(typeof E=="string"&&E.trim().length==0)?NaN:E);return isNaN(E)?e:E},extend:function(){var E=function(G){for(var F in G){this[F]=G[F]}};var e=Object.prototype.constructor;return function(L,I,K){if(Rs.isObject(I)){K=I;I=L;L=K.constructor!=e?K.constructor:function(){I.apply(this,arguments)}}var H=function(){},J,G=I.prototype;H.prototype=G;J=L.prototype=new H();J.constructor=L;L.superclass=G;if(G.constructor==e){G.constructor=I}L.override=function(F){Rs.override(L,F)};J.superclass=J.supr=(function(){return G});J.override=E;Rs.override(L,K);L.extend=function(F){return Rs.extend(L,F)};return L}}(),override:function(e,F){if(F){var E=e.prototype;Rs.apply(E,F);if(Rs.isIE&&F.hasOwnProperty("toString")){E.toString=F.toString}}},namespace:function(){var E,e;Rs.each(arguments,function(F){e=F.split(".");E=window[e[0]]=window[e[0]]||{};Rs.each(e.slice(1),function(G){E=E[G]=E[G]||{}})});return E},urlEncode:function(I,H){var F,E=[],G=encodeURIComponent;Rs.iterate(I,function(e,J){if((Rs.isObject(J)||Rs.isArray(J))){E.push("&",G(G(e)),"=",Rs.encode(J))}else{F=Rs.isEmpty(J);Rs.each(F?e:J,function(K){if(!Rs.isEmpty(K)&&(K!=e||!F)){if(Rs.isDate(K)||Rs.isString(K)){E.push("&",G(G(e)),"=",Rs.encode(K).replace(/"/g,""))}else{E.push("&",G(G(e)),"=",G(K))}}else{E.push("&",G(G(e)),"=","")}})}});if(!H){E.shift();H=""}return H+E.join("")},urlDecode:function(F,E){if(Rs.isEmpty(F)){return{}}var I={},H=F.split("&"),J=decodeURIComponent,e,G;Rs.each(H,function(K){K=K.split("=");e=J(J(K[0]));G=J(J(K[1]));I[e]=E||!I[e]?G:[].concat(I[e]).concat(G)});return I},urlAppend:function(e,E){if(!Rs.isEmpty(E)){return e+(e.indexOf("?")===-1?"?":"&")+E}return e},toArray:function(){return s?function(F,I,G,H){H=[];for(var E=0,e=F.length;E<e;E++){H.push(F[E])}return H.slice(I||0,G||H.length)}:function(e,F,E){return Array.prototype.slice.call(e,F||0,E||e.length)}}(),isIterable:function(e){if(Rs.isArray(e)||e.callee){return true}if(/NodeList|HTMLCollection/.test(u.call(e))){return true}return((typeof e.nextNode!="undefined"||e.item)&&Rs.isNumber(e.length))},each:function(H,G,F){if(Rs.isEmpty(H,true)){return}if(!Rs.isIterable(H)||Rs.isPrimitive(H)){H=[H]}for(var E=0,e=H.length;E<e;E++){if(G.call(F||H[E],H[E],E,H)===false){return E}}},iterate:function(F,E,e){if(Rs.isEmpty(F)){return}if(Rs.isIterable(F)){Rs.each(F,E,e);return}else{if(Rs.isObject(F)){for(var G in F){if(F.hasOwnProperty(G)){if(E.call(e||F,G,F[G],F)===false){return}}}}}},getDom:function(e){if(!e||!j){return null}return e.dom?e.dom:(Rs.isString(e)?j.getElementById(e):e)},getBody:function(){return Rs.get(j.body||j.documentElement)},removeNode:s&&!p?function(){var e;return function(E){if(E&&E.tagName!="BODY"){(Rs.enableNestedListenerRemoval)?Rs.EventManager.purgeElement(E,true):Rs.EventManager.removeAll(E);e=e||j.createElement("div");e.appendChild(E);e.innerHTML="";delete Rs.elCache[E.id]}}}():function(e){if(e&&e.parentNode&&e.tagName!="BODY"){(Rs.enableNestedListenerRemoval)?Rs.EventManager.purgeElement(e,true):Rs.EventManager.removeAll(e);e.parentNode.removeChild(e);delete Rs.elCache[e.id]}},error:function(e){throw e},isEmpty:function(E,e){return E===null||E===undefined||((Rs.isArray(E)&&!E.length))||(!e?E==="":false)},isArray:function(e){return u.apply(e)==="[object Array]"},isDate:function(e){return u.apply(e)==="[object Date]"},isObject:function(e){return !!e&&Object.prototype.toString.call(e)==="[object Object]"},isPrimitive:function(e){return Rs.isString(e)||Rs.isNumber(e)||Rs.isBoolean(e)},isFunction:function(e){return u.apply(e)==="[object Function]"},isNumber:function(e){return typeof e==="number"&&isFinite(e)},isString:function(e){return typeof e==="string"},isBoolean:function(e){return typeof e==="boolean"},isElement:function(e){return !!e&&e.tagName},isDefined:function(e){return typeof e!=="undefined"},isOpera:C,isWebKit:w,isChrome:i,isSafari:z,isSafari3:b,isSafari4:D,isSafari2:g,isIE:s,isIE6:r,isIE7:q,isIE8:p,isGecko:o,isGecko2:d,isGecko3:a,isBorderBox:x,isLinux:n,isWindows:B,isMac:l,isAir:k,isSupportScriptEval:t});Rs.ns=Rs.namespace})();Rs.apply(Rs,function(){var d=document;var a=function(l){return !!l&&Object.prototype.toString.call(l)==="[object Object]"};var j=function(l){return l instanceof Array};var e=function(l){return typeof l=="function"};var k=function(l){return l.sort(function(n,m){return h(n)>h(m)?1:-1})};var c=function(r){var s=[],o,n,p,m,q={};for(o in r){if(e(r[o])==false){s.push(o)}}s=s.sort();for(p=0,m=s.length;p<m;p++){o=s[p];n=r[o];q[o]=i(n)}return q};var i=function(l){if(j(l)){return k(l)}else{if(a(l)){return c(l)}else{return l}}};var h=function(l){l=i(l);var n=JSON.stringify(l),m=b((typeof l)+n);return m};var b=function(q){var o=0,p=0;for(var n=0,m=q.length;n<m;n++){o=31*o+q.charCodeAt(p++);if(o>2147483647||o<2147483648){o=o&4294967295}}return o};var g={};return{loadResource:function(l,p,n,o){var m=(function(s,q,t,r){g[q]=s;if(Rs.isFunction(t)){t.call(r,this)}}).createDelegate(this,[l,p,n],2);if(l.length>4&&l.substring(l.length-4)==".css"){this.injectCssElement(l,m,n,o)}else{this.injectScriptElement(l,m,n,o)}},taskQueue:[],injectScriptElement:function(m,r,t,l){if(Rs.isIE&&this.loading===true){this.taskQueue.push({url:m,callback:r,scope:t});return}var n=document,p=n.getElementsByTagName("head")[0],s=n.createElement("script"),q=this,o=function(){q.cleanupScriptElement(s);r.call(t,s);q.loading=false;q.nextTask()};s.type="text/javascript";s.src=l===true?m+"?t="+new Date().getTime():m;s.onload=o;s.onerror=o;s.onreadystatechange=function(){if(s.readyState==="loaded"||s.readyState==="complete"){s.onreadystatechange=null;o()}};this.loading=true;p.appendChild(s)},nextTask:function(){if(this.taskQueue.length>0){var l=this.taskQueue.shift();this.injectScriptElement(l.url,l.callback,l.scope)}},cleanupScriptElement:function(l){l.onload=null;l.onreadystatechange=null;l.onerror=null;return this},injectCssElement:function(m,s,u,l){var o=document,q=o.getElementsByTagName("head")[0],t=o.createElement("link"),r=this,p=function(){r.cleanupCssElement(t);s.call(u,t)};t.rel="stylesheet";t.type="text/css";t.href=l===true?m+"?t="+new Date().getTime():m;if((1+/(?:Gecko|AppleWebKit)\/(\S*)/.test(navigator.userAgent))==2){var n=setInterval(function(){try{clearInterval(n);p()}catch(v){}},100)}else{t.onload=p}q.appendChild(t);return t},cleanupCssElement:function(l){l.onload=null;return this},removeResource:function(l){if(g&&g[l]){var m=Rs.get(g[l]);m&&m.remove();delete g[l]}},equals:function(m,l){var o=this.hashCode(m),n=this.hashCode(l);return o==n},hashCode:function(p){var q=[],n;for(var o=1,m=arguments.length;o<m;o++){n=arguments[o];(p[n])?(q.push(n)):null}if(q.length>0){var r={};q=q.sort();for(var o=0,m=q.length;o<m;o++){n=q[o];r[n]=p[n]}return h(r)}else{return h(p)}}}}());Rs.lr=Rs.loadResource;Rs.ns("Rs.util","Rs.lib","Rs.data","Rs.lib");Rs.elCache={};Rs.apply(Function.prototype,{createInterceptor:function(b,a){var c=this;return !Rs.isFunction(b)?this:function(){var e=this,d=arguments;b.target=e;b.method=c;return(b.apply(a||e||window,d)!==false)?c.apply(e||window,d):null}},createCallback:function(){var a=arguments,b=this;return function(){return b.apply(window,a)}},createDelegate:function(c,b,a){var d=this;return function(){var g=b||arguments;if(a===true){g=Array.prototype.slice.call(arguments,0);g=g.concat(b)}else{if(Rs.isNumber(a)){g=Array.prototype.slice.call(arguments,0);var e=[a,0].concat(b);Array.prototype.splice.apply(g,e)}}return d.apply(c||window,g)}},defer:function(c,e,b,a){var d=this.createDelegate(e,b,a);if(c>0){return setTimeout(d,c)}d();return 0}});Rs.applyIf(String,{format:function(b){var a=Rs.toArray(arguments,1);return b.replace(/\{(\d+)\}/g,function(c,d){return a[d]})},trim:function(a){return Rs.isString(a)?a.replace(/(^\s*)|(\s*$)/g,""):""},contains:function(a){return this.indexOf(a)!=-1}});Rs.trim=String.trim;Rs.applyIf(Array.prototype,{remove:function(b){var a=this.indexOf(b);if(a!=-1){this.splice(a,1)}return this},clone:function(){var a=[];var b=0;for(;b<this.length;b++){switch(typeof this[b]){case"object":var c={};for(key in this[b]){c[key]=this[b][key]}a.push(c);break;default:a.push(this[b]);break}}return a},merge:function(a){if(a){var b;for(b=0;b<a.length;b++){this.push(a[b])}}},indexOf:function(c,b){var a=0;for(;a<this.length;a++){if(this[a]&&(b?this[a][b]==c:this[a]==c)){return a}}return -1},lastIndexOf:function(d,c){var b=0;var a=-1;for(;b<this.length;b++){if(this[b]&&(c?this[b][c]==d:this[b]==d)){a=b}}return a}});Rs.applyIf(Date,{diff:function(a){return Math.ceil((this-a)/(1000*60*60*24))},add:function(a){return new Date(this.getTime()+a*(1000*60*60*24))},addMonth:function(a){var b=this.getDate();var d=this.getMonth()+1;var c=this.getFullYear();d+=a;if(d>12){c+=Math.floor(d/12);d=d%12}return Date.parse(d+"/"+b+"/"+c)},getElapsed:function(a){return Math.abs((a||new Date()).getTime()-this.getTime())}});Rs.util.TaskRunner=function(e){e=e||10;var g=[],a=[],b=0,h=false,d=function(){h=false;clearInterval(b);b=0},i=function(){if(!h){h=true;b=setInterval(j,e)}},c=function(k){a.push(k);if(k.onStop){k.onStop.apply(k.scope||k)}},j=function(){var m=a.length,o=new Date().getTime();if(m>0){for(var q=0;q<m;q++){g.remove(a[q])}a=[];if(g.length<1){d();return}}for(var q=0,p,l,n,k=g.length;q<k;++q){p=g[q];l=o-p.taskRunTime;if(p.interval<=l){n=p.run.apply(p.scope||p,p.args||[++p.taskRunCount]);p.taskRunTime=o;if(n===false||p.taskRunCount===p.repeat){c(p);return}}if(p.duration&&p.duration<=(o-p.taskStartTime)){c(p)}}};this.start=function(k){g.push(k);k.taskStartTime=new Date().getTime();k.taskRunTime=0;k.taskRunCount=0;i();return k};this.stop=function(k){c(k);return k};this.stopAll=function(){d();for(var l=0,k=g.length;l<k;l++){if(g[l].onStop){g[l].onStop()}}g=[];a=[]}};Rs.TaskMgr=new Rs.util.TaskRunner();Rs.util.DelayedTask=function(d,c,a){var e=this,g,b=function(){clearInterval(g);g=null;d.apply(c,a||[])};e.delay=function(i,k,j,h){e.cancel();d=k||d;c=j||c;a=h||a;g=setInterval(b,i)};e.cancel=function(){if(g){clearInterval(g);g=null}}};(function(){var b;function c(d){if(!b){b=new Rs.Element.Flyweight()}b.dom=d;return b}(function(){var h=document,e=h.compatMode=="CSS1Compat",g=Math.max,d=Math.round,i=parseInt;Rs.lib.Dom={isAncestor:function(k,l){var j=false;k=Rs.getDom(k);l=Rs.getDom(l);if(k&&l){if(k.contains){return k.contains(l)}else{if(k.compareDocumentPosition){return !!(k.compareDocumentPosition(l)&16)}else{while(l=l.parentNode){j=l==k||j}}}}return j},getViewWidth:function(j){return j?this.getDocumentWidth():this.getViewportWidth()},getViewHeight:function(j){return j?this.getDocumentHeight():this.getViewportHeight()},getDocumentHeight:function(){return g(!e?h.body.scrollHeight:h.documentElement.scrollHeight,this.getViewportHeight())},getDocumentWidth:function(){return g(!e?h.body.scrollWidth:h.documentElement.scrollWidth,this.getViewportWidth())},getViewportHeight:function(){return Rs.isIE?(Rs.isStrict?h.documentElement.clientHeight:h.body.clientHeight):self.innerHeight},getViewportWidth:function(){return !Rs.isStrict&&!Rs.isOpera?h.body.clientWidth:Rs.isIE?h.documentElement.clientWidth:self.innerWidth},getY:function(j){return this.getXY(j)[1]},getX:function(j){return this.getXY(j)[0]},getXY:function(l){var k,r,t,w,m,n,v=0,s=0,u,j,o=(h.body||h.documentElement),q=[0,0];l=Rs.getDom(l);if(l!=o){if(l.getBoundingClientRect){t=l.getBoundingClientRect();u=c(document).getScroll();q=[d(t.left+u.left),d(t.top+u.top)]}else{k=l;j=c(l).isStyle("position","absolute");while(k){r=c(k);v+=k.offsetLeft;s+=k.offsetTop;j=j||r.isStyle("position","absolute");if(Rs.isGecko){s+=w=i(r.getStyle("borderTopWidth"),10)||0;v+=m=i(r.getStyle("borderLeftWidth"),10)||0;if(k!=l&&!r.isStyle("overflow","visible")){v+=m;s+=w}}k=k.offsetParent}if(Rs.isSafari&&j){v-=o.offsetLeft;s-=o.offsetTop}if(Rs.isGecko&&!j){n=c(o);v+=i(n.getStyle("borderLeftWidth"),10)||0;s+=i(n.getStyle("borderTopWidth"),10)||0}k=l.parentNode;while(k&&k!=o){if(!Rs.isOpera||(k.tagName!="TR"&&!c(k).isStyle("display","inline"))){v-=k.scrollLeft;s-=k.scrollTop}k=k.parentNode}q=[v,s]}}return q},setXY:function(k,l){(k=Rs.fly(k,"_setXY")).position();var m=k.translatePoints(l),j=k.dom.style,n;for(n in m){if(!isNaN(m[n])){j[n]=m[n]+"px"}}},setX:function(k,j){this.setXY(k,[j,false])},setY:function(j,k){this.setXY(j,[false,k])}}})();Rs.lib.Event=function(){var x=false,h={},B=0,q=[],d,D=false,l=window,H=document,m=200,t=20,C=0,s=0,j=1,n=2,u=2,y=3,v="scrollLeft",r="scrollTop",g="unload",A="mouseover",G="mouseout",e=function(){var I;if(l.addEventListener){I=function(M,K,L,J){if(K=="mouseenter"){L=L.createInterceptor(p);M.addEventListener(A,L,(J))}else{if(K=="mouseleave"){L=L.createInterceptor(p);M.addEventListener(G,L,(J))}else{M.addEventListener(K,L,(J))}}return L}}else{if(l.attachEvent){I=function(M,K,L,J){M.attachEvent("on"+K,L);return L}}else{I=function(){}}}return I}(),i=function(){var I;if(l.removeEventListener){I=function(M,K,L,J){if(K=="mouseenter"){K=A}else{if(K=="mouseleave"){K=G}}M.removeEventListener(K,L,(J))}}else{if(l.detachEvent){I=function(L,J,K){L.detachEvent("on"+J,K)}}else{I=function(){}}}return I}();function p(I){return !w(I.currentTarget,z.getRelatedTarget(I))}function w(I,J){if(I&&I.firstChild){while(J){if(J===I){return true}J=J.parentNode;if(J&&(J.nodeType!=1)){J=null}}}return false}function E(){var K=false,O=[],M,L,I,J,N=!x||(B>0);if(!D){D=true;for(L=0,I=q.length;L<I;L++){J=q[L];if(J&&(M=H.getElementById(J.id))){if(!J.checkReady||x||M.nextSibling||(H&&H.body)){M=J.override?(J.override===true?J.obj:J.override):M;J.fn.call(M,J.obj);q.remove(J)}else{O.push(J)}}}B=(O.length===0)?0:B-1;if(N){o()}else{clearInterval(d);d=null}K=!(D=false)}return K}function o(){if(!d){var I=function(){E()};d=setInterval(I,t)}}function F(){var I=H.documentElement,J=H.body;if(I&&(I[r]||I[v])){return[I[v],I[r]]}else{if(J){return[J[v],J[r]]}else{return[0,0]}}}function k(I,J){I=I.browserEvent||I;var K=I["page"+J];if(!K&&K!==0){K=I["client"+J]||0;if(Rs.isIE){K+=F()[J=="X"?0:1]}}return K}var z={extAdapter:true,onAvailable:function(K,I,L,J){q.push({id:K,fn:I,obj:L,override:J,checkReady:false});B=m;o()},addListener:function(K,I,J){K=Rs.getDom(K);if(K&&J){if(I==g){if(h[K.id]===undefined){h[K.id]=[]}h[K.id].push([I,J]);return J}return e(K,I,J,false)}return false},removeListener:function(O,K,N){O=Rs.getDom(O);var M,J,I,L;if(O&&N){if(K==g){if((L=h[O.id])!==undefined){for(M=0,J=L.length;M<J;M++){if((I=L[M])&&I[s]==K&&I[j]==N){h[id].splice(M,1)}}}return}i(O,K,N,false)}},getTarget:function(I){I=I.browserEvent||I;return this.resolveTextNode(I.target||I.srcElement)},resolveTextNode:Rs.isGecko?function(J){if(!J){return}var I=HTMLElement.prototype.toString.call(J);if(I=="[xpconnect wrapped native prototype]"||I=="[object XULElement]"){return}return J.nodeType==3?J.parentNode:J}:function(I){return I&&I.nodeType==3?I.parentNode:I},getRelatedTarget:function(I){I=I.browserEvent||I;return this.resolveTextNode(I.relatedTarget||(I.type==G?I.toElement:I.type==A?I.fromElement:null))},getPageX:function(I){return k(I,"X")},getPageY:function(I){return k(I,"Y")},getXY:function(I){return[this.getPageX(I),this.getPageY(I)]},stopEvent:function(I){this.stopPropagation(I);this.preventDefault(I)},stopPropagation:function(I){I=I.browserEvent||I;if(I.stopPropagation){I.stopPropagation()}else{I.cancelBubble=true}},preventDefault:function(I){I=I.browserEvent||I;if(I.preventDefault){I.preventDefault()}else{I.returnValue=false}},getEvent:function(I){I=I||l.event;if(!I){var J=this.getEvent.caller;while(J){I=J.arguments[0];if(I&&Event==I.constructor){break}J=J.caller}}return I},getCharCode:function(I){I=I.browserEvent||I;return I.charCode||I.keyCode||0},getListeners:function(J,I){Rs.EventManager.getListeners(J,I)},purgeElement:function(J,K,I){Rs.EventManager.purgeElement(J,K,I)},_load:function(J){x=true;var I=Rs.lib.Event;if(Rs.isIE&&J!==true){i(l,"load",arguments.callee)}},_unload:function(P){var J=Rs.lib.Event,M,L,K,T,Q,I,O,N,U;for(I in h){Q=h[I];for(M=0,O=Q.length;M<O;M++){T=Q[M];if(T){try{U=T[y]?(T[y]===true?T[u]:T[y]):l;T[j].call(U,J.getEvent(P),T[u])}catch(S){}}}}h=null;Rs.EventManager._unload();i(l,g,J._unload)}};z.on=z.addListener;z.un=z.removeListener;if(H&&H.body){z._load(true)}else{e(l,"load",z._load)}e(l,g,z._unload);E();return z}();Rs.lib.Ajax=function(){var h=["MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],d="Content-Type";function i(t){var s=t.conn,u;function r(v,w){for(u in w){if(w.hasOwnProperty(u)){v.setRequestHeader(u,w[u])}}}if(l.defaultHeaders){r(s,l.defaultHeaders)}if(l.headers){r(s,l.headers);delete l.headers}}function e(u,t,s,r){return{tId:u,status:s?-1:0,statusText:s?"transaction aborted":"communication failure",isAbort:s,isTimeout:r,argument:t}}function k(r,s){(l.headers=l.headers||{})[r]=s}function p(A,y){var u={},w,x=A.conn,r,v;try{w=A.conn.getAllResponseHeaders();Rs.each(w.replace(/\r\n/g,"\n").split("\n"),function(s){r=s.indexOf(":");if(r>=0){v=s.substr(0,r).toLowerCase();if(s.charAt(r+1)==" "){++r}u[v]=s.substr(r+1)}})}catch(z){}return{tId:A.tId,status:x.status,statusText:x.statusText,getResponseHeader:function(s){return u[s.toLowerCase()]},getAllResponseHeaders:function(){return w},responseText:x.responseText,responseXML:x.responseXML,argument:y}}function o(r){r.conn=null;r=null}function g(w,x,s,r){if(!x){o(w);return}var u,t;try{if(w.conn.status!==undefined&&w.conn.status!=0){u=w.conn.status}else{u=13030}}catch(v){u=13030}if((u>=200&&u<300)||(Rs.isIE&&u==1223)){t=p(w,x.argument);if(x.success){if(!x.scope){x.success(t)}else{x.success.apply(x.scope,[t])}}}else{switch(u){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:t=e(w.tId,x.argument,(s?s:false),r);if(x.failure){if(!x.scope){x.failure(t)}else{x.failure.apply(x.scope,[t])}}break;default:t=p(w,x.argument);if(x.failure){if(!x.scope){x.failure(t)}else{x.failure.apply(x.scope,[t])}}}}o(w);t=null}function n(t,w){w=w||{};var r=t.conn,v=t.tId,s=l.poll,u=w.timeout||null;if(u){l.timeout[v]=setTimeout(function(){l.abort(t,w,true)},u)}s[v]=setInterval(function(){if(r&&r.readyState==4){clearInterval(s[v]);s[v]=null;if(u){clearTimeout(l.timeout[v]);l.timeout[v]=null}g(t,w)}},l.pollInterval)}function j(v,s,u,r){var t=m()||null;if(t){t.conn.open(v,s,true);if(l.useDefaultXhrHeader){k("X-Requested-With",l.defaultXhrHeader)}if(r&&l.useDefaultHeader&&(!l.headers||!l.headers[d])){k(d,l.defaultPostHeader)}if(l.defaultHeaders||l.headers){i(t)}n(t,u);t.conn.send(r||null)}return t}function m(){var s;try{if(s=q(l.transactionId)){l.transactionId++}}catch(r){}finally{return s}}function q(u){var r;try{r=new XMLHttpRequest()}catch(t){for(var s=0;s<h.length;++s){try{r=new ActiveXObject(h[s]);break}catch(t){}}}finally{return{conn:r,tId:u}}}var l={request:function(r,t,u,v,z){if(z){var w=this,s=z.xmlData,x=z.jsonData,y;Rs.applyIf(w,z);if(s||x){y=w.headers;if(!y||!y[d]){k(d,s?"text/xml":"application/json")}v=s||(!Rs.isPrimitive(x)?Rs.encode(x):x)}}return j(r||z.method||"POST",t,u,v)},serializeForm:function(s){var t=s.elements||(document.forms[s]||Rs.getDom(s)).elements,z=false,y=encodeURIComponent,w,A,r,u,v="",x;Rs.each(t,function(B){r=B.name;x=B.type;if(!B.disabled&&r){if(/select-(one|multiple)/i.test(x)){Rs.each(B.options,function(C){if(C.selected){v+=String.format("{0}={1}&",y(r),y((C.hasAttribute?C.hasAttribute("value"):C.getAttribute("value")!==null)?C.value:C.text))}})}else{if(!/file|undefined|reset|button/i.test(x)){if(!(/radio|checkbox/i.test(x)&&!B.checked)&&!(x=="submit"&&z)){v+=y(r)+"="+y(B.value)+"&";z=/submit/i.test(x)}}}}});return v.substr(0,v.length-1)},useDefaultHeader:true,defaultPostHeader:"application/x-www-form-urlencoded; charset=UTF-8",useDefaultXhrHeader:true,defaultXhrHeader:"XMLHttpRequest",poll:{},timeout:{},pollInterval:50,transactionId:0,abort:function(u,w,r){var t=this,v=u.tId,s=false;if(t.isCallInProgress(u)){u.conn.abort();clearInterval(t.poll[v]);t.poll[v]=null;clearTimeout(l.timeout[v]);t.timeout[v]=null;g(u,w,(s=true),r)}return s},isCallInProgress:function(r){return r.conn&&!{0:true,4:true}[r.conn.readyState]}};return l}();(function(){var j=Rs.lib,i=/width|height|opacity|padding/i,g=/^((width|height)|(top|left))$/,d=/width|height|top$|bottom$|left$|right$/i,h=/\d+(em|%|en|ex|pt|in|cm|mm|pc)$/i,k=function(l){return typeof l!=="undefined"},e=function(){return new Date()};j.Anim={motion:function(o,m,p,q,l,n){return this.run(o,m,p,q,l,n,Rs.lib.Motion)},run:function(p,m,r,s,l,o,n){n=n||Rs.lib.AnimBase;if(typeof s=="string"){s=Rs.lib.Easing[s]}var q=new n(p,m,r,s);q.animateX(function(){if(Rs.isFunction(l)){l.call(o)}});return q}};j.AnimBase=function(m,l,n,o){if(m){this.init(m,l,n,o)}};j.AnimBase.prototype={doMethod:function(l,o,m){var n=this;return n.method(n.curFrame,o,m-o,n.totalFrames)},setAttr:function(l,n,m){if(i.test(l)&&n<0){n=0}Rs.fly(this.el,"_anim").setStyle(l,n+m)},getAttr:function(l){var n=Rs.fly(this.el),o=n.getStyle(l),m=g.exec(l)||[];if(o!=="auto"&&!h.test(o)){return parseFloat(o)}return(!!(m[2])||(n.getStyle("position")=="absolute"&&!!(m[3])))?n.dom["offset"+m[0].charAt(0).toUpperCase()+m[0].substr(1)]:0},getDefaultUnit:function(l){return d.test(l)?"px":""},animateX:function(o,l){var m=this,n=function(){m.onComplete.removeListener(n);if(Rs.isFunction(o)){o.call(l||m,m)}};m.onComplete.addListener(n,m);m.animate()},setRunAttr:function(q){var s=this,t=this.attributes[q],u=t.to,r=t.by,v=t.from,w=t.unit,m=(this.runAttrs[q]={}),n;if(!k(u)&&!k(r)){return false}var l=k(v)?v:s.getAttr(q);if(k(u)){n=u}else{if(k(r)){if(Rs.isArray(l)){n=[];for(var o=0,p=l.length;o<p;o++){n[o]=l[o]+r[o]}}else{n=l+r}}}Rs.apply(m,{start:l,end:n,unit:k(w)?w:s.getDefaultUnit(q)})},init:function(m,q,p,l){var s=this,o=0,t=j.AnimMgr;Rs.apply(s,{isAnimated:false,startTime:null,el:Rs.getDom(m),attributes:q||{},duration:p||1,method:l||j.Easing.easeNone,useSec:true,curFrame:0,totalFrames:t.fps,runAttrs:{},animate:function(){var v=this,w=v.duration;if(v.isAnimated){return false}v.curFrame=0;v.totalFrames=v.useSec?Math.ceil(t.fps*w):w;t.registerElement(v)},stop:function(v){var w=this;if(v){w.curFrame=w.totalFrames;w._onTween.fire()}t.stop(w)}});var u=function(){var w=this,v;w.onStart.fire();w.runAttrs={};for(v in this.attributes){this.setRunAttr(v)}w.isAnimated=true;w.startTime=e();o=0};var r=function(){var w=this;w.onTween.fire({duration:e()-w.startTime,curFrame:w.curFrame});var x=w.runAttrs;for(var v in x){this.setAttr(v,w.doMethod(v,x[v].start,x[v].end),x[v].unit)}++o};var n=function(){var v=this,x=(e()-v.startTime)/1000,w={duration:x,frames:o,fps:o/x};v.isAnimated=false;o=0;v.onComplete.fire(w)};s.onStart=new Rs.util.Event(s);s.onTween=new Rs.util.Event(s);s.onComplete=new Rs.util.Event(s);(s._onStart=new Rs.util.Event(s)).addListener(u);(s._onTween=new Rs.util.Event(s)).addListener(r);(s._onComplete=new Rs.util.Event(s)).addListener(n)}};Rs.lib.AnimMgr=new function(){var p=this,n=null,m=[],l=0;Rs.apply(p,{fps:1000,delay:1,registerElement:function(r){m.push(r);++l;r._onStart.fire();p.start()},unRegister:function(s,r){s._onComplete.fire();r=r||q(s);if(r!=-1){m.splice(r,1)}if(--l<=0){p.stop()}},start:function(){if(n===null){n=setInterval(p.run,p.delay)}},stop:function(t){if(!t){clearInterval(n);for(var s=0,r=m.length;s<r;++s){if(m[0].isAnimated){p.unRegister(m[0],0)}}m=[];n=null;l=0}else{p.unRegister(t)}},run:function(){var u,t,r,s;for(t=0,r=m.length;t<r;t++){s=m[t];if(s&&s.isAnimated){u=s.totalFrames;if(s.curFrame<u||u===null){++s.curFrame;if(s.useSec){o(s)}s._onTween.fire()}else{p.stop(s)}}}}});var q=function(t){var s,r;for(s=0,r=m.length;s<r;s++){if(m[s]===t){return s}}return -1};var o=function(s){var w=s.totalFrames,v=s.curFrame,u=s.duration,t=(v*u*1000/w),r=(e()-s.startTime),x=0;if(r<u*1000){x=Math.round((r/t-1)*v)}else{x=w-(v+1)}if(x>0&&isFinite(x)){if(s.curFrame+x>=w){x=w-(v+1)}s.curFrame+=x}}};j.Bezier=new function(){this.getPosition=function(q,p){var s=q.length,o=[],r=1-p,m,l;for(m=0;m<s;++m){o[m]=[q[m][0],q[m][1]]}for(l=1;l<s;++l){for(m=0;m<s-l;++m){o[m][0]=r*o[m][0]+p*o[parseInt(m+1,10)][0];o[m][1]=r*o[m][1]+p*o[parseInt(m+1,10)][1]}}return[o[0][0],o[0][1]]}};j.Easing={easeNone:function(m,l,o,n){return o*m/n+l},easeIn:function(m,l,o,n){return o*(m/=n)*m+l},easeOut:function(m,l,o,n){return -o*(m/=n)*(m-2)+l}};(function(){j.Motion=function(q,p,r,s){if(q){j.Motion.superclass.constructor.call(this,q,p,r,s)}};Rs.extend(j.Motion,Rs.lib.AnimBase);var o=j.Motion.superclass,n=j.Motion.prototype,m=/^points$/i;Rs.apply(j.Motion.prototype,{setAttr:function(p,t,s){var r=this,q=o.setAttr;if(m.test(p)){s=s||"px";q.call(r,"left",t[0],s);q.call(r,"top",t[1],s)}else{q.call(r,p,t,s)}},getAttr:function(p){var r=this,q=o.getAttr;return m.test(p)?[q.call(r,"left"),q.call(r,"top")]:q.call(r,p)},doMethod:function(p,s,q){var r=this;return m.test(p)?j.Bezier.getPosition(r.runAttrs[p],r.method(r.curFrame,0,100,r.totalFrames)/100):o.doMethod.call(r,p,s,q)},setRunAttr:function(w){if(m.test(w)){var y=this,r=this.el,B=this.attributes.points,u=B.control||[],z=B.from,A=B.to,x=B.by,C=j.Dom,q,t,s,v,p;if(u.length>0&&!Rs.isArray(u[0])){u=[u]}else{}Rs.fly(r,"_anim").position();C.setXY(r,k(z)?z:C.getXY(r));q=y.getAttr("points");if(k(A)){s=l.call(y,A,q);for(t=0,v=u.length;t<v;++t){u[t]=l.call(y,u[t],q)}}else{if(k(x)){s=[q[0]+x[0],q[1]+x[1]];for(t=0,v=u.length;t<v;++t){u[t]=[q[0]+u[t][0],q[1]+u[t][1]]}}}p=this.runAttrs[w]=[q];if(u.length>0){p=p.concat(u)}p[p.length]=s}else{o.setRunAttr.call(this,w)}}});var l=function(p,r){var q=j.Dom.getXY(this.el);return[p[0]-q[0]+r[0],p[1]-q[1]+r[1]]}})()})();(function(){var d=Math.abs,j=Math.PI,i=Math.asin,g=Math.pow,e=Math.sin,h=Rs.lib;Rs.apply(h.Easing,{easeBoth:function(l,k,n,m){return((l/=m/2)<1)?n/2*l*l+k:-n/2*((--l)*(l-2)-1)+k},easeInStrong:function(l,k,n,m){return n*(l/=m)*l*l*l+k},easeOutStrong:function(l,k,n,m){return -n*((l=l/m-1)*l*l*l-1)+k},easeBothStrong:function(l,k,n,m){return((l/=m/2)<1)?n/2*l*l*l*l+k:-n/2*((l-=2)*l*l*l-2)+k},elasticIn:function(m,k,r,q,l,o){if(m==0||(m/=q)==1){return m==0?k:k+r}o=o||(q*0.3);var n;if(l>=d(r)){n=o/(2*j)*i(r/l)}else{l=r;n=o/4}return -(l*g(2,10*(m-=1))*e((m*q-n)*(2*j)/o))+k},elasticOut:function(m,k,r,q,l,o){if(m==0||(m/=q)==1){return m==0?k:k+r}o=o||(q*0.3);var n;if(l>=d(r)){n=o/(2*j)*i(r/l)}else{l=r;n=o/4}return l*g(2,-10*m)*e((m*q-n)*(2*j)/o)+r+k},elasticBoth:function(m,k,r,q,l,o){if(m==0||(m/=q/2)==2){return m==0?k:k+r}o=o||(q*(0.3*1.5));var n;if(l>=d(r)){n=o/(2*j)*i(r/l)}else{l=r;n=o/4}return m<1?-0.5*(l*g(2,10*(m-=1))*e((m*q-n)*(2*j)/o))+k:l*g(2,-10*(m-=1))*e((m*q-n)*(2*j)/o)*0.5+r+k},backIn:function(l,k,o,n,m){m=m||1.70158;return o*(l/=n)*l*((m+1)*l-m)+k},backOut:function(l,k,o,n,m){if(!m){m=1.70158}return o*((l=l/n-1)*l*((m+1)*l+m)+1)+k},backBoth:function(l,k,o,n,m){m=m||1.70158;return((l/=n/2)<1)?o/2*(l*l*(((m*=(1.525))+1)*l-m))+k:o/2*((l-=2)*l*(((m*=(1.525))+1)*l+m)+2)+k},bounceIn:function(l,k,n,m){return n-h.Easing.bounceOut(m-l,0,n,m)+k},bounceOut:function(l,k,n,m){if((l/=m)<(1/2.75)){return n*(7.5625*l*l)+k}else{if(l<(2/2.75)){return n*(7.5625*(l-=(1.5/2.75))*l+0.75)+k}else{if(l<(2.5/2.75)){return n*(7.5625*(l-=(2.25/2.75))*l+0.9375)+k}}}return n*(7.5625*(l-=(2.625/2.75))*l+0.984375)+k},bounceBoth:function(l,k,n,m){return(l<m/2)?h.Easing.bounceIn(l*2,0,n,m)*0.5+k:h.Easing.bounceOut(l*2-m,0,n,m)*0.5+n*0.5+k}})})();(function(){var g=Rs.lib;g.Anim.color=function(q,o,r,s,n,p){return g.Anim.run(q,o,r,s,n,p,g.ColorAnim)};g.ColorAnim=function(o,n,p,q){g.ColorAnim.superclass.constructor.call(this,o,n,p,q)};Rs.extend(g.ColorAnim,g.AnimBase);var k=g.ColorAnim.superclass,j=/color$/i,h=/^transparent|rgba\(0, 0, 0, 0\)$/,m=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,d=/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,e=/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i,i=function(n){return typeof n!=="undefined"};function l(o){var q=parseInt,p,n=null,r;if(o.length==3){return o}Rs.each([d,m,e],function(t,s){p=(s%2==0)?16:10;r=t.exec(o);if(r&&r.length==4){n=[q(r[1],p),q(r[2],p),q(r[3],p)];return false}});return n}Rs.apply(g.ColorAnim.prototype,{getAttr:function(n){var p=this,o=p.el,q;if(j.test(n)){while(o&&h.test(q=Rs.fly(o).getStyle(n))){o=o.parentNode;q="fff"}}else{q=k.getAttr.call(p,n)}return q},doMethod:function(t,n,p){var u=this,o,r=Math.floor,q,s,w;if(j.test(t)){o=[];for(q=0,s=n.length;q<s;q++){w=n[q];o[q]=k.doMethod.call(u,t,w,p[q])}o="rgb("+r(o[0])+","+r(o[1])+","+r(o[2])+")"}else{o=k.doMethod.call(u,t,n,p)}return o},setRunAttr:function(s){var u=this,v=u.attributes[s],w=v.to,t=v.by,o;k.setRunAttr.call(u,s);o=u.runAttrs[s];if(j.test(s)){var n=l(o.start),p=l(o.end);if(!i(w)&&i(t)){p=l(t);for(var q=0,r=n.length;q<r;q++){p[q]=n[q]+p[q]}}o.start=n;o.end=p}}})})();(function(){var d=Rs.lib;d.Anim.scroll=function(k,i,l,m,h,j){return d.Anim.run(k,i,l,m,h,j,d.Scroll)};d.Scroll=function(i,h,j,k){if(i){d.Scroll.superclass.constructor.call(this,i,h,j,k)}};Rs.extend(d.Scroll,d.ColorAnim);var g=d.Scroll.superclass,e="scroll";Rs.apply(d.Scroll.prototype,{doMethod:function(h,n,i){var l,k=this,m=k.curFrame,j=k.totalFrames;if(h==e){l=[k.method(m,n[0],i[0]-n[0],j),k.method(m,n[1],i[1]-n[1],j)]}else{l=g.doMethod.call(k,h,n,i)}return l},getAttr:function(h){var i=this;if(h==e){return[i.el.scrollLeft,i.el.scrollTop]}else{return g.getAttr.call(i,h)}},setAttr:function(h,k,j){var i=this;if(h==e){i.el.scrollLeft=k[0];i.el.scrollTop=k[1]}else{g.setAttr.call(i,h,k,j)}}})})();if(Rs.isIE){function a(){var d=Function.prototype;delete d.createSequence;delete d.defer;delete d.createDelegate;delete d.createCallback;delete d.createInterceptor;window.detachEvent("onunload",a)}window.attachEvent("onunload",a)}})();(function(){var i=Rs.util,l=Rs.toArray,k=Rs.each,a=Rs.isObject,h=true,j=false;i.Observable=function(){var m=this,n=m.events;if(m.listeners){m.on(m.listeners);delete m.listeners}m.events=n||{}};i.Observable.prototype={filterOptRe:/^(?:scope|delay|buffer|single)$/,fireEvent:function(){var m=l(arguments),o=m[0].toLowerCase(),p=this,n=h,s=p.events[o],r,t;if(p.eventsSuspended===h){if(r=p.eventQueue){r.push(m)}}else{if(a(s)&&s.bubble){if(s.fire.apply(s,m.slice(1))===j){return j}t=p.getBubbleTarget&&p.getBubbleTarget();if(t&&t.enableBubble){if(!t.events[o]||!Rs.isObject(t.events[o])||!t.events[o].bubble){t.enableBubble(o)}return t.fireEvent.apply(t,m)}}else{if(a(s)){m.shift();n=s.fire.apply(s,m)}}}return n},addListener:function(p,s,u,n){var r=this,q,v,t,m;if(a(p)){n=p;for(q in n){v=n[q];if(!r.filterOptRe.test(q)){r.addListener(q,v.fn||v,v.scope||n.scope,v.fn?v:n)}}}else{p=p.toLowerCase();m=r.events[p]||h;if(Rs.isBoolean(m)){r.events[p]=m=new i.Event(r,p)}m.addListener(s,u,a(n)?n:{})}},removeListener:function(m,o,n){var p=this.events[m.toLowerCase()];if(a(p)){p.removeListener(o,n)}},purgeListeners:function(){var o=this.events,m,n;for(n in o){m=o[n];if(a(m)){m.clearListeners()}}},addEvents:function(q){var p=this;p.events=p.events||{};if(Rs.isString(q)){var m=arguments,n=m.length;while(n--){p.events[m[n]]=p.events[m[n]]||h}}else{Rs.applyIf(p.events,q)}},hasListener:function(m){var n=this.events[m];return a(n)&&n.listeners.length>0},suspendEvents:function(m){this.eventsSuspended=h;if(m&&!this.eventQueue){this.eventQueue=[]}},resumeEvents:function(){var m=this,n=m.eventQueue||[];m.eventsSuspended=j;delete m.eventQueue;k(n,function(o){m.fireEvent.apply(m,o)})},relayEvents:function(t,q){var s=this;function r(o){return function(){return s.fireEvent.apply(s,[o].concat(Array.prototype.slice.call(arguments,0)))}}for(var p=0,m=q.length;p<m;p++){var n=q[p];s.events[n]=s.events[n]||true;t.on(n,r(n),s)}}};var e=i.Observable.prototype;e.on=e.addListener;e.un=e.removeListener;i.Observable.releaseCapture=function(m){m.fireEvent=e.fireEvent};function g(n,p,m){return function(){if(p.target==arguments[0]){n.apply(m,l(arguments))}}}function c(p,q,m,n){m.task=new i.DelayedTask();return function(){m.task.delay(q.buffer,p,n,l(arguments))}}function d(o,p,n,m){return function(){p.removeListener(n,m);return o.apply(m,arguments)}}function b(p,q,m,n){return function(){var o=new i.DelayedTask();if(!m.tasks){m.tasks=[]}m.tasks.push(o);o.delay(q.delay||10,p,n,l(arguments))}}i.Event=function(n,m){this.name=m;this.obj=n;this.listeners=[]};i.Event.prototype={addListener:function(p,o,n){var q=this,m;o=o||q.obj;if(!q.isListening(p,o)){m=q.createListener(p,o,n);if(q.firing){q.listeners=q.listeners.slice(0)}q.listeners.push(m)}},createListener:function(q,p,r){r=r||{},p=p||this.obj;var m={fn:q,scope:p,options:r},n=q;if(r.target){n=g(n,r,p)}if(r.delay){n=b(n,r,m,p)}if(r.single){n=d(n,this,q,p)}if(r.buffer){n=c(n,r,m,p)}m.fireFn=n;return m},findListener:function(q,p){var r=this.listeners,n=r.length,m,o;while(n--){m=r[n];if(m){o=m.scope;if(m.fn==q&&(o==p||o==this.obj)){return n}}}return -1},isListening:function(n,m){return this.findListener(n,m)!=-1},removeListener:function(r,q){var p,m,n,s=this,o=j;if((p=s.findListener(r,q))!=-1){if(s.firing){s.listeners=s.listeners.slice(0)}m=s.listeners[p];if(m.task){m.task.cancel();delete m.task}n=m.tasks&&m.tasks.length;if(n){while(n--){m.tasks[n].cancel()}delete m.tasks}s.listeners.splice(p,1);o=h}return o},clearListeners:function(){var o=this,m=o.listeners,n=m.length;while(n--){o.removeListener(m[n].fn,m[n].scope)}},fire:function(){var r=this,o=l(arguments),q=r.listeners,m=q.length,p=0,n;if(m>0){r.firing=h;for(;p<m;p++){n=q[p];if(n&&n.fireFn.apply(n.scope||r.obj||window,o)===j){return(r.firing=j)}}}r.firing=j;return h}}})();(function(){var q=this,v=true,g={toString:1},t;for(t in g){v=null}if(v){v=["hasOwnProperty","valueOf","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","constructor"]}if(typeof Rs==="undefined"){q.Rs={}}Rs.global=q;Rs.enumerables=v;function e(i){return function(A,z){var B,C;if(A===null){return this}if(typeof A!=="string"){for(B in A){if(A.hasOwnProperty(B)){i.call(this,B,A[B])}}if(Rs.enumerables){for(C=Rs.enumerables.length;C--;){B=Rs.enumerables[C];if(A.hasOwnProperty(B)){i.call(this,B,A[B])}}}}else{i.call(this,A,z)}return this}}function x(F,B,E){if(typeof B==="string"){if(E&&E.constructor===Object){if(F[B]&&F[B].constructor===Object){x(F[B],E)}else{F[B]=(function(i){return o.call(i)})(E)}}else{F[B]=E}return F}var A=1,C=arguments.length,z,D;for(;A<C;A++){z=arguments[A];for(D in z){if(z.hasOwnProperty(D)){x(F,D,z[D])}}}return F}function k(i){return i.charAt(0).toUpperCase()+i.substr(1)}function r(B,D,z){if(!B||!B.length){return[]}if(typeof B==="string"){B=B.split("")}if(supportsSliceOnNodeList){return o.call(B,D||0,z||B.length)}var C=[],A;D=D||0;z=z?((z<0)?B.length+z:z):B.length;for(A=D;A<z;A++){C.push(B[A])}return C}function h(z,i){if(z===undefined||z===null){return[]}if(Rs.isArray(z)){return(i)?o.call(z):z}if(z&&z.length!==undefined&&typeof z!=="string"){return r(z)}return[z]}function m(D,B,C){if(supportsIndexOf){return D.indexOf(B,C)}var z,A=D.length;for(z=(C<0)?Math.max(0,A+C):C||0;z<A;z++){if(D[z]===B){return z}}return -1}function y(i){return i.splice.apply(i,o.call(arguments,1))}function p(i,A,z){for(var B in i){if(i.hasOwnProperty(B)){if(A.call(z||i,B,i[B],i)===false){return}}}}function d(z,i,A){var B=z[i]||Rs.emptyFn;return z[i]=function(){var C=A.apply(this,arguments);B.apply(this,arguments);return C}}function b(z,i){return function(){return z[i].apply(z,arguments)}}function j(C,B){if(supportsIndexOf){return C.indexOf(B)!==-1}var z,A;for(z=0,A=C.length;z<A;z++){if(C[z]===B){return true}}return false}function n(z,i){if(!j(z,i)){z.push(i)}}var l=Rs.Base=function(){};l.prototype={$className:"Rs.Base",$class:l,self:l,constructor:function(){return this},initConfig:function(i){if(!this.$configInited){this.config=x({},this.config||{},i||{});this.applyConfig(this.config);this.$configInited=true}return this},setConfig:function(i){this.applyConfig(i||{});return this},applyConfig:e(function(i,z){var A="set"+k(i);if(typeof this[A]==="function"){this[A].call(this,z)}return this}),callParent:function(z){var B=this.callParent.caller,A,i;if(!B.$owner){if(!B.caller){Rs.error("Attempting to call a protected method from the public scope, which is not allowed")}B=B.caller}A=B.$owner.superclass;i=B.$name;if(!(i in A)){Rs.error("this.callParent() was called but there's no such method ("+i+") found in the parent class ("+(Rs.getClassName(A)||"Object"))}return A[i].apply(this,z||[])},statics:function(){var z=this.statics.caller,i=this.self;if(!z){return i}return z.$owner},callOverridden:function(i){var z=this.callOverridden.caller;if(!z.$owner){Rs.error("Attempting to call a protected method from the public scope, which is not allowed")}if(!z.$previous){Rs.error("this.callOverridden was called in '"+z.$name+"' but this method has never been overridden")}return z.$previous.apply(this,i||[])},destroy:function(){}};Rs.apply(Rs.Base,{create:function(){return Rs.create.apply(Rs,[this].concat(Array.prototype.slice.call(arguments,0)))},own:function(i,z){if(typeof z=="function"){this.ownMethod(i,z)}else{this.prototype[i]=z}},ownMethod:function(i,A){var B;if(typeof A.$owner!=="undefined"&&A!==Rs.emptyFn){B=A;A=function(){return B.apply(this,arguments)}}var z;z=Rs.getClassName(this);if(z){A.displayName=z+"#"+i}A.$owner=this;A.$name=i;this.prototype[i]=A},addStatics:function(i){for(var z in i){if(i.hasOwnProperty(z)){this[z]=i[z]}}return this},addInheritableStatics:function(z){var D,i,B=this.prototype,A,E;D=B.$inheritableStatics;i=B.$hasInheritableStatics;if(!D){D=B.$inheritableStatics=[];i=B.$hasInheritableStatics={}}var C=Rs.getClassName(this);for(A in z){if(z.hasOwnProperty(A)){E=z[A];if(typeof E=="function"){E.displayName=C+"."+A}this[A]=E;if(!i[A]){i[A]=true;D.push(A)}}}return this},implement:function(A){var C=this.prototype,z=Rs.enumerables,B,D,F;var E=Rs.getClassName(this);for(B in A){if(A.hasOwnProperty(B)){F=A[B];if(typeof F==="function"){F.$owner=this;F.$name=B;if(E){F.displayName=E+"#"+B}}C[B]=F}}if(z){for(D=z.length;D--;){B=z[D];if(A.hasOwnProperty(B)){F=A[B];F.$owner=this;F.$name=B;C[B]=F}}}},borrow:function(D,A){var z=D.prototype,B,C,E;A=h(A);for(B=0,C=A.length;B<C;B++){E=A[B];this.own(E,z[E])}return this},override:function(A){var C=this.prototype,z=Rs.enumerables,B,D,F,E;if(arguments.length===2){B=A;F=arguments[1];if(typeof F=="function"){if(typeof C[B]=="function"){E=C[B];F.$previous=E}this.ownMethod(B,F)}else{C[B]=F}return this}for(B in A){if(A.hasOwnProperty(B)){F=A[B];if(typeof F==="function"){if(typeof C[B]==="function"){E=C[B];F.$previous=E}this.ownMethod(B,F)}else{C[B]=F}}}if(z){for(D=z.length;D--;){B=z[D];if(A.hasOwnProperty(B)){if(typeof C[B]!=="undefined"){E=C[B];A[B].$previous=E}this.ownMethod(B,A[B])}}}return this},mixin:function(A,i){var z=i.prototype,D=this.prototype,B,C;for(B in z){if(z.hasOwnProperty(B)){if(typeof D[B]==="undefined"&&B!=="mixins"&&B!=="mixinId"){if(typeof z[B]==="function"){C=z[B];if(typeof C.$owner==="undefined"){this.ownMethod(B,C)}else{D[B]=C}}else{D[B]=z[B]}}else{if(B==="config"&&D.config&&z.config){x(D.config,z.config)}}}}if(typeof z.onClassMixedIn!=="undefined"){z.onClassMixedIn.call(i,this)}if(!D.hasOwnProperty("mixins")){if("mixins" in D){D.mixins=x({},D.mixins)}else{D.mixins={}}}D.mixins[A]=z},getName:function(){return Rs.getClassName(this)},createAlias:e(function(z,i){this.prototype[z]=function(){return this[i].apply(this,arguments)}})});var u,l=Rs.Base,s=[],w;for(w in l){if(l.hasOwnProperty(w)){s.push(w)}}Rs.Class=u=function(E,K,I){if(typeof E!="function"){I=K;K=E;E=function(){return this.constructor.apply(this,arguments)}}if(!K){K={}}var A=K.preprocessors||u.getDefaultPreprocessors(),F=u.getPreprocessors(),D=0,H=[],L,J,z,C,B,G;for(C=0,G=s.length;C<G;C++){J=s[C];E[J]=l[J]}delete K.preprocessors;for(B=0,G=A.length;B<G;B++){L=A[B];if(typeof L=="string"){L=F[L];if(!L.always){if(K.hasOwnProperty(L.name)){H.push(L.fn)}}else{H.push(L.fn)}}else{H.push(L)}}K.onClassCreated=I||Rs.emptyFn;K.onBeforeClassCreated=function(i,M){I=M.onClassCreated;delete M.onBeforeClassCreated;delete M.onClassCreated;i.implement(M);I.call(i,i)};z=function(i,M){L=H[D++];if(!L){M.onBeforeClassCreated.apply(this,arguments);return}if(L.call(this,i,M,z)!==false){z.apply(this,arguments)}};z.call(u,E,K);return E};Rs.apply(u,{preprocessors:{},registerPreprocessor:function(z,A,i){this.preprocessors[z]={name:z,always:i||false,fn:A};return this},getPreprocessor:function(i){return this.preprocessors[i]},getPreprocessors:function(){return this.preprocessors},getDefaultPreprocessors:function(){return this.defaultPreprocessors||[]},setDefaultPreprocessors:function(i){this.defaultPreprocessors=h(i);return this},setDefaultPreprocessorPosition:function(A,C,B){var i=this.defaultPreprocessors,z;if(typeof C=="string"){if(C==="first"){i.unshift(A);return this}else{if(C==="last"){i.push(A);return this}}C=(C==="after")?1:-1}z=m(i,B);if(z!==-1){y(i,Math.max(0,z+C),0,A)}return this}});u.registerPreprocessor("extend",function(M,C){var H=C.extend,z=Rs.Base,F=z.prototype,J=function(){},K,D,B,G,L,A,I,E;if(H&&H!==Object){K=H}else{K=z}I=K.prototype;J.prototype=I;E=M.prototype=new J();if(!("$class" in K)){for(D in F){if(!I[D]){I[D]=F[D]}}}E.self=M;M.superclass=E.superclass=I;delete C.extend;A=I.$inheritableStatics;if(A){for(B=0,G=A.length;B<G;B++){L=A[B];if(!M.hasOwnProperty(L)){M[L]=K[L]}}}if(I.config){E.config=x({},I.config)}else{E.config={}}if(E.$onExtended){E.$onExtended.call(M,M,C)}if(C.onClassExtended){E.$onExtended=C.onClassExtended;delete C.onClassExtended}},true);u.registerPreprocessor("statics",function(i,z){i.addStatics(z.statics);delete z.statics});u.registerPreprocessor("inheritableStatics",function(i,z){i.addInheritableStatics(z.inheritableStatics);delete z.inheritableStatics});u.registerPreprocessor("config",function(i,A){var z=i.prototype;p(A.config,function(F){var C=F.charAt(0).toUpperCase()+F.substr(1),D=F,E="apply"+C,G="set"+C,B="get"+C;if(!(E in z)&&!A.hasOwnProperty(E)){A[E]=function(H){return H}}if(!(G in z)&&!A.hasOwnProperty(G)){A[G]=function(I){var H=this[E].call(this,I,this[D]);if(typeof H!="undefined"){this[D]=H}return this}}if(!(B in z)&&!A.hasOwnProperty(B)){A[B]=function(){return this[D]}}});x(z.config,A.config);delete A.config});u.registerPreprocessor("mixins",function(A,F){var z=F.mixins,C,B,D,E;delete F.mixins;d(F,"onClassCreated",function(i){if(z instanceof Array){for(D=0,E=z.length;D<E;D++){B=z[D];C=B.prototype.mixinId||B.$className;i.mixin(C,B)}}else{for(C in z){if(z.hasOwnProperty(C)){i.mixin(C,z[C])}}}})});u.setDefaultPreprocessors(["extend","statics","inheritableStatics","config","mixins"]);var o=Array.prototype.slice;var c=Rs.ClassManager={classes:{},existCache:{},namespaceRewrites:[{from:"rs.",to:{}}],maps:{alternateToName:{},aliasToName:{},nameToAliases:{}},instantiators:[],instantiationCounts:{},isCreated:function(C){var B,D,A,z,E;if(typeof C!=="string"||C.length<1){Rs.error("Invalid classname, must be a string and must not be empty")}if(this.classes.hasOwnProperty(C)||this.existCache.hasOwnProperty(C)){return true}z=Rs.global;E=this.parseNamespace(C);for(B=0,D=E.length;B<D;B++){A=E[B];if(typeof A!=="string"){z=A}else{if(!z||!z[A]){return false}z=z[A]}}this.existCache[C]=true;return true},parseNamespace:function(i){if(typeof i!=="string"){Rs.error("Invalid namespace, must be a string")}var z=[];z=z.concat(i.split("."));return z},setNamespace:function(C,F){var A=Rs.global,G=this.parseNamespace(C),E=G.length-1,z=G[E],D,B;for(D=0;D<E;D++){B=G[D];if(typeof B!=="string"){A=B}else{if(!A[B]){A[B]={}}A=A[B]}}A[z]=F;return A[z]},createNamespaces:function(){var z=Rs.global,E,B,C,A,D,F;for(C=0,D=arguments.length;C<D;C++){E=this.parseNamespace(arguments[C]);for(A=0,F=E.length;A<F;A++){B=E[A];if(typeof B!=="string"){z=B}else{if(!z[B]){z[B]={}}z=z[B]}}}return z},set:function(i,A){var z=this.getName(A);this.classes[i]=this.setNamespace(i,A);if(z&&z!==i){this.maps.alternateToName[i]=z}return this},get:function(i){if(this.classes.hasOwnProperty(i)){return this.classes[i]}Rs.error("undefined class:"+i)},setAlias:function(i,z){var B=this.maps.aliasToName,C=this.maps.nameToAliases,A;if(typeof i==="string"){A=i}else{A=this.getName(i)}if(z&&B[z]!==A){if(B.hasOwnProperty(z)&&Rs.isDefined(Rs.global.console)){Rs.global.console.log("[Rs.ClassManager] Overriding existing alias: '"+z+"' of: '"+B[z]+"' with: '"+A+"'. Be sure it's intentional.")}B[z]=A}if(!C[A]){C[A]=[]}if(z){n(C[A],z)}return this},getByAlias:function(i){return this.get(this.getNameByAlias(i))},getNameByAlias:function(i){return this.maps.aliasToName[i]||""},getNameByAlternate:function(i){return this.maps.alternateToName[i]||""},getAliasesByName:function(i){return this.maps.nameToAliases[i]||[]},getName:function(i){return i&&i.$className||""},getClass:function(i){return i&&i.self||null},create:function(A,B,i){var z=this;if(typeof A!=="string"){Rs.error("Invalid class name '"+A+"' specified, must be a non-empty string")}B.$className=A;return new u(B,function(){var J=B.postprocessors||z.defaultPostprocessors,I=z.postprocessors,E=0,D=[],C,H,F,G;delete B.postprocessors;for(F=0,G=J.length;F<G;F++){C=J[F];if(typeof C==="string"){C=I[C];if(!C.always){if(B[C.name]!==undefined){D.push(C.fn)}}else{D.push(C.fn)}}else{D.push(C)}}H=function(L,K,M){C=D[E++];if(!C){z.set(A,K);if(i){i.call(K,K)}return}if(C.call(this,L,K,M,H)!==false){H.apply(this,arguments)}};H.call(z,A,this,B)})},instantiateByAlias:function(){var z=arguments[0],i=o.call(arguments),A=this.getNameByAlias(z);if(!A){A=this.maps.aliasToName[z];if(!A){Rs.error("Cannot create an instance of unrecognized alias: "+z)}}i[0]=A;return this.instantiate.apply(this,i)},instantiate:function(){var A=arguments[0],z=o.call(arguments,1),B=A,C,i;if(typeof A!=="function"){if((typeof A!=="string"||A.length<1)){Rs.error("Invalid class name or alias '"+A+"' specified, must be a non-empty string")}i=this.get(A)}else{i=A}if(!i){C=this.getNameByAlias(A);if(C){A=C;i=this.get(A)}}if(!i){C=this.getNameByAlternate(A);if(C){A=C;i=this.get(A)}}if(!i){Rs.error("Cannot create an instance of unrecognized class name / alias: "+B)}if(typeof i!=="function"){Rs.error("'"+A+"' is a singleton and cannot be instantiated")}if(!this.instantiationCounts[A]){this.instantiationCounts[A]=0}this.instantiationCounts[A]++;return this.getInstantiator(z.length)(i,z)},dynInstantiate:function(z,i){i=h(i,true);i.unshift(z);return this.instantiate.apply(this,i)},getInstantiator:function(B){if(!this.instantiators[B]){var A=B,z=[];for(A=0;A<B;A++){z.push("a["+A+"]")}this.instantiators[B]=new Function("c","a","return new c("+z.join(",")+")")}return this.instantiators[B]},postprocessors:{},defaultPostprocessors:[],registerPostprocessor:function(z,A,i){this.postprocessors[z]={name:z,always:i||false,fn:A};return this},setDefaultPostprocessors:function(i){this.defaultPostprocessors=h(i);return this},setDefaultPostprocessorPosition:function(z,C,B){var A=this.defaultPostprocessors,i;if(typeof C==="string"){if(C==="first"){A.unshift(z);return this}else{if(C==="last"){A.push(z);return this}}C=(C==="after")?1:-1}i=m(A,B);if(i!==-1){y(A,Math.max(0,i+C),0,z)}return this},getNamesByExpression:function(G){var E=this.maps.nameToAliases,H=[],z,D,B,A,I,C,F;if(typeof G!=="string"||G.length<1){Rs.error("Expression "+G+" is invalid, must be a non-empty string")}if(G.indexOf("*")!==-1){G=G.replace(/\*/g,"(.*?)");I=new RegExp("^"+G+"$");for(z in E){if(E.hasOwnProperty(z)){B=E[z];if(z.search(I)!==-1){H.push(z)}else{for(C=0,F=B.length;C<F;C++){D=B[C];if(D.search(I)!==-1){H.push(z);break}}}}}}else{A=this.getNameByAlias(G);if(A){H.push(A)}else{A=this.getNameByAlternate(G);if(A){H.push(A)}else{H.push(G)}}}return H}};var a=c.defaultPostprocessors;c.registerPostprocessor("alias",function(B,A,E){var z=E.alias,C,D;delete E.alias;for(C=0,D=z.length;C<D;C++){alias=z[C];this.setAlias(A,alias)}});c.registerPostprocessor("singleton",function(z,i,B,A){A.call(this,z,new i(),B);return false});c.registerPostprocessor("alternateClassName",function(A,z,E){var C=E.alternateClassName,B,D,F;if(!(C instanceof Array)){C=[C]}for(B=0,D=C.length;B<D;B++){F=C[B];if(typeof F!=="string"){Rs.error("Invalid alternate of: '"+F+"' for class: '"+A+"'; must be a valid string")}this.set(F,z)}});c.setDefaultPostprocessors(["alias","singleton","alternateClassName"]);Rs.apply(Rs,{create:b(c,"instantiate"),factory:function(F,D){if(F instanceof Array){var C,E;for(C=0,E=F.length;C<E;C++){F[C]=Rs.factory(F[C],D)}return F}var z=(typeof F==="string");if(z||(F instanceof Object&&F.constructor===Object)){var B,A={};if(z){B=F}else{B=F.className;A=F;delete A.className}if(D!==undefined&&B.indexOf(D)===-1){B=D+"."+k(B)}return Rs.create(B,A)}if(typeof F==="function"){return Rs.create(F)}return F},createByAlias:b(c,"instantiateByAlias"),define:function(A,B,z){if(!B.override){return c.create.apply(c,arguments)}var i=A;B=Rs.apply({},B);delete B.override;return c.create(i,{isPartial:true,constructor:function(){throw new Error("Cannot create override '"+i+"'")}},function(){var C=c.get(A);if(C.override){C.override(B)}else{C.self.override(B)}if(z){z.call(C)}})},getClassName:b(c,"getName"),getDisplayName:function(i){if(i.displayName){return i.displayName}if(i.$name&&i.$class){return Rs.getClassName(i.$class)+"#"+i.$name}if(i.$className){return i.$className}return"Anonymous"},getClass:b(c,"getClass")});u.registerPreprocessor("className",function(i,z){if(z.$className){i.$className=z.$className;i.displayName=i.$className}},true);u.setDefaultPreprocessorPosition("className","first");u.registerPreprocessor("xtype",function(A,E){var D=h(E.xtype),z=h(E.alias),B,C,F;E.xtype=D[0];E.xtypes=D;z=E.alias=h(E.alias);for(B=0,C=D.length;B<C;B++){F=D[B];if(typeof F!="string"||F.length<1){throw new Error("[Rs.define] Invalid xtype of: '"+F+"' for class: '"+name+"'; must be a valid non-empty string")}}E.alias=z});u.setDefaultPreprocessorPosition("xtype","last");u.registerPreprocessor("alias",function(A,F){var z=h(F.alias),E=h(F.xtypes),C,D,B,G;for(C=0,D=z.length;C<D;C++){B=z[C];if(typeof B!="string"){throw new Error("[Rs.define] Invalid alias of: '"+B+"' for class: '"+name+"'; must be a valid string")}}F.alias=z;F.xtypes=E});u.setDefaultPreprocessorPosition("alias","last")})(Rs);Rs.DomHelper=function(){var s=null,j=/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,l=/^table|tbody|tr|td$/i,p,m="afterbegin",n="afterend",c="beforebegin",o="beforeend",a="<table>",h="</table>",b=a+"<tbody>",i="</tbody>"+h,k=b+"<tr>",r="</tr>"+i;function g(w,y,x,z,v,t){var u=p.insertHtml(z,Rs.getDom(w),q(y));return x?Rs.get(u,true):u}function q(z){var v="",u,y,x,t,A;if(Rs.isString(z)){v=z}else{if(Rs.isArray(z)){for(var w=0;w<z.length;w++){if(z[w]){v+=q(z[w])}}}else{v+="<"+(z.tag=z.tag||"div");Rs.iterate(z,function(B,C){if(!/tag|children|cn|html$/i.test(B)){if(Rs.isObject(C)){v+=" "+B+'="';Rs.iterate(C,function(E,D){v+=E+":"+D+";"});v+='"'}else{v+=" "+({cls:"class",htmlFor:"for"}[B]||B)+'="'+C+'"'}}});if(j.test(z.tag)){v+="/>"}else{v+=">";if((A=z.children||z.cn)){v+=q(A)}else{if(z.html){v+=z.html}}v+="</"+z.tag+">"}}}return v}function e(A,x,w,y){s.innerHTML=[x,w,y].join("");var t=-1,v=s,u;while(++t<A){v=v.firstChild}if(u=v.nextSibling){var z=document.createDocumentFragment();while(v){u=v.nextSibling;z.appendChild(v);v=u}v=z}return v}function d(t,u,w,v){var x,y;s=s||document.createElement("div");if(t=="td"&&(u==m||u==o)||!/td|tr|tbody/i.test(t)&&(u==c||u==n)){return}y=u==c?w:u==n?w.nextSibling:u==m?w.firstChild:null;if(u==c||u==n){w=w.parentNode}if(t=="td"||(t=="tr"&&(u==o||u==m))){x=e(4,k,v,r)}else{if((t=="tbody"&&(u==o||u==m))||(t=="tr"&&(u==c||u==n))){x=e(3,b,v,i)}else{x=e(2,a,v,h)}}w.insertBefore(x,y);return x}p={markup:function(t){return q(t)},applyStyles:function(w,x){if(x){var u=0,t,v;w=Rs.fly(w);if(Rs.isFunction(x)){x=x.call()}if(Rs.isString(x)){x=Rs.trim(x).split(/\s*(?::|;)\s*/);for(t=x.length;u<t;){w.setStyle(x[u++],x[u++])}}else{if(Rs.isObject(x)){w.setStyle(x)}}}},insertHtml:function(y,t,z){var x={},v,B,A,C,w,u;y=y.toLowerCase();x[c]=["BeforeBegin","previousSibling"];x[n]=["AfterEnd","nextSibling"];if(t.insertAdjacentHTML){if(l.test(t.tagName)&&(u=d(t.tagName.toLowerCase(),y,t,z))){return u}x[m]=["AfterBegin","firstChild"];x[o]=["BeforeEnd","lastChild"];if((v=x[y])){t.insertAdjacentHTML(v[0],z);return t[v[1]]}}else{A=t.ownerDocument.createRange();B="setStart"+(/end/i.test(y)?"After":"Before");if(x[y]){A[B](t);C=A.createContextualFragment(z);t.parentNode.insertBefore(C,y==c?t:t.nextSibling);return t[(y==c?"previous":"next")+"Sibling"]}else{w=(y==m?"first":"last")+"Child";if(t.firstChild){A[B](t[w]);C=A.createContextualFragment(z);if(y==m){t.insertBefore(C,t.firstChild)}else{t.appendChild(C)}}else{t.innerHTML=z}return t[w]}}throw'Illegal insertion point -> "'+y+'"'},insertBefore:function(t,v,u){return g(t,v,u,c)},insertAfter:function(t,v,u){return g(t,v,u,n,"nextSibling")},insertFirst:function(t,v,u){return g(t,v,u,m,"firstChild")},append:function(t,v,u){return g(t,v,u,o,"",true)},overwrite:function(t,v,u){t=Rs.getDom(t);t.innerHTML=q(v);return u?Rs.get(t.firstChild):t.firstChild},createHtml:q};return p}();Rs.Template=function(d){var e=this,b=arguments,c=[];if(Rs.isArray(d)){d=d.join("")}else{if(b.length>1){Rs.each(b,function(a){if(Rs.isObject(a)){Rs.apply(e,a)}else{c.push(a)}});d=c.join("")}}e.html=d;if(e.compiled){e.compile()}};Rs.Template.prototype={re:/\{([\w-]+)\}/g,applyTemplate:function(a){var b=this;return b.compiled?b.compiled(a):b.html.replace(b.re,function(c,d){return a[d]!==undefined?a[d]:""})},set:function(a,c){var b=this;b.html=a;b.compiled=null;return c?b.compile():b},compile:function(){var me=this,sep=Rs.isGecko?"+":",";function fn(m,name){name="values['"+name+"']";return"'"+sep+"("+name+" == undefined ? '' : "+name+")"+sep+"'"}eval("this.compiled = function(values){ return "+(Rs.isGecko?"'":"['")+me.html.replace(/\\/g,"\\\\").replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,fn)+(Rs.isGecko?"';};":"'].join('');};"));return me},insertFirst:function(b,a,c){return this.doInsert("afterBegin",b,a,c)},insertBefore:function(b,a,c){return this.doInsert("beforeBegin",b,a,c)},insertAfter:function(b,a,c){return this.doInsert("afterEnd",b,a,c)},append:function(b,a,c){return this.doInsert("beforeEnd",b,a,c)},doInsert:function(c,e,b,a){e=Rs.getDom(e);var d=Rs.DomHelper.insertHtml(c,e,this.applyTemplate(b));return a?Rs.get(d,true):d},overwrite:function(b,a,c){b=Rs.getDom(b);b.innerHTML=this.applyTemplate(a);return c?Rs.get(b.firstChild,true):b.firstChild}};Rs.Template.prototype.apply=Rs.Template.prototype.applyTemplate;Rs.Template.from=function(b,a){b=Rs.getDom(b);return new Rs.Template(b.value||b.innerHTML,a||"")};Rs.DomQuery=function(){var cache={},simpleCache={},valueCache={},nonSpace=/\S/,trimRe=/^\s+|\s+$/g,tplRe=/\{(\d+)\}/g,modeRe=/^(\s?[\/>+~]\s?|\s|$)/,tagTokenRe=/^(#)?([\w-\*]+)/,nthRe=/(\d*)n\+?(\d*)/,nthRe2=/\D/,isIE=window.ActiveXObject?true:false,key=30803;eval("var batch = 30803;");function child(p,index){var i=0,n=p.firstChild;while(n){if(n.nodeType==1){if(++i==index){return n}}n=n.nextSibling}return null}function next(n){while((n=n.nextSibling)&&n.nodeType!=1){}return n}function prev(n){while((n=n.previousSibling)&&n.nodeType!=1){}return n}function children(d){var n=d.firstChild,ni=-1,nx;while(n){nx=n.nextSibling;if(n.nodeType==3&&!nonSpace.test(n.nodeValue)){d.removeChild(n)}else{n.nodeIndex=++ni}n=nx}return this}function byClassName(c,a,v){if(!v){return c}var r=[],ri=-1,cn;for(var i=0,ci;ci=c[i];i++){if((" "+ci.className+" ").indexOf(v)!=-1){r[++ri]=ci}}return r}function attrValue(n,attr){if(!n.tagName&&typeof n.length!="undefined"){n=n[0]}if(!n){return null}if(attr=="for"){return n.htmlFor}if(attr=="class"||attr=="className"){return n.className}return n.getAttribute(attr)||n[attr]}function getNodes(ns,mode,tagName){var result=[],ri=-1,cs;if(!ns){return result}tagName=tagName||"*";if(typeof ns.getElementsByTagName!="undefined"){ns=[ns]}if(!mode){for(var i=0,ni;ni=ns[i];i++){cs=ni.getElementsByTagName(tagName);for(var j=0,ci;ci=cs[j];j++){result[++ri]=ci}}}else{if(mode=="/"||mode==">"){var utag=tagName.toUpperCase();for(var i=0,ni,cn;ni=ns[i];i++){cn=ni.childNodes;for(var j=0,cj;cj=cn[j];j++){if(cj.nodeName==utag||cj.nodeName==tagName||tagName=="*"){result[++ri]=cj}}}}else{if(mode=="+"){var utag=tagName.toUpperCase();for(var i=0,n;n=ns[i];i++){while((n=n.nextSibling)&&n.nodeType!=1){}if(n&&(n.nodeName==utag||n.nodeName==tagName||tagName=="*")){result[++ri]=n}}}else{if(mode=="~"){var utag=tagName.toUpperCase();for(var i=0,n;n=ns[i];i++){while((n=n.nextSibling)){if(n.nodeName==utag||n.nodeName==tagName||tagName=="*"){result[++ri]=n}}}}}}}return result}function concat(a,b){if(b.slice){return a.concat(b)}for(var i=0,l=b.length;i<l;i++){a[a.length]=b[i]}return a}function byTag(cs,tagName){if(cs.tagName||cs==document){cs=[cs]}if(!tagName){return cs}var r=[],ri=-1;tagName=tagName.toLowerCase();for(var i=0,ci;ci=cs[i];i++){if(ci.nodeType==1&&ci.tagName.toLowerCase()==tagName){r[++ri]=ci}}return r}function byId(cs,attr,id){if(cs.tagName||cs==document){cs=[cs]}if(!id){return cs}var r=[],ri=-1;for(var i=0,ci;ci=cs[i];i++){if(ci&&ci.id==id){r[++ri]=ci;return r}}return r}function byAttribute(cs,attr,value,op,custom){var r=[],ri=-1,st=custom=="{",f=Rs.DomQuery.operators[op],a,ih;for(var i=0,ci;ci=cs[i];i++){if(ci.nodeType!=1){continue}ih=ci.innerHTML;if(ih!==null&&ih!==undefined){if(st){a=Rs.DomQuery.getStyle(ci,attr)}else{if(attr=="class"||attr=="className"){a=ci.className}else{if(attr=="for"){a=ci.htmlFor}else{if(attr=="href"){a=ci.getAttribute("href",2)}else{a=ci.getAttribute(attr)}}}}}else{a=ci.getAttribute(attr)}if((f&&f(a,value))||(!f&&a)){r[++ri]=ci}}return r}function byPseudo(cs,name,value){return Rs.DomQuery.pseudos[name](cs,value)}function nodupIEXml(cs){var d=++key,r;cs[0].setAttribute("_nodup",d);r=[cs[0]];for(var i=1,len=cs.length;i<len;i++){var c=cs[i];if(!c.getAttribute("_nodup")!=d){c.setAttribute("_nodup",d);r[r.length]=c}}for(var i=0,len=cs.length;i<len;i++){cs[i].removeAttribute("_nodup")}return r}function nodup(cs){if(!cs){return[]}var len=cs.length,c,i,r=cs,cj,ri=-1;if(!len||typeof cs.nodeType!="undefined"||len==1){return cs}if(isIE&&typeof cs[0].selectSingleNode!="undefined"){return nodupIEXml(cs)}var d=++key;cs[0]._nodup=d;for(i=1;c=cs[i];i++){if(c._nodup!=d){c._nodup=d}else{r=[];for(var j=0;j<i;j++){r[++ri]=cs[j]}for(j=i+1;cj=cs[j];j++){if(cj._nodup!=d){cj._nodup=d;r[++ri]=cj}}return r}}return r}function quickDiffIEXml(c1,c2){var d=++key,r=[];for(var i=0,len=c1.length;i<len;i++){c1[i].setAttribute("_qdiff",d)}for(var i=0,len=c2.length;i<len;i++){if(c2[i].getAttribute("_qdiff")!=d){r[r.length]=c2[i]}}for(var i=0,len=c1.length;i<len;i++){c1[i].removeAttribute("_qdiff")}return r}function quickDiff(c1,c2){var len1=c1.length,d=++key,r=[];if(!len1){return c2}if(isIE&&typeof c1[0].selectSingleNode!="undefined"){return quickDiffIEXml(c1,c2)}for(var i=0;i<len1;i++){c1[i]._qdiff=d}for(var i=0,len=c2.length;i<len;i++){if(c2[i]._qdiff!=d){r[r.length]=c2[i]}}return r}function quickId(ns,mode,root,id){if(ns==root){var d=root.ownerDocument||root;return d.getElementById(id)}ns=getNodes(ns,mode,"*");return byId(ns,null,id)}return{getStyle:function(el,name){return Rs.fly(el).getStyle(name)},compile:function(path,type){type=type||"select";var fn=["var f = function(root){\n var mode; ++batch; var n = root || document;\n"],q=path,mode,lq,tk=Rs.DomQuery.matchers,tklen=tk.length,mm,lmode=q.match(modeRe);if(lmode&&lmode[1]){fn[fn.length]='mode="'+lmode[1].replace(trimRe,"")+'";';q=q.replace(lmode[1],"")}while(path.substr(0,1)=="/"){path=path.substr(1)}while(q&&lq!=q){lq=q;var tm=q.match(tagTokenRe);if(type=="select"){if(tm){if(tm[1]=="#"){fn[fn.length]='n = quickId(n, mode, root, "'+tm[2]+'");'}else{fn[fn.length]='n = getNodes(n, mode, "'+tm[2]+'");'}q=q.replace(tm[0],"")}else{if(q.substr(0,1)!="@"){fn[fn.length]='n = getNodes(n, mode, "*");'}}}else{if(tm){if(tm[1]=="#"){fn[fn.length]='n = byId(n, null, "'+tm[2]+'");'}else{fn[fn.length]='n = byTag(n, "'+tm[2]+'");'}q=q.replace(tm[0],"")}}while(!(mm=q.match(modeRe))){var matched=false;for(var j=0;j<tklen;j++){var t=tk[j];var m=q.match(t.re);if(m){fn[fn.length]=t.select.replace(tplRe,function(x,i){return m[i]});q=q.replace(m[0],"");matched=true;break}}if(!matched){throw'Error parsing selector, parsing failed at "'+q+'"'}}if(mm[1]){fn[fn.length]='mode="'+mm[1].replace(trimRe,"")+'";';q=q.replace(mm[1],"")}}fn[fn.length]="return nodup(n);\n}";eval(fn.join(""));return f},select:function(path,root,type){if(!root||root==document){root=document}if(typeof root=="string"){root=document.getElementById(root)}var paths=path.split(","),results=[];for(var i=0,len=paths.length;i<len;i++){var p=paths[i].replace(trimRe,"");if(!cache[p]){cache[p]=Rs.DomQuery.compile(p);if(!cache[p]){throw p+" is not a valid selector"}}var result=cache[p](root);if(result&&result!=document){results=results.concat(result)}}if(paths.length>1){return nodup(results)}return results},selectNode:function(path,root){return Rs.DomQuery.select(path,root)[0]},selectValue:function(path,root,defaultValue){path=path.replace(trimRe,"");if(!valueCache[path]){valueCache[path]=Rs.DomQuery.compile(path,"select")}var n=valueCache[path](root),v;n=n[0]?n[0]:n;if(typeof n.normalize=="function"){n.normalize()}v=(n&&n.firstChild?n.firstChild.nodeValue:null);return((v===null||v===undefined||v==="")?defaultValue:v)},selectNumber:function(path,root,defaultValue){var v=Rs.DomQuery.selectValue(path,root,defaultValue||0);return parseFloat(v)},is:function(el,ss){if(typeof el=="string"){el=document.getElementById(el)}var isArray=Rs.isArray(el),result=Rs.DomQuery.filter(isArray?el:[el],ss);return isArray?(result.length==el.length):(result.length>0)},filter:function(els,ss,nonMatches){ss=ss.replace(trimRe,"");if(!simpleCache[ss]){simpleCache[ss]=Rs.DomQuery.compile(ss,"simple")}var result=simpleCache[ss](els);return nonMatches?quickDiff(result,els):result},matchers:[{re:/^\.([\w-]+)/,select:'n = byClassName(n, null, " {1} ");'},{re:/^\:([\w-]+)(?:\(((?:[^\s>\/]*|.*?))\))?/,select:'n = byPseudo(n, "{1}", "{2}");'},{re:/^(?:([\[\{])(?:@)?([\w-]+)\s?(?:(=|.=)\s?['"]?(.*?)["']?)?[\]\}])/,select:'n = byAttribute(n, "{2}", "{4}", "{3}", "{1}");'},{re:/^#([\w-]+)/,select:'n = byId(n, null, "{1}");'},{re:/^@([\w-]+)/,select:'return {firstChild:{nodeValue:attrValue(n, "{1}")}};'}],operators:{"=":function(a,v){return a==v},"!=":function(a,v){return a!=v},"^=":function(a,v){return a&&a.substr(0,v.length)==v},"$=":function(a,v){return a&&a.substr(a.length-v.length)==v},"*=":function(a,v){return a&&a.indexOf(v)!==-1},"%=":function(a,v){return(a%v)==0},"|=":function(a,v){return a&&(a==v||a.substr(0,v.length+1)==v+"-")},"~=":function(a,v){return a&&(" "+a+" ").indexOf(" "+v+" ")!=-1}},pseudos:{"first-child":function(c){var r=[],ri=-1,n;for(var i=0,ci;ci=n=c[i];i++){while((n=n.previousSibling)&&n.nodeType!=1){}if(!n){r[++ri]=ci}}return r},"last-child":function(c){var r=[],ri=-1,n;for(var i=0,ci;ci=n=c[i];i++){while((n=n.nextSibling)&&n.nodeType!=1){}if(!n){r[++ri]=ci}}return r},"nth-child":function(c,a){var r=[],ri=-1,m=nthRe.exec(a=="even"&&"2n"||a=="odd"&&"2n+1"||!nthRe2.test(a)&&"n+"+a||a),f=(m[1]||1)-0,l=m[2]-0;for(var i=0,n;n=c[i];i++){var pn=n.parentNode;if(batch!=pn._batch){var j=0;for(var cn=pn.firstChild;cn;cn=cn.nextSibling){if(cn.nodeType==1){cn.nodeIndex=++j}}pn._batch=batch}if(f==1){if(l==0||n.nodeIndex==l){r[++ri]=n}}else{if((n.nodeIndex+l)%f==0){r[++ri]=n}}}return r},"only-child":function(c){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if(!prev(ci)&&!next(ci)){r[++ri]=ci}}return r},empty:function(c){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){var cns=ci.childNodes,j=0,cn,empty=true;while(cn=cns[j]){++j;if(cn.nodeType==1||cn.nodeType==3){empty=false;break}}if(empty){r[++ri]=ci}}return r},contains:function(c,v){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if((ci.textContent||ci.innerText||"").indexOf(v)!=-1){r[++ri]=ci}}return r},nodeValue:function(c,v){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if(ci.firstChild&&ci.firstChild.nodeValue==v){r[++ri]=ci}}return r},checked:function(c){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if(ci.checked==true){r[++ri]=ci}}return r},not:function(c,ss){return Rs.DomQuery.filter(c,ss,true)},any:function(c,selectors){var ss=selectors.split("|"),r=[],ri=-1,s;for(var i=0,ci;ci=c[i];i++){for(var j=0;s=ss[j];j++){if(Rs.DomQuery.is(ci,s)){r[++ri]=ci;break}}}return r},odd:function(c){return this["nth-child"](c,"odd")},even:function(c){return this["nth-child"](c,"even")},nth:function(c,a){return c[a-1]||[]},first:function(c){return c[0]||[]},last:function(c){return c[c.length-1]||[]},has:function(c,ss){var s=Rs.DomQuery.select,r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if(s(ss,ci).length>0){r[++ri]=ci}}return r},next:function(c,ss){var is=Rs.DomQuery.is,r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){var n=next(ci);if(n&&is(n,ss)){r[++ri]=ci}}return r},prev:function(c,ss){var is=Rs.DomQuery.is,r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){var n=prev(ci);if(n&&is(n,ss)){r[++ri]=ci}}return r}}}}();Rs.query=Rs.DomQuery.select;Rs.EventManager=function(){var u,m,i=false,l=Rs.lib.Event,n=Rs.lib.Dom,b=document,v=window,e="ie-deferred-loader",o="DOMContentLoaded",g=/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/,q=[];function k(y){var B=false,x=0,w=q.length,B=false,z=false,A;if(y){if(y.getElementById||y.navigator){for(;x<w;++x){A=q[x];if(A.el===y){B=A.id;break}}if(!B){B=Rs.id(y);q.push({id:B,el:y});z=true}}else{B=Rs.id(y)}if(!Rs.elCache[B]){Rs.Element.addToCache(new Rs.Element(y),B);if(z){Rs.elCache[B].skipGC=true}}}return B}function j(y,A,D,z,x,F){y=Rs.getDom(y);var w=k(y),E=Rs.elCache[w].events,B;B=l.on(y,A,x);E[A]=E[A]||[];E[A].push([D,x,F,B,z]);if(A=="mousewheel"&&y.addEventListener){var C=["DOMMouseScroll",x,false];y.addEventListener.apply(y,C);Rs.EventManager.addListener(v,"unload",function(){y.removeEventListener.apply(y,C)})}if(A=="mousedown"&&y==document){Rs.EventManager.stoppedMouseDownEvent.addListener(x)}}function c(){if(!i){Rs.isReady=i=true;if(m){clearInterval(m)}if(Rs.isGecko||Rs.isOpera){b.removeEventListener(o,c,false)}if(Rs.isIE){var w=b.getElementById(e);if(w){w.onreadystatechange=null;w.parentNode.removeChild(w)}}if(u){u.fire();u.listeners=[]}}}function a(){var w="complete";u=new Rs.util.Event();if(Rs.isGecko||Rs.isOpera){b.addEventListener(o,c,false)}else{if(Rs.isIE){b.write("<script id="+e+' defer="defer" src="//:"><\/script>');b.getElementById(e).onreadystatechange=function(){if(this.readyState==w){c()}}}else{if(Rs.isWebKit){m=setInterval(function(){if(b.readyState==w){c()}},10)}}}l.on(v,"load",c)}function s(w,x){return function(){var y=Rs.toArray(arguments);if(x.target==Rs.EventObject.setEvent(y[0]).target){w.apply(this,y)}}}function t(x,y,w){return function(z){w.delay(y.buffer,x,null,[new Rs.EventObjectImpl(z)])}}function p(A,z,w,y,x){return function(B){Rs.EventManager.removeListener(z,w,y,x);A(B)}}function d(x,y,w){return function(A){var z=new Rs.util.DelayedTask(x);if(!w.tasks){w.tasks=[]}w.tasks.push(z);z.delay(y.delay||10,x,null,[new Rs.EventObjectImpl(A)])}}function h(B,A,w,D,E){var x=!Rs.isObject(w)?{}:w,y=Rs.getDom(B),z;D=D||x.fn;E=E||x.scope;if(!y){throw'Error listening for "'+A+'". Element "'+B+"\" doesn't exist."}function C(G){if(!Rs){return}G=Rs.EventObject.setEvent(G);var F;if(x.delegate){if(!(F=G.getTarget(x.delegate,y))){return}}else{F=G.target}if(x.stopEvent){G.stopEvent()}if(x.preventDefault){G.preventDefault()}if(x.stopPropagation){G.stopPropagation()}if(x.normalized){G=G.browserEvent}D.call(E||y,G,F,x)}if(x.target){C=s(C,x)}if(x.delay){C=d(C,x,D)}if(x.single){C=p(C,y,A,D,E)}if(x.buffer){z=new Rs.util.DelayedTask(C);C=t(C,x,z)}j(y,A,D,z,C,E);return C}var r={addListener:function(y,w,A,z,x){if(Rs.isObject(w)){var D=w,B,C;for(B in D){C=D[B];if(!g.test(B)){if(Rs.isFunction(C)){h(y,B,D,C,D.scope)}else{h(y,B,C)}}}}else{h(y,w,x,A,z)}},removeListener:function(z,D,H,I){z=Rs.getDom(z);var w=k(z),F=z&&(Rs.elCache[w].events)[D]||[],x,C,A,B,y,E,G;for(C=0,E=F.length;C<E;C++){if(Rs.isArray(G=F[C])&&G[0]==H&&(!I||G[2]==I)){if(G[4]){G[4].cancel()}B=H.tasks&&H.tasks.length;if(B){while(B--){H.tasks[B].cancel()}delete H.tasks}y=x=G[1];if(l.extAdapter){y=G[3]}l.un(z,D,y);F.splice(C,1);if(F.length===0){delete Rs.elCache[w].events[D]}for(B in Rs.elCache[w].events){return false}Rs.elCache[w].events={};return false}}if(D=="mousewheel"&&z.addEventListener&&x){z.removeEventListener("DOMMouseScroll",x,false)}if(D=="mousedown"&&z==b&&x){Rs.EventManager.stoppedMouseDownEvent.removeListener(x)}},removeAll:function(x){x=Rs.getDom(x);var w=k(x),C=Rs.elCache[w]||{},F=C.events||{},B,A,D,y,E,z;for(y in F){if(F.hasOwnProperty(y)){B=F[y];for(A=0,D=B.length;A<D;A++){E=B[A];if(E[4]){E[4].cancel()}if(E[0].tasks&&(z=E[0].tasks.length)){while(z--){E[0].tasks[z].cancel()}delete E.tasks}l.un(x,y,l.extAdapter?E[3]:E[1])}}}if(Rs.elCache[w]){Rs.elCache[w].events={}}},getListeners:function(z,w){z=Rs.getDom(z);var B=k(z),x=Rs.elCache[B]||{},A=x.events||{},y=[];if(A&&A[w]){return A[w]}else{return null}},purgeElement:function(y,w,A){y=Rs.getDom(y);var x=k(y),D=Rs.elCache[x]||{},E=D.events||{},z,C,B;if(A){if(E&&E.hasOwnProperty(A)){C=E[A];for(z=0,B=C.length;z<B;z++){Rs.EventManager.removeListener(y,A,C[z][0])}}}else{Rs.EventManager.removeAll(y)}if(w&&y&&y.childNodes){for(z=0,B=y.childNodes.length;z<B;z++){Rs.EventManager.purgeElement(y.childNodes[z],w,A)}}},_unload:function(){var w;for(w in Rs.elCache){Rs.EventManager.removeAll(w)}},onDocumentReady:function(y,x,w){if(i){u.addListener(y,x,w);u.fire();u.listeners=[]}else{if(!u){a()}w=w||{};w.delay=w.delay||1;u.addListener(y,x,w)}}};r.on=r.addListener;r.un=r.removeListener;r.stoppedMouseDownEvent=new Rs.util.Event();return r}();Rs.onReady=Rs.EventManager.onDocumentReady;Rs.EventObject=function(){var b=Rs.lib.Event,a={3:13,63234:37,63235:39,63232:38,63233:40,63276:33,63277:34,63272:46,63273:36,63275:35},c=Rs.isIE?{1:0,4:1,2:2}:(Rs.isWebKit?{1:0,2:1,3:2}:{0:0,1:1,2:2});Rs.EventObjectImpl=function(d){if(d){this.setEvent(d.browserEvent||d)}};Rs.EventObjectImpl.prototype={setEvent:function(g){var d=this;if(g==d||(g&&g.browserEvent)){return g}d.browserEvent=g;if(g){d.button=g.button?c[g.button]:(g.which?g.which-1:-1);if(g.type=="click"&&d.button==-1){d.button=0}d.type=g.type;d.shiftKey=g.shiftKey;d.ctrlKey=g.ctrlKey||g.metaKey||false;d.altKey=g.altKey;d.keyCode=g.keyCode;d.charCode=g.charCode;d.target=b.getTarget(g);d.xy=b.getXY(g)}else{d.button=-1;d.shiftKey=false;d.ctrlKey=false;d.altKey=false;d.keyCode=0;d.charCode=0;d.target=null;d.xy=[0,0]}return d},stopEvent:function(){var d=this;if(d.browserEvent){if(d.browserEvent.type=="mousedown"){Rs.EventManager.stoppedMouseDownEvent.fire(d)}b.stopEvent(d.browserEvent)}},preventDefault:function(){if(this.browserEvent){b.preventDefault(this.browserEvent)}},stopPropagation:function(){var d=this;if(d.browserEvent){if(d.browserEvent.type=="mousedown"){Rs.EventManager.stoppedMouseDownEvent.fire(d)}b.stopPropagation(d.browserEvent)}},getCharCode:function(){return this.charCode||this.keyCode},getKey:function(){return this.normalizeKey(this.keyCode||this.charCode)},normalizeKey:function(d){return Rs.isSafari?(a[d]||d):d},getPageX:function(){return this.xy[0]},getPageY:function(){return this.xy[1]},getXY:function(){return this.xy},getTarget:function(e,g,d){return e?Rs.fly(this.target).findParent(e,g,d):(d?Rs.get(this.target):this.target)},getRelatedTarget:function(){return this.browserEvent?b.getRelatedTarget(this.browserEvent):null},getWheelDelta:function(){var d=this.browserEvent;var g=0;if(d.wheelDelta){g=d.wheelDelta/120}else{if(d.detail){g=-d.detail/3}}return g},within:function(g,h,d){if(g){var e=this[h?"getRelatedTarget":"getTarget"]();return e&&((d?(e==Rs.getDom(g)):false)||Rs.fly(g).contains(e))}return false}};return new Rs.EventObjectImpl()}();Rs.apply(Rs.EventManager,function(){var c,j,e,b,a=Rs.lib.Dom,i=/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/,h=0,g=0,d=Rs.isWebKit?Rs.num(navigator.userAgent.match(/AppleWebKit\/(\d+)/)[1])>=525:!((Rs.isGecko&&!Rs.isWindows)||Rs.isOpera);return{doResizeEvent:function(){var l=a.getViewHeight(),k=a.getViewWidth();if(g!=l||h!=k){c.fire(h=k,g=l)}},onWindowResize:function(m,l,k){if(!c){c=new Rs.util.Event();j=new Rs.util.DelayedTask(this.doResizeEvent);Rs.EventManager.on(window,"resize",this.fireWindowResize,this)}c.addListener(m,l,k)},fireWindowResize:function(){if(c){j.delay(100)}},onTextResize:function(n,m,k){if(!e){e=new Rs.util.Event();var l=new Rs.Element(document.createElement("div"));l.dom.className="x-text-resize";l.dom.innerHTML="X";l.appendTo(document.body);b=l.dom.offsetHeight;setInterval(function(){if(l.dom.offsetHeight!=b){e.fire(b,b=l.dom.offsetHeight)}},this.textResizeInterval)}e.addListener(n,m,k)},removeResizeListener:function(l,k){if(c){c.removeListener(l,k)}},fireResize:function(){if(c){c.fire(a.getViewWidth(),a.getViewHeight())}},textResizeInterval:50,ieDeferSrc:false,getKeyEvent:function(){return d?"keydown":"keypress"},useKeydown:d}}());Rs.EventManager.on=Rs.EventManager.addListener;Rs.apply(Rs.EventObjectImpl.prototype,{BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,CONTROL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGEUP:33,PAGE_DOWN:34,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,isNavKeyPress:function(){var b=this,a=this.normalizeKey(b.keyCode);return(a>=33&&a<=40)||a==b.RETURN||a==b.TAB||a==b.ESC},isSpecialKey:function(){var a=this.normalizeKey(this.keyCode);return(this.type=="keypress"&&this.ctrlKey)||this.isNavKeyPress()||(a==this.BACKSPACE)||(a>=16&&a<=20)||(a>=44&&a<=46)},getPoint:function(){return new Rs.lib.Point(this.xy[0],this.xy[1])},hasModifier:function(){return((this.ctrlKey||this.altKey)||this.shiftKey)}});(function(){var j=document;Rs.Element=function(o,p){var q=typeof o=="string"?j.getElementById(o):o,r;if(!q){return null}r=q.id;if(!p&&r&&Rs.elCache[r]){return Rs.elCache[r].el}this.dom=q;this.id=r||Rs.id(q)};var a=Rs.lib.Dom,g=Rs.DomHelper,m=Rs.lib.Event,e=Rs.lib.Anim,h=Rs.Element,b=Rs.elCache;h.prototype={set:function(t,q){var r=this.dom,p,s,q=(q!==false)&&!!r.setAttribute;for(p in t){if(t.hasOwnProperty(p)){s=t[p];if(p=="style"){g.applyStyles(r,s)}else{if(p=="cls"){r.className=s}else{if(q){r.setAttribute(p,s)}else{r[p]=s}}}}}return this},defaultUnit:"px",is:function(o){return Rs.DomQuery.is(this.dom,o)},focus:function(r,q){var o=this,q=q||o.dom;try{if(Number(r)){o.focus.defer(r,null,[null,q])}else{q.focus()}}catch(p){}return o},blur:function(){try{this.dom.blur()}catch(o){}return this},swallowEvent:function(o,p){var r=this;function q(s){s.stopPropagation();if(p){s.preventDefault()}}if(Rs.isArray(o)){Rs.each(o,function(s){r.on(s,q)});return r}r.on(o,q);return r},getValue:function(o){var p=this.dom.value;return o?parseInt(p,10):p},addListener:function(o,r,q,p){Rs.EventManager.on(this.dom,o,r,q||this,p);return this},removeListener:function(o,q,p){Rs.EventManager.removeListener(this.dom,o,q,p||this);return this},removeAllListeners:function(){Rs.EventManager.removeAll(this.dom);return this},purgeAllListeners:function(){Rs.EventManager.purgeElement(this,true);return this},addUnits:function(o){if(o===""||o=="auto"||o===undefined){o=o||""}else{if(!isNaN(o)||!k.test(o)){o=o+(this.defaultUnit||"px")}}return o},load:function(p,q,o){Rs.Ajax.request(Rs.apply({params:q,url:p.url||p,callback:o,el:this.dom,indicatorText:p.indicatorText||""},Rs.isObject(p)?p:{}));return this},isBorderBox:function(){return i[(this.dom.tagName||"").toLowerCase()]||Rs.isBorderBox},remove:function(){var o=this,p=o.dom;if(p){delete o.dom;Rs.removeNode(p)}},hover:function(p,o,r,q){var s=this;s.on("mouseenter",p,r||s.dom,q);s.on("mouseleave",o,r||s.dom,q);return s},contains:function(o){return !o?false:Rs.lib.Dom.isAncestor(this.dom,o.dom?o.dom:o)},getAttributeNS:function(p,o){return this.getAttribute(o,p)},getAttribute:Rs.isIE?function(o,q){var r=this.dom,p=typeof r[q+":"+o];if(["undefined","unknown"].indexOf(p)==-1){return r[q+":"+o]}return r[o]}:function(o,p){var q=this.dom;return q.getAttributeNS(p,o)||q.getAttribute(p+":"+o)||q.getAttribute(o)||q[o]},update:function(o){if(this.dom){this.dom.innerHTML=o}return this},unselectable:function(){this.dom.unselectable="on";return this.swallowEvent("selectstart",true).applyStyles("-moz-user-select:none;-khtml-user-select:none;").addClass("x-unselectable")},applyStyles:function(o){Rs.DomHelper.applyStyles(this.dom,o);return this},getStyles:function(){var o={};Rs.each(arguments,function(p){o[p]=this.getStyle(p)},this);return o}};var n=h.prototype;h.addMethods=function(p){Rs.apply(n,p)};n.on=n.addListener;n.un=n.removeListener;n.autoBoxAdjust=true;var k=/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i,d;h.get=function(p){var o,s,r;if(!p){return null}if(typeof p=="string"){if(!(s=j.getElementById(p))){return null}if(b[p]&&b[p].el){o=b[p].el;o.dom=s}else{o=h.addToCache(new h(s))}return o}else{if(p.tagName){if(!(r=p.id)){r=Rs.id(p)}if(b[r]&&b[r].el){o=b[r].el;o.dom=p}else{o=h.addToCache(new h(p))}return o}else{if(p instanceof h){if(p!=d){p.dom=j.getElementById(p.id)||p.dom}return p}else{if(p.isComposite){return p}else{if(Rs.isArray(p)){return h.select(p)}else{if(p==j){if(!d){var q=function(){};q.prototype=h.prototype;d=new q();d.dom=j}return d}}}}}}return null};h.addToCache=function(o,p){p=p||o.id;b[p]={el:o,data:{},events:{}};return o};h.data=function(p,o,q){p=h.get(p);if(!p){return null}var r=b[p.id].data;if(arguments.length==2){return r[o]}else{return(r[o]=q)}};function l(){if(!Rs.enableGarbageCollector){clearInterval(h.collectorThreadId)}else{var p,r,u,s;for(p in b){s=b[p];if(s.skipGC){continue}r=s.el;u=r.dom;if(!u||!u.parentNode||(!u.offsetParent&&!j.getElementById(p))){if(Rs.enableListenerCollection){Rs.EventManager.removeAll(u)}delete b[p]}}if(Rs.isIE){var q={};for(p in b){q[p]=b[p]}b=Rs.elCache=q}}}h.collectorThreadId=setInterval(l,30000);var c=function(){};c.prototype=h.prototype;h.Flyweight=function(o){this.dom=o};h.Flyweight.prototype=new c();h.Flyweight.prototype.isFlyweight=true;h._flyweights={};h.fly=function(q,o){var p=null;o=o||"_global";if(q=Rs.getDom(q)){(h._flyweights[o]=h._flyweights[o]||new h.Flyweight()).dom=q;p=h._flyweights[o]}return p};Rs.get=h.get;Rs.fly=h.fly;var i=Rs.isStrict?{select:1}:{input:1,select:1,textarea:1};if(Rs.isIE||Rs.isGecko){i.button=1}Rs.EventManager.on(window,"unload",function(){delete b;delete h._flyweights})})();Rs.Element.addMethods(function(){var d="parentNode",b="nextSibling",c="previousSibling",e=Rs.DomQuery,a=Rs.get;return{findParent:function(m,l,h){var j=this.dom,g=document.body,k=0,i;if(Rs.isGecko&&Object.prototype.toString.call(j)=="[object XULElement]"){return null}l=l||50;if(isNaN(l)){i=Rs.getDom(l);l=Number.MAX_VALUE}while(j&&j.nodeType==1&&k<l&&j!=g&&j!=i){if(e.is(j,m)){return h?a(j):j}k++;j=j.parentNode}return null},findParentNode:function(j,i,g){var h=Rs.fly(this.dom.parentNode,"_internal");return h?h.findParent(j,i,g):null},up:function(h,g){return this.findParentNode(h,g,true)},select:function(g){return Rs.Element.select(g,this.dom)},query:function(g){return e.select(g,this.dom)},child:function(g,h){var i=e.selectNode(g,this.dom);return h?i:a(i)},down:function(g,h){var i=e.selectNode(" > "+g,this.dom);return h?i:a(i)},parent:function(g,h){return this.matchNode(d,d,g,h)},next:function(g,h){return this.matchNode(b,b,g,h)},prev:function(g,h){return this.matchNode(c,c,g,h)},first:function(g,h){return this.matchNode(b,"firstChild",g,h)},last:function(g,h){return this.matchNode(c,"lastChild",g,h)},matchNode:function(h,k,g,i){var j=this.dom[k];while(j){if(j.nodeType==1&&(!g||e.is(j,g))){return !i?a(j):j}j=j[h]}return null}}}());Rs.Element.addMethods(function(){var c=Rs.getDom,a=Rs.get,b=Rs.DomHelper;return{appendChild:function(d){return a(d).appendTo(this)},appendTo:function(d){c(d).appendChild(this.dom);return this},insertBefore:function(d){(d=c(d)).parentNode.insertBefore(this.dom,d);return this},insertAfter:function(d){(d=c(d)).parentNode.insertBefore(this.dom,d.nextSibling);return this},insertFirst:function(e,d){e=e||{};if(e.nodeType||e.dom||typeof e=="string"){e=c(e);this.dom.insertBefore(e,this.dom.firstChild);return !d?a(e):e}else{return this.createChild(e,this.dom.firstChild,d)}},replace:function(d){d=a(d);this.insertBefore(d);d.remove();return this},replaceWith:function(d){var e=this;if(d.nodeType||d.dom||typeof d=="string"){d=c(d);e.dom.parentNode.insertBefore(d,e.dom)}else{d=b.insertBefore(e.dom,d)}delete Rs.elCache[e.id];Rs.removeNode(e.dom);e.id=Rs.id(e.dom=d);Rs.Element.addToCache(e.isFlyweight?new Rs.Element(e.dom):e);return e},createChild:function(e,d,g){e=e||{tag:"div"};return d?b.insertBefore(d,e,g!==true):b[!this.dom.firstChild?"overwrite":"append"](this.dom,e,g!==true)},wrap:function(d,e){var g=b.insertBefore(this.dom,d||{tag:"div"},!e);g.dom?g.dom.appendChild(this.dom):g.appendChild(this.dom);return g},insertHtml:function(e,g,d){var h=b.insertHtml(e,this.dom,g);return d?Rs.get(h):h}}}());Rs.Element.addMethods(function(){var h={},x=/(-[a-z])/gi,b={},s=document.defaultView,u=Rs.isIE?"styleFloat":"cssFloat",C=/alpha\(opacity=(.*)\)/i,l=/^\s+|\s+$/g,A=Rs.Element,d="padding",c="margin",y="border",t="-left",q="-right",w="-top",o="-bottom",j="-width",r=Math,z="hidden",e="isClipped",k="overflow",n="overflow-x",m="overflow-y",B="originalClip",i={l:y+t+j,r:y+q+j,t:y+w+j,b:y+o+j},g={l:d+t,r:d+q,t:d+w,b:d+o},a={l:c+t,r:c+q,t:c+w,b:c+o},D=Rs.Element.data;function p(E,F){return F.charAt(1).toUpperCase()}function v(E){return h[E]||(h[E]=E=="float"?u:E.replace(x,p))}return{adjustWidth:function(E){var F=this;var G=Rs.isNumber(E);if(G&&F.autoBoxAdjust&&!F.isBorderBox()){E-=(F.getBorderWidth("lr")+F.getPadding("lr"))}return(G&&E<0)?0:E},adjustHeight:function(E){var F=this;var G=Rs.isNumber(E);if(G&&F.autoBoxAdjust&&!F.isBorderBox()){E-=(F.getBorderWidth("tb")+F.getPadding("tb"))}return(G&&E<0)?0:E},addClass:function(H){var I=this,G,E,F;H=Rs.isArray(H)?H:[H];for(G=0,E=H.length;G<E;G++){F=H[G];if(F){I.dom.className+=(!I.hasClass(F)&&F?" "+F:"")}}return I},radioClass:function(H){var I=this.dom.parentNode.childNodes,F;H=Rs.isArray(H)?H:[H];for(var G=0,E=I.length;G<E;G++){F=I[G];if(F&&F.nodeType==1){Rs.fly(F,"_internal").removeClass(H)}}return this.addClass(H)},removeClass:function(H){var I=this,F;H=Rs.isArray(H)?H:[H];if(I.dom&&I.dom.className){for(var G=0,E=H.length;G<E;G++){F=H[G];if(F){I.dom.className=I.dom.className.replace(b[F]=b[F]||new RegExp("(?:^|\\s+)"+F+"(?:\\s+|$)","g")," ")}}}return I},toggleClass:function(E){return this.hasClass(E)?this.removeClass(E):this.addClass(E)},hasClass:function(E){return E&&(" "+this.dom.className+" ").indexOf(" "+E+" ")!=-1},replaceClass:function(F,E){return this.removeClass(F).addClass(E)},isStyle:function(E,F){return this.getStyle(E)==F},getStyle:function(){return s&&s.getComputedStyle?function(K){var H=this.dom,E,G,F,I,J=Rs.isWebKit,I;if(H==document){return null}K=v(K);if(J&&/marginRight/.test(K)){I=this.getStyle("display");H.style.display="inline-block"}F=(E=H.style[K])?E:(G=s.getComputedStyle(H,""))?G[K]:null;if(J){if(F=="rgba(0, 0, 0, 0)"){F="transparent"}else{if(I){H.style.display=I}}}return F}:function(I){var G=this.dom,E,F;if(G==document){return null}if(I=="opacity"){if(G.style.filter.match){if(E=G.style.filter.match(C)){var H=parseFloat(E[1]);if(!isNaN(H)){return H?H/100:0}}}return 1}I=v(I);return G.style[I]||((F=G.currentStyle)?F[I]:null)}}(),getColor:function(E,F,J){var H=this.getStyle(E),G=Rs.isDefined(J)?J:"#",I;if(!H||/transparent|inherit/.test(H)){return F}if(/^r/.test(H)){Rs.each(H.slice(4,H.length-1).split(","),function(K){I=parseInt(K,10);G+=(I<16?"0":"")+I.toString(16)})}else{H=H.replace("#","");G+=H.length==3?H.replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"):H}return(G.length>5?G.toLowerCase():F)},setStyle:function(I,H){var F,G,E;if(!Rs.isObject(I)){F={};F[I]=H;I=F}for(G in I){H=I[G];G=="opacity"?this.setOpacity(H):this.dom.style[v(G)]=H}return this},setOpacity:function(F,E){var I=this,G=I.dom.style;if(!E||!I.anim){if(Rs.isIE){var H=F<1?"alpha(opacity="+F*100+")":"",J=G.filter.replace(C,"").replace(l,"");G.zoom=1;G.filter=J+(J.length>0?" ":"")+H}else{G.opacity=F}}else{I.anim({opacity:{to:F}},I.preanim(arguments,1),null,0.35,"easeIn")}return I},clearOpacity:function(){var E=this.dom.style;if(Rs.isIE){if(!Rs.isEmpty(E.filter)){E.filter=E.filter.replace(C,"").replace(l,"")}}else{E.opacity=E["-moz-opacity"]=E["-khtml-opacity"]=""}return this},getHeight:function(G){var F=this,I=F.dom,H=Rs.isIE&&F.isStyle("display","none"),E=r.max(I.offsetHeight,H?0:I.clientHeight)||0;E=!G?E:E-F.getBorderWidth("tb")-F.getPadding("tb");return E<0?0:E},getWidth:function(F){var G=this,I=G.dom,H=Rs.isIE&&G.isStyle("display","none"),E=r.max(I.offsetWidth,H?0:I.clientWidth)||0;E=!F?E:E-G.getBorderWidth("lr")-G.getPadding("lr");return E<0?0:E},setWidth:function(F,E){var G=this;F=G.adjustWidth(F);!E||!G.anim?G.dom.style.width=G.addUnits(F):G.anim({width:{to:F}},G.preanim(arguments,1));return G},setHeight:function(E,F){var G=this;E=G.adjustHeight(E);!F||!G.anim?G.dom.style.height=G.addUnits(E):G.anim({height:{to:E}},G.preanim(arguments,1));return G},getBorderWidth:function(E){return this.addStyles(E,i)},getPadding:function(E){return this.addStyles(E,g)},clip:function(){var E=this,F=E.dom;if(!D(F,e)){D(F,e,true);D(F,B,{o:E.getStyle(k),x:E.getStyle(n),y:E.getStyle(m)});E.setStyle(k,z);E.setStyle(n,z);E.setStyle(m,z)}return E},unclip:function(){var E=this,G=E.dom;if(D(G,e)){D(G,e,false);var F=D(G,B);if(F.o){E.setStyle(k,F.o)}if(F.x){E.setStyle(n,F.x)}if(F.y){E.setStyle(m,F.y)}}return E},addStyles:function(J,I){var K=0,F=J.match(/\w/g),H;for(var G=0,E=F.length;G<E;G++){H=F[G]&&parseInt(this.getStyle(I[F[G]]),10);if(H){K+=r.abs(H)}}return K},margins:a}}());(function(){var a=Rs.lib.Dom,b="left",g="right",d="top",i="bottom",h="position",c="static",e="relative",j="auto",k="z-index";Rs.Element.addMethods({getX:function(){return a.getX(this.dom)},getY:function(){return a.getY(this.dom)},getXY:function(){return a.getXY(this.dom)},getOffsetsTo:function(l){var n=this.getXY(),m=Rs.fly(l,"_internal").getXY();return[n[0]-m[0],n[1]-m[1]]},setX:function(l,m){return this.setXY([l,this.getY()],this.animTest(arguments,m,1))},setY:function(m,l){return this.setXY([this.getX(),m],this.animTest(arguments,l,1))},setLeft:function(l){this.setStyle(b,this.addUnits(l));return this},setTop:function(l){this.setStyle(d,this.addUnits(l));return this},setRight:function(l){this.setStyle(g,this.addUnits(l));return this},setBottom:function(l){this.setStyle(i,this.addUnits(l));return this},setXY:function(n,l){var m=this;if(!l||!m.anim){a.setXY(m.dom,n)}else{m.anim({points:{to:n}},m.preanim(arguments,1),"motion")}return m},setLocation:function(l,n,m){return this.setXY([l,n],this.animTest(arguments,m,2))},moveTo:function(l,n,m){return this.setXY([l,n],this.animTest(arguments,m,2))},getLeft:function(l){return !l?this.getX():parseInt(this.getStyle(b),10)||0},getRight:function(l){var m=this;return !l?m.getX()+m.getWidth():(m.getLeft(true)+m.getWidth())||0},getTop:function(l){return !l?this.getY():parseInt(this.getStyle(d),10)||0},getBottom:function(l){var m=this;return !l?m.getY()+m.getHeight():(m.getTop(true)+m.getHeight())||0},position:function(p,o,l,n){var m=this;if(!p&&m.isStyle(h,c)){m.setStyle(h,e)}else{if(p){m.setStyle(h,p)}}if(o){m.setStyle(k,o)}if(l||n){m.setXY([l||false,n||false])}},clearPositioning:function(l){l=l||"";this.setStyle({left:l,right:l,top:l,bottom:l,"z-index":"",position:c});return this},getPositioning:function(){var m=this.getStyle(b);var n=this.getStyle(d);return{position:this.getStyle(h),left:m,right:m?"":this.getStyle(g),top:n,bottom:n?"":this.getStyle(i),"z-index":this.getStyle(k)}},setPositioning:function(l){var n=this,m=n.dom.style;n.setStyle(l);if(l.right==j){m.right=""}if(l.bottom==j){m.bottom=""}return n},translatePoints:function(m,u){u=isNaN(m[1])?u:m[1];m=isNaN(m[0])?m:m[0];var q=this,r=q.isStyle(h,e),s=q.getXY(),n=parseInt(q.getStyle(b),10),p=parseInt(q.getStyle(d),10);n=!isNaN(n)?n:(r?0:q.dom.offsetLeft);p=!isNaN(p)?p:(r?0:q.dom.offsetTop);return{left:(m-s[0]+n),top:(u-s[1]+p)}},animTest:function(m,l,n){return !!l&&this.preanim?this.preanim(m,n):false}})})();Rs.Element.addMethods({isScrollable:function(){var a=this.dom;return a.scrollHeight>a.clientHeight||a.scrollWidth>a.clientWidth},scrollTo:function(a,b){this.dom["scroll"+(/top/i.test(a)?"Top":"Left")]=b;return this},getScroll:function(){var i=this.dom,h=document,a=h.body,c=h.documentElement,b,g,e;if(i==h||i==a){if(Rs.isIE&&Rs.isStrict){b=c.scrollLeft;g=c.scrollTop}else{b=window.pageXOffset;g=window.pageYOffset}e={left:b||(a?a.scrollLeft:0),top:g||(a?a.scrollTop:0)}}else{e={left:i.scrollLeft,top:i.scrollTop}}return e}});Rs.Element.VISIBILITY=1;Rs.Element.DISPLAY=2;Rs.Element.addMethods(function(){var h="visibility",d="display",b="hidden",j="none",a="originalDisplay",c="visibilityMode",e=Rs.Element.DISPLAY,g=Rs.Element.data,i=function(m){var l=g(m,a);if(l===undefined){g(m,a,l="")}return l},k=function(n){var l=g(n,c);if(l===undefined){g(n,c,l=1)}return l};return{originalDisplay:"",visibilityMode:1,setVisibilityMode:function(l){g(this.dom,c,l);return this},animate:function(m,o,n,p,l){this.anim(m,{duration:o,callback:n,easing:p},l);return this},anim:function(o,p,m,r,n,l){m=m||"run";p=p||{};var q=this,s=Rs.lib.Anim[m](q.dom,o,(p.duration||r)||0.35,(p.easing||n)||"easeOut",function(){if(l){l.call(q)}if(p.callback){p.callback.call(p.scope||q,q,p)}},q);p.anim=s;return s},preanim:function(l,m){return !l[m]?false:(Rs.isObject(l[m])?l[m]:{duration:l[m+1],callback:l[m+2],easing:l[m+3]})},isVisible:function(){return !this.isStyle(h,b)&&!this.isStyle(d,j)},setVisible:function(p,m){var n=this,o=n.dom,l=k(this.dom)==e;if(!m||!n.anim){if(l){n.setDisplayed(p)}else{n.fixDisplay();o.style.visibility=p?"visible":b}}else{if(p){n.setOpacity(0.01);n.setVisible(true)}n.anim({opacity:{to:(p?1:0)}},n.preanim(arguments,1),null,0.35,"easeIn",function(){if(!p){o.style[l?d:h]=(l)?j:b;Rs.fly(o).setOpacity(1)}})}return n},toggle:function(l){var m=this;m.setVisible(!m.isVisible(),m.preanim(arguments,0));return m},setDisplayed:function(l){if(typeof l=="boolean"){l=l?i(this.dom):j}this.setStyle(d,l);return this},fixDisplay:function(){var l=this;if(l.isStyle(d,j)){l.setStyle(h,b);l.setStyle(d,i(this.dom));if(l.isStyle(d,j)){l.setStyle(d,"block")}}},hide:function(l){this.setVisible(false,this.preanim(arguments,0));return this},show:function(l){this.setVisible(true,this.preanim(arguments,0));return this}}}());(function(){var y=null,A=undefined,k=true,t=false,j="setX",h="setY",a="setXY",n="left",l="bottom",s="top",m="right",q="height",g="width",i="points",w="hidden",z="absolute",u="visible",e="motion",o="position",r="easeOut",d=new Rs.Element.Flyweight(),v={},x=function(B){return B||{}},p=function(B){d.dom=B;d.id=Rs.id(B);return d},c=function(B){if(!v[B]){v[B]=[]}return v[B]},b=function(C,B){v[C]=B};Rs.enableFx=k;Rs.Fx={switchStatements:function(C,D,B){return D.apply(this,B[C])},slideIn:function(H,E){E=x(E);var J=this,G=J.dom,M=G.style,O,B,L,D,C,M,I,N,K,F;H=H||"t";J.queueFx(E,function(){O=p(G).getXY();p(G).fixDisplay();B=p(G).getFxRestore();L={x:O[0],y:O[1],0:O[0],1:O[1],width:G.offsetWidth,height:G.offsetHeight};L.right=L.x+L.width;L.bottom=L.y+L.height;p(G).setWidth(L.width).setHeight(L.height);D=p(G).fxWrap(B.pos,E,w);M.visibility=u;M.position=z;function P(){p(G).fxUnwrap(D,B.pos,E);M.width=B.width;M.height=B.height;p(G).afterFx(E)}N={to:[L.x,L.y]};K={to:L.width};F={to:L.height};function Q(V,S,W,T,Y,aa,ad,ac,ab,X,U){var Z={};p(V).setWidth(W).setHeight(T);if(p(V)[Y]){p(V)[Y](aa)}S[ad]=S[ac]="0";if(ab){Z.width=ab}if(X){Z.height=X}if(U){Z.points=U}return Z}I=p(G).switchStatements(H.toLowerCase(),Q,{t:[D,M,L.width,0,y,y,n,l,y,F,y],l:[D,M,0,L.height,y,y,m,s,K,y,y],r:[D,M,L.width,L.height,j,L.right,n,s,y,y,N],b:[D,M,L.width,L.height,h,L.bottom,n,s,y,F,N],tl:[D,M,0,0,y,y,m,l,K,F,N],bl:[D,M,0,0,h,L.y+L.height,m,s,K,F,N],br:[D,M,0,0,a,[L.right,L.bottom],n,s,K,F,N],tr:[D,M,0,0,j,L.x+L.width,n,l,K,F,N]});M.visibility=u;p(D).show();arguments.callee.anim=p(D).fxanim(I,E,e,0.5,r,P)});return J},slideOut:function(F,D){D=x(D);var H=this,E=H.dom,K=E.style,L=H.getXY(),C,B,I,J,G={to:0};F=F||"t";H.queueFx(D,function(){B=p(E).getFxRestore();I={x:L[0],y:L[1],0:L[0],1:L[1],width:E.offsetWidth,height:E.offsetHeight};I.right=I.x+I.width;I.bottom=I.y+I.height;p(E).setWidth(I.width).setHeight(I.height);C=p(E).fxWrap(B.pos,D,u);K.visibility=u;K.position=z;p(C).setWidth(I.width).setHeight(I.height);function M(){D.useDisplay?p(E).setDisplayed(t):p(E).hide();p(E).fxUnwrap(C,B.pos,D);K.width=B.width;K.height=B.height;p(E).afterFx(D)}function N(O,X,V,Y,T,W,S,U,Q){var P={};O[X]=O[V]="0";P[Y]=T;if(W){P[W]=S}if(U){P[U]=Q}return P}J=p(E).switchStatements(F.toLowerCase(),N,{t:[K,n,l,q,G],l:[K,m,s,g,G],r:[K,n,s,g,G,i,{to:[I.right,I.y]}],b:[K,n,s,q,G,i,{to:[I.x,I.bottom]}],tl:[K,m,l,g,G,q,G],bl:[K,m,s,g,G,q,G,i,{to:[I.x,I.bottom]}],br:[K,n,s,g,G,q,G,i,{to:[I.x+I.width,I.bottom]}],tr:[K,n,l,g,G,q,G,i,{to:[I.right,I.y]}]});arguments.callee.anim=p(C).fxanim(J,D,e,0.5,r,M)});return H},puff:function(H){H=x(H);var F=this,G=F.dom,C=G.style,D,B,E;F.queueFx(H,function(){D=p(G).getWidth();B=p(G).getHeight();p(G).clearOpacity();p(G).show();E=p(G).getFxRestore();function I(){H.useDisplay?p(G).setDisplayed(t):p(G).hide();p(G).clearOpacity();p(G).setPositioning(E.pos);C.width=E.width;C.height=E.height;C.fontSize="";p(G).afterFx(H)}arguments.callee.anim=p(G).fxanim({width:{to:p(G).adjustWidth(D*2)},height:{to:p(G).adjustHeight(B*2)},points:{by:[-D*0.5,-B*0.5]},opacity:{to:0},fontSize:{to:200,unit:"%"}},H,e,0.5,r,I)});return F},switchOff:function(F){F=x(F);var D=this,E=D.dom,B=E.style,C;D.queueFx(F,function(){p(E).clearOpacity();p(E).clip();C=p(E).getFxRestore();function G(){F.useDisplay?p(E).setDisplayed(t):p(E).hide();p(E).clearOpacity();p(E).setPositioning(C.pos);B.width=C.width;B.height=C.height;p(E).afterFx(F)}p(E).fxanim({opacity:{to:0.3}},y,y,0.1,y,function(){p(E).clearOpacity();(function(){p(E).fxanim({height:{to:1},points:{by:[0,p(E).getHeight()*0.5]}},F,e,0.3,"easeIn",G)}).defer(100)})});return D},highlight:function(D,H){H=x(H);var F=this,G=F.dom,B=H.attr||"backgroundColor",C={},E;F.queueFx(H,function(){p(G).clearOpacity();p(G).show();function I(){G.style[B]=E;p(G).afterFx(H)}E=G.style[B];C[B]={from:D||"ffff9c",to:H.endColor||p(G).getColor(B)||"ffffff"};arguments.callee.anim=p(G).fxanim(C,H,"color",1,"easeIn",I)});return F},frame:function(B,E,H){H=x(H);var D=this,G=D.dom,C,F;D.queueFx(H,function(){B=B||"#C3DAF9";if(B.length==6){B="#"+B}E=E||1;p(G).show();var L=p(G).getXY(),J={x:L[0],y:L[1],0:L[0],1:L[1],width:G.offsetWidth,height:G.offsetHeight},I=function(){C=p(document.body||document.documentElement).createChild({style:{position:z,"z-index":35000,border:"0px solid "+B}});return C.queueFx({},K)};arguments.callee.anim={isAnimated:true,stop:function(){E=0;C.stopFx()}};function K(){var M=Rs.isBorderBox?2:1;F=C.anim({top:{from:J.y,to:J.y-20},left:{from:J.x,to:J.x-20},borderWidth:{from:0,to:10},opacity:{from:1,to:0},height:{from:J.height,to:J.height+20*M},width:{from:J.width,to:J.width+20*M}},{duration:H.duration||1,callback:function(){C.remove();--E>0?I():p(G).afterFx(H)}});arguments.callee.anim={isAnimated:true,stop:function(){F.stop()}}}I()});return D},pause:function(D){var C=this.dom,B;this.queueFx({},function(){B=setTimeout(function(){p(C).afterFx({})},D*1000);arguments.callee.anim={isAnimated:true,stop:function(){clearTimeout(B);p(C).afterFx({})}}});return this},fadeIn:function(D){D=x(D);var B=this,C=B.dom,E=D.endOpacity||1;B.queueFx(D,function(){p(C).setOpacity(0);p(C).fixDisplay();C.style.visibility=u;arguments.callee.anim=p(C).fxanim({opacity:{to:E}},D,y,0.5,r,function(){if(E==1){p(C).clearOpacity()}p(C).afterFx(D)})});return B},fadeOut:function(E){E=x(E);var C=this,D=C.dom,B=D.style,F=E.endOpacity||0;C.queueFx(E,function(){arguments.callee.anim=p(D).fxanim({opacity:{to:F}},E,y,0.5,r,function(){if(F==0){Rs.Element.data(D,"visibilityMode")==Rs.Element.DISPLAY||E.useDisplay?B.display="none":B.visibility=w;p(D).clearOpacity()}p(D).afterFx(E)})});return C},scale:function(B,C,D){this.shift(Rs.apply({},D,{width:B,height:C}));return this},shift:function(D){D=x(D);var C=this.dom,B={};this.queueFx(D,function(){for(var E in D){if(D[E]!=A){B[E]={to:D[E]}}}B.width?B.width.to=p(C).adjustWidth(D.width):B;B.height?B.height.to=p(C).adjustWidth(D.height):B;if(B.x||B.y||B.xy){B.points=B.xy||{to:[B.x?B.x.to:p(C).getX(),B.y?B.y.to:p(C).getY()]}}arguments.callee.anim=p(C).fxanim(B,D,e,0.35,r,function(){p(C).afterFx(D)})});return this},ghost:function(E,C){C=x(C);var G=this,D=G.dom,J=D.style,H={opacity:{to:0},points:{}},K=H.points,B,I,F;E=E||"b";G.queueFx(C,function(){B=p(D).getFxRestore();I=p(D).getWidth();F=p(D).getHeight();function L(){C.useDisplay?p(D).setDisplayed(t):p(D).hide();p(D).clearOpacity();p(D).setPositioning(B.pos);J.width=B.width;J.height=B.height;p(D).afterFx(C)}K.by=p(D).switchStatements(E.toLowerCase(),function(N,M){return[N,M]},{t:[0,-F],l:[-I,0],r:[I,0],b:[0,F],tl:[-I,-F],bl:[-I,F],br:[I,F],tr:[I,-F]});arguments.callee.anim=p(D).fxanim(H,C,e,0.5,r,L)});return G},syncFx:function(){var B=this;B.fxDefaults=Rs.apply(B.fxDefaults||{},{block:t,concurrent:k,stopFx:t});return B},sequenceFx:function(){var B=this;B.fxDefaults=Rs.apply(B.fxDefaults||{},{block:t,concurrent:t,stopFx:t});return B},nextFx:function(){var B=c(this.dom.id)[0];if(B){B.call(this)}},hasActiveFx:function(){return c(this.dom.id)[0]},stopFx:function(B){var C=this,E=C.dom.id;if(C.hasActiveFx()){var D=c(E)[0];if(D&&D.anim){if(D.anim.isAnimated){b(E,[D]);D.anim.stop(B!==undefined?B:k)}else{b(E,[])}}}return C},beforeFx:function(B){if(this.hasActiveFx()&&!B.concurrent){if(B.stopFx){this.stopFx();return k}return t}return k},hasFxBlock:function(){var B=c(this.dom.id);return B&&B[0]&&B[0].block},queueFx:function(E,B){var C=p(this.dom);if(!C.hasFxBlock()){Rs.applyIf(E,C.fxDefaults);if(!E.concurrent){var D=C.beforeFx(E);B.block=E.block;c(C.dom.id).push(B);if(D){C.nextFx()}}else{B.call(C)}}return C},fxWrap:function(H,F,D){var E=this.dom,C,B;if(!F.wrap||!(C=Rs.getDom(F.wrap))){if(F.fixPosition){B=p(E).getXY()}var G=document.createElement("div");G.style.visibility=D;C=E.parentNode.insertBefore(G,E);p(C).setPositioning(H);if(p(C).isStyle(o,"static")){p(C).position("relative")}p(E).clearPositioning("auto");p(C).clip();C.appendChild(E);if(B){p(C).setXY(B)}}return C},fxUnwrap:function(C,F,E){var D=this.dom;p(D).clearPositioning();p(D).setPositioning(F);if(!E.wrap){var B=p(C).dom.parentNode;B.insertBefore(D,C);p(C).remove()}},getFxRestore:function(){var B=this.dom.style;return{pos:this.getPositioning(),width:B.width,height:B.height}},afterFx:function(C){var B=this.dom,D=B.id;if(C.afterStyle){p(B).setStyle(C.afterStyle)}if(C.afterCls){p(B).addClass(C.afterCls)}if(C.remove==k){p(B).remove()}if(C.callback){C.callback.call(C.scope,p(B))}if(!C.concurrent){c(D).shift();p(B).nextFx()}},fxanim:function(E,F,C,G,D,B){C=C||"run";F=F||{};var H=Rs.lib.Anim[C](this.dom,E,(F.duration||G)||0.35,(F.easing||D)||r,B,this);F.anim=H;return H}};Rs.Fx.resize=Rs.Fx.scale;Rs.Element.addMethods(Rs.Fx)})();Rs.CompositeElementLite=function(b,a){this.elements=[];this.add(b,a);this.el=new Rs.Element.Flyweight()};Rs.CompositeElementLite.prototype={isComposite:true,getElement:function(a){var b=this.el;b.dom=a;b.id=a.id;return b},transformElement:function(a){return Rs.getDom(a)},getCount:function(){return this.elements.length},add:function(d,b){var e=this,g=e.elements;if(!d){return this}if(Rs.isString(d)){d=Rs.Element.selectorFunction(d,b)}else{if(d.isComposite){d=d.elements}else{if(!Rs.isIterable(d)){d=[d]}}}for(var c=0,a=d.length;c<a;++c){g.push(e.transformElement(d[c]))}return e},invoke:function(g,b){var h=this,d=h.elements,a=d.length,j,c;for(c=0;c<a;c++){j=d[c];if(j){Rs.Element.prototype[g].apply(h.getElement(j),b)}}return h},item:function(b){var d=this,c=d.elements[b],a=null;if(c){a=d.getElement(c)}return a},addListener:function(b,j,h,g){var d=this.elements,a=d.length,c,k;for(c=0;c<a;c++){k=d[c];if(k){Rs.EventManager.on(k,b,j,h||k,g)}}return this},each:function(g,d){var h=this,c=h.elements,a=c.length,b,j;for(b=0;b<a;b++){j=c[b];if(j){j=this.getElement(j);if(g.call(d||j,j,h,b)){break}}}return h},fill:function(a){var b=this;b.elements=[];b.add(a);return b},filter:function(a){var b=[],d=this,e=d.elements,c=Rs.isFunction(a)?a:function(g){return g.is(a)};d.each(function(j,g,h){if(c(j,h)!==false){b[b.length]=d.transformElement(j)}});d.elements=b;return d},indexOf:function(a){return this.elements.indexOf(this.transformElement(a))},replaceElement:function(e,c,a){var b=!isNaN(e)?e:this.indexOf(e),g;if(b>-1){c=Rs.getDom(c);if(a){g=this.elements[b];g.parentNode.insertBefore(c,g);Rs.removeNode(g)}this.elements.splice(b,1,c)}return this},clear:function(){this.elements=[]}};Rs.CompositeElementLite.prototype.on=Rs.CompositeElementLite.prototype.addListener;(function(){var c,b=Rs.Element.prototype,a=Rs.CompositeElementLite.prototype;for(c in b){if(Rs.isFunction(b[c])){(function(d){a[d]=a[d]||function(){return this.invoke(d,arguments)}}).call(a,c)}}})();if(Rs.DomQuery){Rs.Element.selectorFunction=Rs.DomQuery.select}Rs.Element.select=function(a,b){var c;if(typeof a=="string"){c=Rs.Element.selectorFunction(a,b)}else{if(a.length!==undefined){c=a}else{throw"Invalid selector"}}return new Rs.CompositeElementLite(c)};Rs.select=Rs.Element.select;(function(){var b="beforerequest",e="requestcomplete",d="requestexception",h=undefined,c="load",i="POST",a="GET",g=window;Rs.data.Connection=function(j){Rs.apply(this,j);this.addEvents(b,e,d);Rs.data.Connection.superclass.constructor.call(this)};Rs.extend(Rs.data.Connection,Rs.util.Observable,{timeout:30000,autoAbort:false,disableCaching:true,disableCachingParam:"_dc",request:function(n){var s=this;if(s.fireEvent(b,s,n)){if(n.el){if(!Rs.isEmpty(n.indicatorText)){s.indicatorText='<div class="loading-indicator">'+n.indicatorText+"</div>"}if(s.indicatorText){Rs.getDom(n.el).innerHTML=s.indicatorText}n.success=(Rs.isFunction(n.success)?n.success:function(){}).createInterceptor(function(o){Rs.getDom(n.el).innerHTML=o.responseText})}var u=n.extraParams||s.extraParams||{},l=n.params,k=n.url||s.url,j,q={success:s.handleResponse,failure:s.handleFailure,scope:s,argument:{options:n},timeout:n.timeout||s.timeout},m,t;if(Rs.isFunction(l)){l=l.call(n.scope||g,n)}l=Rs.urlEncode(u,Rs.isObject(l)?Rs.urlEncode(l):l);if(Rs.isFunction(k)){k=k.call(n.scope||g,n)}if((m=Rs.getDom(n.form))){k=k||m.action;if(n.isUpload||/multipart\/form-data/i.test(m.getAttribute("enctype"))){return s.doFormUpload.call(s,n,l,k)}t=Rs.lib.Ajax.serializeForm(m);l=l?(l+"&"+t):t}j=n.method||s.method||((l||n.xmlData||n.jsonData)?i:a);if(j===a&&(s.disableCaching&&n.disableCaching!==false)||n.disableCaching===true){var r=n.disableCachingParam||s.disableCachingParam;k=Rs.urlAppend(k,r+"="+(new Date().getTime()))}n.headers=Rs.apply(n.headers||{},s.defaultHeaders||{});if(n.autoAbort===true||s.autoAbort){s.abort()}if((j==a||n.xmlData||n.jsonData)&&l){k=Rs.urlAppend(k,l);l=""}return(s.transId=Rs.lib.Ajax.request(j,k,q,l,n))}else{return n.callback?n.callback.apply(n.scope,[n,h,h]):null}},isLoading:function(j){return j?Rs.lib.Ajax.isCallInProgress(j):!!this.transId},abort:function(j){if(j||this.isLoading()){Rs.lib.Ajax.abort(j||this.transId)}},handleResponse:function(j){this.transId=false;var k=j.argument.options;j.argument=k?k.argument:null;this.fireEvent(e,this,j,k);if(k.success){k.success.call(k.scope,j,k)}if(k.callback){k.callback.call(k.scope,k,true,j)}},handleFailure:function(j,l){this.transId=false;var k=j.argument.options;j.argument=k?k.argument:null;this.fireEvent(d,this,j,k,l);if(k.failure){k.failure.call(k.scope,j,k)}if(k.callback){k.callback.call(k.scope,k,false,j)}},doFormUpload:function(q,j,k){var l=Rs.id(),v=document,r=v.createElement("iframe"),m=Rs.getDom(q.form),u=[],t,p="multipart/form-data",n={target:m.target,method:m.method,encoding:m.encoding,enctype:m.enctype,action:m.action};Rs.fly(r).set({id:l,name:l,cls:"x-hidden"});v.body.appendChild(r);Rs.fly(r).set({src:Rs.SSL_SECURE_URL});if(Rs.isIE){document.frames[l].name=l}Rs.fly(m).set({target:l,method:i,enctype:p,encoding:p,action:k||n.action});Rs.iterate(Rs.urlDecode(j,false),function(w,o){t=v.createElement("input");Rs.fly(t).set({type:"hidden",value:o,name:w});m.appendChild(t);u.push(t)});function s(){var x=this,w={responseText:"",responseXML:null,argument:q.argument},A,z;try{A=r.contentWindow.document||r.contentDocument||g.frames[l].document;if(A){if(A.body){if(/textarea/i.test((z=A.body.firstChild||{}).tagName)){w.responseText=z.value}else{w.responseText=A.body.innerHTML}}w.responseXML=A.XMLDocument||A}}catch(y){}Rs.EventManager.removeListener(r,c,s,x);x.fireEvent(e,x,w,q);function o(D,C,B){if(Rs.isFunction(D)){D.apply(C,B)}}o(q.success,q.scope,[w,q]);o(q.callback,q.scope,[q,true,w]);if(!x.debugUploads){setTimeout(function(){Rs.removeNode(r)},100)}}Rs.EventManager.on(r,c,s,this);m.submit();Rs.fly(m).set(n);Rs.each(u,function(o){Rs.removeNode(o)})}})})();Rs.Ajax=new Rs.data.Connection({autoAbort:false,serializeForm:function(a){return Rs.lib.Ajax.serializeForm(a)}});(function(){var e="Rs-method",m="Rs-dataType",g="Rs-accept",q="beforecall",j="requestcomplete",h="beforecallcomplate",l="callcomplete",d="callexception",w=undefined,o="load",b="POST",u="GET",s=window,c=document,p=/^[\],:{}\s]*$/,t=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,r=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,k=/(?:^|:|,)(?:\s*\[)+/g,n=/\S/;var a={json:"json",xml:"xml"};var i={xml:/xml/,html:/html/,text:/plain/,json:/[json,javascript]/,script:/javascript/,"*":/\*/};var v={"* text":s.String,"text html":true,"text json":function(x){if(typeof x!=="string"||!x){return null}x=Rs.trim(x);x=x==""?"{}":x;try{return Rs.decode(x)}catch(y){if(p.test(x.replace(t,"@").replace(r,"]").replace(k,""))){return s.JSON&&s.JSON.parse?s.JSON.parse(x):(new Function("return "+x))()}else{Rs.error("Invalid JSON: "+x)}}},"text xml":function(z,x,y){if(s.DOMParser){y=new DOMParser();x=y.parseFromString(z,"text/xml")}else{x=new ActiveXObject("Microsoft.XMLDOM");x.async="false";x.loadXML(z)}y=x.documentElement;if(!y||!y.nodeName||y.nodeName==="parsererror"){Rs.error("Invalid XML: "+z)}return x},"text script":function(x){(function(A){if(A&&n.test(A)){var z=c.getElementsByTagName("head")[0]||c.documentElement,y=c.createElement("script");y.type="text/javascript";if(Rs.isSupportScriptEval){y.appendChild(c.createTextNode(A))}else{y.text=A}z.insertBefore(y,z.firstChild);z.removeChild(y)}})(x);return x}};Rs.data.Service=function(x){Rs.apply(this,x);this.addEvents(q,h,l,d);Rs.data.Service.superclass.constructor.call(this)};Rs.extend(Rs.data.Service,Rs.util.Observable,{timeout:30000,autoAbort:false,dataType:"json",accept:"json",taskQueue:[],call:function(A,G,I){var E=this;if(E.isLoading(E.transId)==true){E.taskQueue.push({options:A,callback:G,scope:I});return null}if(Rs.isFunction(G)){A.callback=G}if(Rs.isDefined(I)){A.scope=I}if(E.fireEvent(q,E,A)){var J=A.extraParams||E.extraParams||{},C=A.method||E.method||"",B=A.dataType||E.dataType,H=A.accept||E.accept,z=A.params,x=A.url||E.url,D={success:E.handleResponse,failure:E.handleResponse,scope:E,argument:{options:A},timeout:A.timeout||E.timeout},y,F;if(Rs.isFunction(z)){z=z.call(A.scope||s,A)}z=Rs.urlEncode(J,Rs.isObject(z)?Rs.urlEncode(z):z);if(Rs.isFunction(x)){x=x.call(A.scope||s,A)}A.dataType=a[B]!=undefined?B:"json";A.accept=i[H]!=undefined?H:"*";if((y=Rs.getDom(A.form))){x=x||y.action;if(A.isUpload||(/multipart\/form-data/i.test(y.getAttribute("enctype")))){return E.doFormUpload.call(E,A,z,x)}F=Rs.lib.Ajax.serializeForm(y);z=z?(z+"&"+F):F}A.headers=A.headers||{};A.headers[e]=C;A.headers[m]=A.dataType;A.headers[g]=A.accept;if(A.autoAbort===true||E.autoAbort){E.abort()}return(E.transId=Rs.lib.Ajax.request("POST",x,D,z,A))}else{return A.callback?A.callback.apply(A.scope,[A,w,w]):null}},isLoading:function(x){return x?Rs.lib.Ajax.isCallInProgress(x):!!this.transId},abort:function(x){if(x||this.isLoading()){Rs.lib.Ajax.abort(x||this.transId)}},ajaxConvert:function(B,H){var E=B.getResponseHeader("Content-type"),D=B.responseText||B.responseXML,z,F,A;z="text";F=H&&i[H.accept]?H.accept:"*";if(F=="*"){F=z}else{if(z!=="*"&&z!==F){var G=v[z+" "+F]||v["* "+F],y,x,C;if(!G){x=undefined;for(y in v){C=y.split(" ");if(C[0]===z||C[0]==="*"){x=v[C[1]+" "+F];if(x){y=v[y];if(y===true){G=x}else{if(x===true){G=y}}break}}}}if(!(G||x)){Rs.error("No conversion from "+z+" to "+F)}if(G!==true){D=G?G(D):x(y(D))}}}return D},handleResponse:function(z){this.transId=false;var B=z.argument.options;z.argument=B?B.argument:null;if(this.fireEvent(h,this,z,B)!==false){var D=this.ajaxConvert(z,B),y=D.Success==true?true:false,x=D.Result||{},A=D.Error_Code||"",C=D.Error_Message||"";if(B.success&&y===true){this.fireEvent(l,this,x,D,B,z);B.success.call(B.scope,x,D,B,z)}if(B.failure&&y===false){this.fireEvent(d,this,A,C,D,B,z);B.failure.call(B.scope,A,C,D,B,z)}if(B.callback){B.callback.call(B.scope,y,x,A,C,D,B,z)}}this.nextTask()},nextTask:function(){if(this.taskQueue.length>0){var x=this.taskQueue.shift();this.call(x.options,x.callback,x.scope)}},doFormUpload:function(D,x,y){var z=Rs.id(),J=document,E=J.createElement("iframe"),A=Rs.getDom(D.form),I=[],H,C="multipart/form-data",B={target:A.target,method:A.method,encoding:A.encoding,enctype:A.enctype,action:A.action},G=y||B.action;Rs.fly(E).set({id:z,name:z,cls:"x-hidden",src:Rs.SSL_SECURE_URL});J.body.appendChild(E);if(Rs.isIE){document.frames[z].name=z}G+=("?"+e+"="+D.method+"&"+m+"="+D.dataType+"&"+g+"="+D.accept);Rs.fly(A).set({target:z,method:b,enctype:C,encoding:C,action:G});Rs.iterate(Rs.urlDecode(x,false),function(L,K){H=J.createElement("input");Rs.fly(H).set({type:"hidden",value:K,name:L});A.appendChild(H);I.push(H)});function F(){var M=this,L={responseText:"",responseXML:null,argument:D.argument},P,O;try{P=E.contentWindow.document||E.contentDocument||s.frames[z].document;if(P){if(P.body){if(/textarea/i.test((O=P.body.firstChild||{}).tagName)){L.responseText=O.value}else{L.responseText=P.body.innerHTML}}L.responseXML=P.XMLDocument||P}}catch(N){}Rs.EventManager.removeListener(E,o,F,M);M.fireEvent(j,M,L,D);function K(T,S,Q){if(Rs.isFunction(T)){T.apply(S,Q)}}K(D.success,D.scope,[L,D]);K(D.callback,D.scope,[D,true,L]);if(!M.debugUploads){setTimeout(function(){Rs.removeNode(E)},100)}}Rs.EventManager.on(E,o,F,this);A.submit();Rs.fly(A).set(B);Rs.each(I,function(K){Rs.removeNode(K)})}})})();Rs.Service=new Rs.data.Service({autoAbort:false});Rs.util.JSON=new (function(){var useHasOwn=!!{}.hasOwnProperty,isNative=function(){var useNative=null;return function(){if(useNative===null){useNative=Rs.USE_NATIVE_JSON&&window.JSON&&JSON.toString()=="[object JSON]"}return useNative}}(),pad=function(n){return n<10?"0"+n:n},doDecode=function(json){return eval("("+decodeURIComponent(decodeURIComponent(json))+")")},doEncode=function(o){if(!Rs.isDefined(o)||o===null){return"null"}else{if(Rs.isArray(o)){return encodeArray(o)}else{if(Rs.isDate(o)){return Rs.util.JSON.encodeDate(o)}else{if(Rs.isString(o)){return encodeString(o)}else{if(typeof o=="number"){return isFinite(o)?String(o):"null"}else{if(Rs.isBoolean(o)){return String(o)}else{var a=["{"],b,i,v;for(i in o){if(!o.getElementsByTagName){if(!useHasOwn||o.hasOwnProperty(i)){v=o[i];switch(typeof v){case"undefined":case"function":case"unknown":break;default:if(b){a.push(",")}a.push(doEncode(i),":",v===null?"null":doEncode(v));b=true}}}}a.push("}");return a.join("")}}}}}}},m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},encodeString=function(s){if(/["\\\x00-\x1f]/.test(s)){s=s.replace(/([\x00-\x1f\\"])/g,function(a,b){var c=m[b];if(c){return c}c=b.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})}return'"'+encodeURIComponent(encodeURIComponent(s))+'"'},encodeArray=function(o){var a=["["],b,i,l=o.length,v;for(i=0;i<l;i+=1){v=o[i];switch(typeof v){case"undefined":case"function":case"unknown":break;default:if(b){a.push(",")}a.push(v===null?"null":Rs.util.JSON.encode(v));b=true}}a.push("]");return a.join("")};this.encodeDate=function(o){return'"'+o.getFullYear()+"-"+pad(o.getMonth()+1)+"-"+pad(o.getDate())+"T"+pad(o.getHours())+":"+pad(o.getMinutes())+":"+pad(o.getSeconds())+'"'};this.encode=function(){var ec;return function(o){if(!ec){ec=isNative()?JSON.stringify:doEncode}return ec(o)}}();this.decode=function(){var dc;return function(json){if(!dc){dc=isNative()?JSON.parse:doDecode}return dc(json)}}()})();Rs.encode=Rs.util.JSON.encode;Rs.decode=Rs.util.JSON.decode;(function(){Rs.Clipboard=(function(){function a(c){c=""+c;if(window.clipboardData){window.clipboardData.clearData();window.clipboardData.setData("Text",c);return true}else{if(navigator.userAgent.indexOf("Opera")!=-1){window.location=c;return true}else{if(window.netscape){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(i){alert("被浏览器拒绝!\n请在浏览器地址栏输入'about:config'并回车\n然后将 'signed.applets.codebase_principal_support'设置为'true'")}var g=Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);if(!g){return false}var d=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(!d){return false}d.addDataFlavor("text/unicode");var j=new Object(),b=new Object(),j=Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString),k=c;j.data=k;d.setTransferData("text/unicode",j,k.length*2);var h=Components.interfaces.nsIClipboard;if(!g){return false}g.setData(d,null,h.kGlobalClipboard);return true}}}}return{setData:a}})()})();Rs.util.MixedCollection=function(b,a){this.items=[];this.map={};this.keys=[];this.length=0;this.addEvents("clear","add","replace","remove","sort");this.allowFunctions=b===true;if(a){this.getKey=a}Rs.util.MixedCollection.superclass.constructor.call(this)};Rs.extend(Rs.util.MixedCollection,Rs.util.Observable,{allowFunctions:false,add:function(b,c){if(arguments.length==1){c=arguments[0];b=this.getKey(c)}if(typeof b!="undefined"&&b!==null){var a=this.map[b];if(typeof a!="undefined"){return this.replace(b,c)}this.map[b]=c}this.length++;this.items.push(c);this.keys.push(b);this.fireEvent("add",this.length-1,c,b);return c},getKey:function(a){return a.id},replace:function(c,d){if(arguments.length==1){d=arguments[0];c=this.getKey(d)}var a=this.map[c];if(typeof c=="undefined"||c===null||typeof a=="undefined"){return this.add(c,d)}var b=this.indexOfKey(c);this.items[b]=d;this.map[c]=d;this.fireEvent("replace",c,a,d);return d},addAll:function(e){if(arguments.length>1||Rs.isArray(e)){var b=arguments.length>1?arguments:e;for(var d=0,a=b.length;d<a;d++){this.add(b[d])}}else{for(var c in e){if(this.allowFunctions||typeof e[c]!="function"){this.add(c,e[c])}}}},each:function(e,d){var b=[].concat(this.items);for(var c=0,a=b.length;c<a;c++){if(e.call(d||b[c],b[c],c,a)===false){break}}},eachKey:function(d,c){for(var b=0,a=this.keys.length;b<a;b++){d.call(c||window,this.keys[b],this.items[b],b,a)}},find:function(d,c){for(var b=0,a=this.items.length;b<a;b++){if(d.call(c||window,this.items[b],this.keys[b])){return this.items[b]}}return null},insert:function(a,b,c){if(arguments.length==2){c=arguments[1];b=this.getKey(c)}if(this.containsKey(b)){this.suspendEvents();this.removeKey(b);this.resumeEvents()}if(a>=this.length){return this.add(b,c)}this.length++;this.items.splice(a,0,c);if(typeof b!="undefined"&&b!==null){this.map[b]=c}this.keys.splice(a,0,b);this.fireEvent("add",a,c,b);return c},remove:function(a){return this.removeAt(this.indexOf(a))},removeAt:function(a){if(a<this.length&&a>=0){this.length--;var c=this.items[a];this.items.splice(a,1);var b=this.keys[a];if(typeof b!="undefined"){delete this.map[b]}this.keys.splice(a,1);this.fireEvent("remove",c,b);return c}return false},removeKey:function(a){return this.removeAt(this.indexOfKey(a))},getCount:function(){return this.length},indexOf:function(a){return this.items.indexOf(a)},indexOfKey:function(a){return this.keys.indexOf(a)},item:function(b){var a=this.map[b],c=a!==undefined?a:(typeof b=="number")?this.items[b]:undefined;return typeof c!="function"||this.allowFunctions?c:null},itemAt:function(a){return this.items[a]},key:function(a){return this.map[a]},contains:function(a){return this.indexOf(a)!=-1},containsKey:function(a){return typeof this.map[a]!="undefined"},clear:function(){this.length=0;this.items=[];this.keys=[];this.map={};this.fireEvent("clear")},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},_sort:function(k,a,j){var d,e,b=String(a).toUpperCase()=="DESC"?-1:1,h=[],l=this.keys,g=this.items;j=j||function(i,c){return i-c};for(d=0,e=g.length;d<e;d++){h[h.length]={key:l[d],value:g[d],index:d}}h.sort(function(i,c){var m=j(i[k],c[k])*b;if(m===0){m=(i.index<c.index?-1:1)}return m});for(d=0,e=h.length;d<e;d++){g[d]=h[d].value;l[d]=h[d].key}this.fireEvent("sort",this)},sort:function(a,b){this._sort("value",a,b)},reorder:function(d){this.suspendEvents();var b=this.items,c=0,g=b.length,a=[],e=[],h;for(h in d){a[d[h]]=b[h]}for(c=0;c<g;c++){if(d[c]==undefined){e.push(b[c])}}for(c=0;c<g;c++){if(a[c]==undefined){a[c]=e.shift()}}this.clear();this.addAll(a);this.resumeEvents();this.fireEvent("sort",this)},keySort:function(a,b){this._sort("key",a,b||function(d,c){var g=String(d).toUpperCase(),e=String(c).toUpperCase();return g>e?1:(g<e?-1:0)})},getRange:function(e,a){var b=this.items;if(b.length<1){return[]}e=e||0;a=Math.min(typeof a=="undefined"?this.length-1:a,this.length-1);var c,d=[];if(e<=a){for(c=e;c<=a;c++){d[d.length]=b[c]}}else{for(c=e;c>=a;c--){d[d.length]=b[c]}}return d},filter:function(c,b,d,a){if(Rs.isEmpty(b,false)){return this.clone()}b=this.createValueMatcher(b,d,a);return this.filterBy(function(e){return e&&b.test(e[c])})},filterBy:function(g,e){var h=new Rs.util.MixedCollection();h.getKey=this.getKey;var b=this.keys,d=this.items;for(var c=0,a=d.length;c<a;c++){if(g.call(e||this,d[c],b[c])){h.add(b[c],d[c])}}return h},findIndex:function(c,b,e,d,a){if(Rs.isEmpty(b,false)){return -1}b=this.createValueMatcher(b,d,a);return this.findIndexBy(function(g){return g&&b.test(g[c])},null,e)},findIndexBy:function(g,e,h){var b=this.keys,d=this.items;for(var c=(h||0),a=d.length;c<a;c++){if(g.call(e||this,d[c],b[c])){return c}}return -1},createValueMatcher:function(c,e,a,b){if(!c.exec){var d=Rs.escapeRe;c=String(c);if(e===true){c=d(c)}else{c="^"+d(c);if(b===true){c+="$"}}c=new RegExp(c,a?"":"i")}return c},clone:function(){var e=new Rs.util.MixedCollection();var b=this.keys,d=this.items;for(var c=0,a=d.length;c<a;c++){e.add(b[c],d[c])}e.getKey=this.getKey;return e}});Rs.util.MixedCollection.prototype.get=Rs.util.MixedCollection.prototype.item;Rs.apply(Rs,{Themes:(function(){return{blue:["resources/css/xtheme-blue.css"],gray:["resources/css/xtheme-gray.css"],access:["resources/css/xtheme-access.css"],black:["resources/css/xtheme-black.css"],blue03:["resources/css/xtheme-blue03.css"],brown:["resources/css/xtheme-brown.css"],brown02:["resources/css/xtheme-brown02.css"],green:["resources/css/xtheme-green.css"],pink:["resources/css/xtheme-pink.css"],purple:["resources/css/xtheme-purple.css"],red03:["resources/css/xtheme-red03.css"]}})(),Libraries:(function(){return{"ext-3.3.1":{js:["lib/ext-3.3.1/adapter/ext/ext-base.js","lib/ext-3.3.1/ext-all.js","lib/ext-3.3.1/override.js","ext/rs-ext-mini.js","lib/ext-3.3.1/src/locale/ext-lang-zh_CN.js"],css:["lib/ext-3.3.1/resources/css/ext-all-notheme.css","ext/resources/css/rs-ext-mini.css"],getTheme:function(a){return"lib/ext-3.3.1/resources/css/xtheme-"+a+".css"}},"ext-3.3.1-debug":{js:["lib/ext-3.3.1/adapter/ext/ext-base-debug.js","lib/ext-3.3.1/ext-all-debug.js","lib/ext-3.3.1/override.js","ext/rs-ext-debug.js","lib/ext-3.3.1/src/locale/ext-lang-zh_CN.js"],css:["lib/ext-3.3.1/resources/css/ext-all-notheme.css","ext/resources/css/rs-ext-all.css"],getTheme:function(a){return"lib/ext-3.3.1/resources/css/xtheme-"+a+".css"}},"jquery-1.5":{js:["lib/jquery/jquery-1.5.min.js"],getTheme:function(){return}},"jquery-1.5-debug":{js:["lib/jquery/jquery-1.5.js"],getTheme:function(){return}}}})()});Rs.ns("Rs.app");(function(){Rs.app.Application=function(a,b){a=a||{};Rs.apply(this,a);this.engine=b;Rs.app.Application.superclass.constructor.call(this);this.addEvents("loadresfile","beforeinstall","install","installfailed","beforeopen","open","beforeclose","close");var c=this.region;if(Rs.isObject(c)){this.regionId=c.rid;this.regionCfg=Rs.apply(this.regionCfg||{},c);delete this.region}else{if(Rs.isString(c)){this.regionId=c;delete this.region}}};Rs.extend(Rs.app.Application,Rs.util.Observable,{autoRun:false,running:false,resFileLoaded:false,installed:false,resFileName:"R.js",loadResFile:function(d,a){if(this.resFileLoaded!==true){var b=this.getRealFolder(),c=b+"/"+this.resFileName;Rs.lr(c,function(){if(R){this.resFileLoaded=true;this.resFileConfig=R;Rs.applyIf(this,R);this.fireEvent("loadresfile",this,R);R=null}else{Rs.error(c+" file error!")}if(Rs.isFunction(d)){d.call(a||this,this)}},this,this.engine.environment.clearCache?true:false)}else{if(Rs.isFunction(d)){d.call(a||this,this)}}},getId:function(){return this.id},getFolder:function(){return this.folder},getRealFolder:function(){var a=this.folder;if(a.length>9&&a.substr(0,9)=="BUILDINS/"){a=Rs.BASE_PATH+"/build-in_apps/"+a.substr(9)}return a},getName:function(){return this.name},getIcon8:function(){return this.icon8||"rs-app-default-icon8"},getIcon16:function(){return this.icon16||"rs-app-default-icon16"},getIcon32:function(){return this.icon23||"rs-app-default-icon23"},getRegionId:function(){return this.regionId},getRegionCfg:function(){return Rs.apply({},this.regionCfg)},getRegion:function(){return this.region},loadRes:function(d,b){var c=this.js||[],a=this.css||[];this.loadResList([].concat(a,c),d,b)},loadResList:function(d,g,b){var a=d.shift();if(a){var c=this.getRealFolder(),e=c+"/"+a;Rs.lr(e,this.goOnLoadResFile.createDelegate(this,[this.loadResList,d,g,b],false),this,this.engine.environment.clearCache?true:false)}else{this.fireEvent("loadresfile",this,this.js,this.css);g.call(b||this,this)}},goOnLoadResFile:function(a,c,d,b){a.call(this,c,d,b)},onBeforeInstall:Rs.emptyFn,onInstall:function(k,j,g,l,m){if(!this.installed&&this.fireEvent("beforeinstall",k,this,j,g)&&this.onBeforeInstall(k,this,j,g)!==false){var a=Rs.app.AppMgr.getAppsByFolder(this.folder)||[],h=a.length,e=function(p,n,o,q,i){Rs.app.AppMgr.add(p);p.doInstall(n,o,q,i)};if(h>0){Rs.applyIf(this,a[0].resFileConfig);var b=this.getId(),d,c;for(d=0;d<h;d++){c=a[d];if(c&&c.getId()==b){if(Rs.isFunction(l)){l.call(m||this,true,c)}return}}if(d==h){e(this,k,j,l,m)}}else{this.loadResFile(function(){this.loadRes(function(){e(this,k,j,l,m)},this)},this)}}},doInstall:function(d,h,i,c){var b=function(e,j){if(Rs.isFunction(i)){i.call(c||this,e,e?j:undefined)}},a=true;try{this.engine=d;this.region=h;this.relayEvents(h,["resize","move"]);if(this.autoRun===true){this.run()}this.installed=true;this.fireEvent("install",d,this,h);h.applyApp(this)}catch(g){a=false;Rs.error("安装应用程序失败");this.fireEvent("installfailed",d,this,h)}b(a,this)},getObjCfg:function(){var a=this.objCfg;if(Rs.isString(a)){a={clazz:a}}return Rs.apply({cfg:{},main:"main"},a)},getObj:function(){var d=this.obj;if(!d){var c=this.getObjCfg(),a=c.cfg,b=c.clazz;d=this.obj=Rs.create(b,a)}return d},onBeforeRun:Rs.emptyFn,run:function(){var a=this.engine;if(this.running!=true&&this.getObj()&&this.fireEvent("beforerun",a,this)&&this.onBeforeRun(a,this)!==false){try{region=this.region;this.obj[this.getObjCfg().main](a,region,this);this.running=true;this.fireEvent("run",a,this);return true}catch(b){Rs.error("运行应用程序发生异常");return false}}return false},onBeforeShut:Rs.emptyFn,shut:function(){var b=this.engine;if(this.running==true&&this.getObj()&&this.fireEvent("beforeshut",b,this)&&this.onBeforeShut(b,this)!==false){try{var a=this.getObjCfg().release;if(a&&Rs.isString(a)&&Rs.isFunction(this.obj[a])){this.obj[a](b,region,this)}this.running=false;this.fireEvent("shut",b,this);return true}catch(c){Rs.error("关闭应用程序发生异常");return false}}else{return false}},onBeforeOpen:Rs.emptyFn,open:function(a){var b=this.region;if(b&&this.fireEvent("beforeopen",this)!==false&&this.onBeforeOpen(this,b)!==false){if(this.running!==true){this.run()}if(a!==true){b.open();this.fireEvent("open",this)}else{this.fireEvent("behindopen",this)}this.openFlag=true;this.afterOpen()}},afterOpen:Rs.emptyFn,onBeforeClose:Rs.emptyFn,close:function(){var a=this.region;if(a&&this.fireEvent("beforeclose",this)&&this.onBeforeClose()!==false){if(this.running==true){this.shut()}a.close();this.openFlag=false;this.fireEvent("close",this);this.afterClose()}},afterClose:Rs.emptyFn,isOpen:function(){return this.openFlag===true},getState:function(){var a={},b=this.getRegion();if(b){Rs.apply(a,{region:b.getState()})}return a},applyState:function(a){var b=this.getRegion(),c=a&&a.region?a.region:undefined;if(b&&Rs.isFunction(b.applyState)&&c){this.on("open",function(){b.applyState(c)},this,{scope:this,single:true})}}});Rs.app.AppMgr=function(){var b=function(c){return c.getId()};var a=new Rs.util.MixedCollection(false,b);return{add:function(c){a.add(c)},get:function(c){return a.get(c)},remove:function(c){a.remove(c)},getAppsByFolder:function(c){var d=[];a.each(function(e){if(e.getFolder()===c){d.push(e)}},this);return d},all:a}}()})();Rs.ns("Rs.app");(function(){Rs.app.EventBus=function(a){a=a||{};Rs.apply(this,a);Rs.app.EventBus.superclass.constructor.call(this);this.bus=new Rs.util.MixedCollection()};Rs.extend(Rs.app.EventBus,Rs.util.Observable,{separator:"-",register:function(c,b,a){b=(Rs.isString(b)?b:"")+this.separator;this.relayBusEvents(c,b,a);this.bus.add(b,c)},relayBusEvents:function(a,e,k){var h=this;function j(i){return function(){return h.fireEvent.apply(h,[i].concat(Array.prototype.slice.call(arguments,0)))}}for(var c=0,g=k.length;c<g;c++){var b=k[c],d=e+b;h.events[d]=h.events[d]||true;a.on(b,j(d),h)}},unregister:function(a){this.bus.remove(a)}});Rs.EventBus=new Rs.app.EventBus({})})();Rs.ns("Rs.app");(function(a){a.app.Engine=function(b){b=b||{};this.initialConfig=b;a.apply(this,b);a.app.Engine.superclass.constructor.call(this);this.addEvents("beforeinitialized","initialize","importlibraries","beforelaunch","launch","beforeinstall","install","beforestatesave","statesave","themechange")};a.extend(a.app.Engine,a.util.Observable,{initialized:false,launched:false,autoLaunch:true,theme:"blue",libraries:[],stateful:false,environment:"production",setShell:function(b){if(this.shell&&this.shell!=b){this.shell.setEngine(null)}this.shell=b;b.setEngine(this);this.relayEventsByPrefix(b,"shell",["build","resize"])},getShell:function(){var b=this.shell;if(!b){b={type:"window"}}else{if(!b.type){a.error("Shell类型未定义")}}if(!(b instanceof a.app.Shell)){b=this.shell=new a.app.SHELL[b.type.toLowerCase()](b)}return b},getXY:function(){return[0,0]},getSize:function(){var d=a.lib.Dom,b=d.getViewWidth(false),c=d.getViewHeight(false);return{width:b,height:c}},getStateId:function(){return this.stateId},main:function(){if(this.onBeforeMain(this)===false){return this}var b=this.shell;if(a.isString(b)){this.shell={type:b}}this.initEnvironment(function(){if(this.stateful!==false){this.initState(this.initEngine,this)}else{this.initEngine()}},this);return this},onBeforeMain:a.emptyFn,initEnvironment:function(i,h){var d=a.app.Environment,g=this.environment,b,e,c;if(a.isObject(g)){e=g.type;c=a.isObject(g.config)?g.config:{}}else{if(a.isString(g)){e=g}}if(d.hasOwnProperty(e)){this.environment=new d[e](a.apply(c||{},{engine:this}),i,h)}else{a.error("尚未定义的程序运行环境:"+e)}},initState:function(g,b){var e=this.getStateId(),d=a.app.StateManager,c=function(){if(a.isFunction(g)){g.call(b||this)}};if(d&&e){d.load(e,function(h){this.stateData=h;this.applySetting();c()},this)}else{c()}},initStateEvents:function(){if(this.stateEvents){for(var b=0,c;c=this.stateEvents[b];b++){this.on(c,this.saveState,this,{scope:this,delay:100,buffer:200})}}},getState:function(){var c=this.apps,d={},b;c.each(function(e){if(e&&e.installed===true){d[e.getId()]=e.getState()}},this);b=a.apply({},{theme:this.theme});return{apps:d,settings:b}},saveState:function(){var c=a.app.StateManager;if(c&&this.stateful!==false){var d=this.getStateId();if(d){var b=this.getState();if(this.fireEvent("beforestatesave",this,b)!==false){c.sync(d,b);this.fireEvent("statesave",this,b)}}}},applySetting:function(){var b=this.stateData,c=b?b.settings:undefined;if(c){if(this.theme!=c.theme){this.theme=c.theme}}},getContainer:function(){var b=this.container;if(!b){b=this.container=a.getBody()}return b},initEngine:function(){if(!this.initialized&&this.fireEvent("beforeinitialized",this)!==false&&this.onBeforeInitialize(this)!==false){this.container=this.getContainer();this.el=this.container.createChild({tag:"div",cls:"rs-engine"});this.initialized=true;if(this.stateful!==false){this.initStateEvents()}this.buildShell();this.fireEvent("initialize",this)}},onBeforeInitialize:a.emptyFn,buildShell:function(){this.setShell(this.getShell());if(this.shell){this.shell.build(this.el,this.onRebuildShell,this)}},onRebuildShell:function(){this.importLibraries(function(){this.applyTheme(this.theme,function(){if(this.autoLaunch===true){this.launch()}},this)},this)},applyTheme:function(h,j,d){var i=a.Themes,g,e;if(i&&a.isArray(i[h])){var c=this.theme,b=(function(){this.fireEvent("themechange",this,h,c);if(a.isFunction(j)){j.apply(this,arguments)}}).createDelegate(this);g=this.getThemeCssUrls(this.theme);a.each(g,function(k){a.removeResource(k)},this);e=this.getThemeCssUrls(h);this.importFileList(e,b,d);this.theme=h}else{if(a.isFunction(j)){j.call(d||this)}}},getThemeCssUrls:function(b){var l=a.Themes,g=[];if(l&&a.isArray(l[b])){var e=this.libraries,k=a.Libraries,h,g=[].concat(l[b]),j=a.BASE_PATH;a.each(e,function(i){h=k[i];if(h){g=g.concat(h.getTheme(b)||[])}},this);for(var c=0,d=g.length;c<d;c++){g[c]=j+"/"+g[c]}}return g},importLibraries:function(k,l){var d=this.libraries,j=a.Libraries,g,e=[],h=a.BASE_PATH;a.each(d,function(i){g=j[i];if(g){e=e.concat(g.css||[],g.js||[])}},this);for(var b=0,c=e.length;b<c;b++){e[b]=h+"/"+e[b]}this.importFileList(e,k,l)},importFileList:function(d,e,c){var b=d.shift();if(b){a.lr(b,this.goOnImportFile.createDelegate(this,[this.importFileList,d,e,c],false),this)}else{this.fireEvent("importlibraries",this,this.libraries);Ext.BLANK_IMAGE_URL=a.BASE_PATH+"/lib/ext-3.3.1/resources/images/default/s.gif";e.call(c||this,this)}},goOnImportFile:function(b,d,e,c){b.call(this,d,e,c)},launch:function(){if(!this.launched&&this.fireEvent("beforelaunch",this)!==false&&this.onBeforeLaunch()!==false){this.launched=true;this.onLaunch();this.fireEvent("launch",this);this.onAfterLaunch()}return this},onBeforeLaunch:a.emptyFn,onLaunch:function(){var b=this.apps;if(b){delete this.apps;this.install(b)}},onAfterLaunch:a.emptyFn,getAppId:function(b){return b.getId()},initApps:function(){if(!this.apps){this.apps=new a.util.MixedCollection(false,this.getAppId)}},install:function(b,i,j){this.initApps();if(a.isArray(b)){var k=[];a.each(b,function(l){k.push(this.install(l,i,j))},this);return k}var h=this.createApp(this.applyDefaults(b)),d=this.apps.length,e=function(l,m){if(a.isFunction(i)){i.call(j||this,l,m)}};if(this.fireEvent("beforeinstall",this,h,d)!==false&&this.onBeforeInstall(h)!==false){var c=this.shell,g=c.getRegion(h.getRegionId());h.onInstall(this,g,d,function(l,m){if(l===true){this.onInstall(m,g)}else{m=undefined;delete m}e(l,m)},this)}return h},onBeforeInstall:a.emptyFn,onInstall:function(c,b){if(!this.apps.contains(c)){this.fireEvent("install",this,c);this.relayEventsByPrefix(c,"app",["resize","move"]);this.applyAppState(c);this.apps.add(c);this.shell.reBuild(c.getRegion(),c)}},applyAppState:function(c){var b=this.stateData,e=b?b.apps:undefined;if(e){var d=c.getId();c.applyState(e[d]||{})}},createApp:function(b){return new a.app.Application(b,this)},applyDefaults:function(g){var e=this.defaults;if(e){if(a.isFunction(e)){e=e.call(this,g)}else{var b={};for(var c in e){b[c]=a.apply({},e[c])}a.apply(g,b)}}return g},getAppById:function(b){return a.app.AppMgr.get(b)},relayEventsByPrefix:function(b,g,l){var j=this;function k(i){return function(){return j.fireEvent.apply(j,[i].concat(Array.prototype.slice.call(arguments,0)))}}for(var d=0,h=l.length;d<h;d++){var c=l[d],e=g+c;j.events[e]=j.events[e]||true;b.on(c,k(e),j)}}})})(Rs);Rs.engine=function(a,c,b){Rs.onReady(function(){Rs.appEngine=new Rs.app.Engine(a).main();if(Rs.appEngine&&Rs.isFunction(c)){c.call(b||this,Rs.appEngine)}},this)};Rs.getAppEngine=function(){return Rs.appEngine};(function(){var c=function(d,g,e){Rs.apply(this,d);this.init(g,e)};var b=[];c.prototype={type:"development",monitor:true,clearCache:true,interval:1000,init:function(e,d){if(this.monitor===true){this.doMonitor()}if(Rs.isFunction(e)){e.call(d||this)}},doMonitor:function(){var g=this.engine,e,i=(function(){if(b.length>20){b=b.slice(-20)}e&&e.update(b)}).createDelegate(this),d={folder:"BUILDINS/monitor",id:"build-in_app_monitor",autoRun:true,region:{x:500,y:50,width:500,height:400,minimizable:false,maximizable:false,closable:false}};if(g.launched===true){g.install(d,function(k,j){e=j.getObj();setInterval(i,this.interval)},this)}else{g.apps.push(d);var h=function(k,j){var l=j.getId();if(l=="build-in_app_monitor"){e=j.getObj();setInterval(i,this.interval);g.un("install",h,this)}};g.on("install",h,this)}Rs.Service.on("beforecall",function(k,l){var n=new Date(),j=l?l.url:"",m=l?l.method:"";Rs.Service.on("callcomplete",function(){var o=new Date();b.push({type:"service",start:n,end:o,name:"调用服务",desc:l?("URL:"+j+" METHOD:"+m):""})},this,{single:true})},this);g.on("install",this.onEngineAppInstall,this)},onEngineAppInstall:function(g,i){var j=i.getId(),h=i.getObj();if(h instanceof Ext.grid.GridPanel){var e=h.getStore();e.on("beforeload",function(){var k=new Date();e.on("load",function(){var l=new Date();b.push({type:"store",start:k,end:l,name:"数据加载",desc:"APP:"+j})},this,{single:true})},this);e.on("beforesave",function(){var k=new Date();e.on("save",function(){var l=new Date();b.push({type:"store",start:k,end:l,name:"数据更新",desc:"APP:"+j})},this,{single:true})},this)}if(h instanceof Ext.Component){h.on("beforerender",function(){var k=new Date();h.on("afterrender",function(){var l=new Date();b.push({type:"component",start:k,end:l,name:"组件渲染",desc:"APP:"+j})},this,{single:true})},this)}if(h instanceof Ext.tree.TreePanel){var d=h.getLoader();if(d&&d instanceof Ext.tree.TreeLoader){d.on("beforeload",function(){var k=new Date();d.on("load",function(o,p){var m=new Date();b.push({type:"treeloader",start:k,end:m,name:"树节加载",desc:"APP:"+j+" NODE:"+(p.text||"")})},this,{single:true})},this)}}if(h instanceof Rs.app.LittleEngine){h.on("beforelaunch",function(){var k=new Date();h.on("launch",function(){var l=new Date();b.push({type:"engine",start:k,end:l,name:"组合程序",desc:"APP:"+j})},this,{single:true})},this);h.on("install",this.onEngineAppInstall,this)}}};var a=function(d,g,e){Rs.apply(this,d);this.init(g,e)};a.prototype={type:"production",init:function(e,d){if(Rs.isFunction(e)){e.call(d||this)}}};Rs.app.Environment=(function(){return{development:c,production:a}})()})();Rs.define("Rs.app.LittleEngine",{extend:Rs.app.Engine,constructor:function(a){a=Rs.apply(a||{},{width:0,height:0});Rs.app.LittleEngine.superclass.constructor.call(this,a)},main:function(a,b){this.engine=a;this.region=b;Rs.app.LittleEngine.superclass.main.call(this);var c=function(e,g,d,i){this.setSize({width:e,height:g});this.setXY([d,i])};b.addResizeListener(c,this,{delay:100,buffer:100});b.addMoveListener(c,this,{delay:100,buffer:100});return this},getContainer:function(){var a=this.container,b=this.region;if(!a&&b){a=this.container=b.getTargetEl()}return a},setXY:function(b){var a=b[0],c=b[1];if(Rs.isNumber(a)){this.x=a}if(Rs.isNumber(c)){this.y=c}this.shell.reBuild()},getXY:function(){var a=this.x,b=this.y;return[a,b]},setSize:function(c){if(c){var a=c.width,b=c.height;if(Rs.isNumber(a)&&a>0){this.width=a}if(Rs.isNumber(b)&&b>0){this.height=b}if(this.shell&&Rs.isFunction(this.shell.reBuild)){this.shell.reBuild()}}},getSize:function(){return{width:this.width,height:this.height}},applyTheme:function(b,c,a){if(Rs.isFunction(c)){c.call(a||this)}}});(function(){Rs.app.StateManager=(function(){var a="/rsc/rsclient/pagestatemanager",c=function(d,e,i,g){var h=d&&d.stateData?d.stateData:"";if(Rs.isFunction(i)){i.call(g||this,Rs.trim(h)==""?{}:Rs.decode(h))}},b=function(d){if(d!=true){alert("提示","操作失败")}};return{load:function(g,e,d){Rs.Service.call({url:a,method:"load",params:{id:g}},c.createDelegate(this,[e,d],3),d)},sync:function(g,e){var d=Rs.encode(e);Rs.Service.call({url:a,method:"sync",params:{id:g,data:d}},b,this)}}})()})();Rs.ns("Rs.app");(function(){Rs.app.Shell=function(a){this.id=Rs.id(null,"rs-shell-");Rs.apply(this,a);Rs.app.Shell.superclass.constructor.call(this);this.addEvents("beforebuild","build","afterbuild","resize")};Rs.extend(Rs.app.Shell,Rs.util.Observable,{builded:false,frameTpl:"<div>Hello World.</div>",regionCls:"rs-app-region",setEngine:function(a){this.engine=a},getEngine:function(){return this.engine},build:function(a,d,c){if(!this.builded&&this.fireEvent("beforebuild",this)!==false){if(!(Rs.isEmpty(this.targetCls))){a.addClass(this.targetCls)}var b=this.engine;this.onBuild(a,b);this.fireEvent("build",this);this.afterBuild();this.builded=true;this.fireEvent("afterbuild",this);Rs.EventManager.onWindowResize(this.onWindowResize,this)}if(Rs.isFunction(d)){d.call(c||this,b,this)}},onWindowResize:function(){var a=this.getSize(),c=a.width,d=a.height;this.setSize(a);this.fireEvent("resize",this,c,d)},onBuild:function(b,c){this.frame=b.createChild({id:"rs-engine-frame",tag:"div"});this.frame.addClass("rs-engine-frame");var a=new Rs.Template(this.frameTpl).compile();a.insertFirst(this.frame,this.getFrameConfig(),true);this.initAllRegionCollection();this.doBuild()},initAllRegionCollection:function(){this.regions=new Rs.util.MixedCollection(false);this.windowRegions=new Rs.util.MixedCollection(false)},doBuild:Rs.emptyFn,afterBuild:Rs.emptyFn,reBuild:function(a,b){this.doReBuild(a,b);this.afterReBuild(a,b)},doReBuild:Rs.emptyFn,afterReBuild:function(a,b){if(a instanceof Rs.app.WindowRegion){if(a&&b&&b.autoRun===true&&b.isOpen()!=true){b.open(!a.isVisible())}}},setSize:function(a,b){if(typeof a=="object"){b=a.height;a=a.width}if(!this.builded){this.width=a;this.height=b;return this}this.lastSize={width:a,height:b};this.frame.setWidth(a);this.frame.setHeight(b);this.fireEvent("resize",this,a,b);this.reBuild()},getXY:function(){var a=this.engine;if(a){return a.getXY()}else{return[0,0]}},getSize:function(){var c=this.engine;if(c){return c.getSize()}else{var d=Rs.lib.Dom,a=d.getViewWidth(false),b=d.getViewHeight(false);return{width:a,height:b}}},getFrameConfig:function(){return{}},getRegion:function(b){var a=this.regions.get(b);if(a){return a}else{a=new Rs.app.WindowRegion(this,{});return this.windowRegions.add(a)}},parseMargins:function(b){if(Rs.isNumber(b)){b=b.toString()}var c=b.split(" "),a=c.length;if(a==1){c[1]=c[2]=c[3]=c[0]}else{if(a==2){c[2]=c[0];c[3]=c[1]}else{if(a==3){c[3]=c[1]}}}return{top:parseInt(c[0],10)||0,right:parseInt(c[1],10)||0,bottom:parseInt(c[2],10)||0,left:parseInt(c[3],10)||0}}});Rs.app.SHELL={}})();(function(){Rs.app.Region=function(b,a){this.shell=b;Rs.apply(this,a);Rs.app.Region.superclass.constructor.call(this);this.addEvents("beforerender","render","beforeapplyapp","applyapp","beforedestroy","destroy")};Rs.extend(Rs.app.Region,Rs.util.Observable,{minWidth:0,maxWidth:500,minHeight:0,maxHeight:500,applyedapp:false,rendered:false,isDestroyed:false,isApplyApp:function(){return this.applyedapp===true},setWidth:function(b){var c=this.minWidth,a=this.maxWidth;if(b<c){b=c}else{if(b>a){b=a}}return this.width=b},setHeight:function(c){var b=this.minHeight,a=this.maxHeight;if(c<b){c=b}else{if(c>a){c=a}}return this.height=c},getSize:function(){return{width:this.width,height:this.height}},setSize:function(c){if(c){var a=c.width,b=c.height;if(a){this.setWidth(a)}if(b){this.setHeight(b)}}},getState:function(){var a=this.getSize();return{width:a.width,height:a.height}},applyState:function(c){var b={};for(var a in c){if(a=="width"||a=="height"){b[a]=c[a]}}this.setSize(b)},open:function(){var c=this.targetEl,a=c.getWidth(),b=c.getHeight();this.fireEvent("resize",c,a,b)},close:Rs.emptyFn,renderTo:function(a){if(!this.rendered&&this.fireEvent("beforerender",this)!==false){this.targetEl=a;this.panelEl=a.wrap({tag:"div",cls:"rs-app-blank-region"},false);this.rendered=true;this.fireEvent("render",this)}},applyApp:function(a){if(a!=undefined&&!this.applyedapp&&this.fireEvent("beforeapplyapp",this,a)!==false){Rs.apply(this,a.getRegionCfg()||{});this.app=a;this.name=a.getName();this.applyedapp=true;this.fireEvent("applyapp",this,a);this.afterApplyApp(a)}},afterApplyApp:Rs.emptyFn,getTargetEl:function(){return this.targetEl},getRawEl:function(){var a=this.targetEl;return a.dom},addResizeListener:function(c,b,a){this.on("resize",function(){var i=this.targetEl,e=i.getWidth(),g=i.getHeight(),d=i.getX(),j=i.getY();c.call(b||this,e,g,d,j)},this,Rs.apply({delay:40,buffer:40,scope:this},a))},addMoveListener:function(c,b,a){this.on("move",function(){var i=this.targetEl,e=i.getWidth(),g=i.getHeight(),d=i.getX(),j=i.getY();c.call(b||this,e,g,d,j)},this,Rs.apply({delay:40,buffer:40,scope:this},a))},beforeDestroy:Rs.emptyFn,destroy:function(){if(!this.isDestroyed){if(this.fireEvent("beforedestroy",this)!==false){this.destroying=true;this.beforeDestroy();this.onDestroy();this.purgeListeners();this.fireEvent("destroy",this);this.destroying=false;this.isDestroyed=true}}},onDestroy:Rs.emptyFn})})();(function(){Rs.app.WindowRegion=function(e,d){Rs.app.WindowRegion.superclass.constructor.call(this,e,d);this.addEvents("resize","restore","beforeclose","close","maximize","minimize","beforeshow","show","beforehide","hide","move","activate","deactivate","beforedestroy","destroy");this.renderTo(Rs.DomHelper.append(document.body,{tag:"div",cls:"rs-app-region-cell"},true))};Rs.extend(Rs.app.WindowRegion,Rs.app.Region,{headerCls:"rs-app-window-header",hideCls:"rs-app-window-hidden",hidden:false,x:100,y:100,minWidth:50,maxWidth:1000,minHeight:50,maxHeight:800,minimizable:true,maximizable:true,closable:true,draggable:true,resizable:true,isVisible:function(){return this.hidden===false},getState:function(){var d=this.maximized;if(d==true){var e=this.restorePos||this.getXY(),g=this.restoreSize||this.getSize();return{x:e[0],y:e[1],width:g.width,height:g.height,maximized:true}}else{var i=this.getXY(),h=Rs.app.WindowRegion.superclass.getState.call(this);return Rs.apply(h,{x:i[0],y:i[1]})}},applyState:function(g){var e={};for(var d in g){if(d=="x"||d=="y"||d=="width"||d=="height"){e[d]=g[d]}}this.applyPanelEl(e);if(g&&g.maximized==true){this.doMaximize()}},renderTo:function(d){Rs.app.WindowRegion.superclass.renderTo.apply(this,arguments);var e=this.panelEl;if(e){e.addClass("rs-app-window rs-app-window-plain");this.focusEl=e.insertFirst({tag:"a",href:"#",cls:"rs-app-window-focus",tabIndex:"-1",html:"&#160;"});this.focusEl.swallowEvent("click",true)}},afterApplyApp:function(){Rs.app.WindowRegion.superclass.afterApplyApp.apply(this,arguments);var e=this.panelEl;if(e){e.on("mousedown",this.toFront,this);if(this.resizable===true){this.windowResizer=new b(this,e,{minWidth:this.minWidth,minHeight:this.minHeight,maxWidth:this.maxWidth,maxHeight:this.maxHeight,handles:this.resizeHandles||"all"});this.windowResizer.on("beforeresize",this.beforeResize,this)}if(this.modal===true){var g=Rs.getBody(),o=this.mask=g.createChild({tag:"div",cls:"rs-app-window-mask",id:e.id+"-mask"});var n=Rs.lib.Dom,l=0,k=0,m=n.getViewWidth(true),i=n.getViewHeight(true);o.setX(l);o.setY(k);o.setWidth(m);o.setHeight(i);o.setStyle("display","none");o.on("click",this.focus,this)}var j=this.getSize(),d=this.getXY();this.applyPanelEl({x:d[0],y:d[1],width:j.width,height:j.height})}this.manager=Rs.app.WindowRegionMgr;this.manager.register(this)},beforeResize:function(){var d=this.panelEl;this.resizeBox={x:d.getX(),y:d.getY(),width:d.getWidth(),height:d.getHeight()}},updateHandles:function(){if(Rs.isIE&&this.windowResizer){this.windowResizer.syncHandleHeight()}},handleResize:function(e){var d=this.resizeBox;if(d.x!=e.x||d.y!=e.y){this.setXY([e.x,e.y])}if(d.width!=e.width||d.height!=e.height){this.setSize({width:e.width,height:e.height})}this.toFront();this.updateHandles()},setX:function(d){var h=Rs.lib.Dom,e=h.getViewWidth(true),g=this.getSize();if(d<(0-g.width)){d=30-g.width}else{if(d>e){d=e-30}}return this.x=d},setY:function(i){var g=Rs.lib.Dom,e=g.getViewHeight(true),d=this.getSize();if(i<0){i=0}else{if(i>e-30){i=e-30}}return this.y=i},getXY:function(){var d=this.x,e=this.y;return[d,e]},setXY:function(i){var d=i[0],j=i[1],g,h,e=false;if(Rs.isNumber(d)){g=this.x;d=this.setX(d);this.panelEl.setX(d);e=true}if(Rs.isNumber(j)){h=this.y;j=this.setY(j);this.panelEl.setY(j);e=true}if(e===true){this.fireEvent("move",this,[g,h],[d,j])}},setSize:function(j){var e=j?j.width:undefined,i=j?j.height:undefined;if(!Rs.isNumber(e)||!Rs.isNumber(i)){return}var m=this.panelEl,l=this.getHeaderEl(),g=this.getBodyEl(),d=this.getFooterEl(),k=this.targetEl;this.width=e;this.height=i;m.setWidth(e);l.setWidth(e-12);l.setHeight(25);d.setWidth(e-12);d.setHeight(6);e=e-12;i=i-l.getHeight()-d.getHeight();g.setWidth(e);g.setHeight(i);k.setWidth(e);k.setHeight(i);this.fireEvent("resize",k,e,i)},getHeaderEl:function(){var l=this.headerEl,k=this.panelEl;if(!l){var e=k.insertFirst({tag:"div",cls:"rs-app-window-tl x-app-window-tl"}),i=e.createChild({tag:"div",cls:"rs-app-window-tr x-app-window-tr"}),d=i.createChild({tag:"div",cls:"rs-app-window-tc x-app-window-tc"});if(this.headerCfg){l=this.headerEl=d.createChild(this.headerCfg)}else{l=this.headerEl=d.createChild({tag:"div",cls:this.headerCls})}l.on("mouseover",function(){var m="rs-app-window-header-over";l.addClass(m);l.on("mouseout",function(){l.removeClass(m)},this,{single:true,scope:this})},this);if(this.draggable){this.windowRegionDD=new c(this,l,k)}this.initTools();var j=this.app,g=j.getName()||"",h=j.getIcon16();l.createChild({html:'<span class="'+h+' rs-app-window-header-text">'+g+"</span>"});l.unselectable()}return l},initTools:function(){var i=this.headerEl;if(this.closable){var h=this.closeEl=i.createChild({tag:"div",cls:"rs-app-tool rs-app-tool-close x-app-tool"});h.setStyle("display","block");h.on("click",function(){if(this.app){this.app.close()}else{this.close()}},this);h.on("mouseover",function(){h.addClass("rs-app-tool-close-over");h.on("mouseleave",function(){h.removeClass("rs-app-tool-close-over")},this,{single:true})},this)}if(this.minimizable){var g=this.minimizeEl=i.createChild({tag:"div",cls:"rs-app-tool rs-app-tool-minimize x-app-tool"});g.setStyle("display","block");g.on("click",this.minimize,this);g.on("mouseover",function(){g.addClass("rs-app-tool-minimize-over");g.on("mouseleave",function(){g.removeClass("rs-app-tool-minimize-over")},this,{single:true})},this)}if(this.maximizable){var e=this.restoreEl=i.createChild({tag:"div",cls:"rs-app-tool rs-app-tool-restore x-app-tool"});e.on("click",this.restore,this);e.setStyle("display","none");e.on("mouseover",function(){e.addClass("rs-app-tool-restore-over");e.on("mouseleave",function(){e.removeClass("rs-app-tool-restore-over")},this,{single:true})},this);var d=this.maximizeEl=i.createChild({tag:"div",cls:"rs-app-tool rs-app-tool-maximize x-app-tool"});d.setStyle("display","block");d.on("click",this.maximize,this);d.on("mouseover",function(){d.addClass("rs-app-tool-maximize-over");d.on("mouseleave",function(){d.removeClass("rs-app-tool-maximize-over")},this,{single:true})},this)}if(this.maximizable){i.on("dblclick",this.toggleMaximize,this)}},open:function(){Rs.app.WindowRegion.superclass.open.apply(this,arguments);this.show()},close:function(){if(this.fireEvent("beforeclose",this)!==false){if(this.hidden){this.doClose()}else{this.hide(this.doClose,this)}}},doClose:function(){this.fireEvent("close",this);this.destroy()},restore:function(){if(this.maximized){this.doRestore()}this.toFront();return this},doRestore:function(){var m=this.panelEl,g="rs-app-window-maximized",i=this.restorePos,d=i[0],l=i[1],k=this.restoreSize,e=k.width,j=k.height;if(m.hasClass(g)){m.removeClass(g)}this.maximizeEl.setStyle("display","block");this.restoreEl.setStyle("display","none");this.applyPanelEl({x:d,y:l,width:e,height:j});delete this.restorePos;delete this.restoreSize;if(this.windowRegionDD){this.windowRegionDD.unlock()}this.maximized=false;this.fireEvent("restore",this)},maximize:function(){if(!this.maximized){this.doMaximize()}this.toFront();return this},doMaximize:function(){var j=Rs.lib.Dom,i=j.getViewHeight(true),g=j.getViewWidth(true),l=this.panelEl,d,k,e="rs-app-window-maximized";this.restoreSize=this.getSize();d=l.getX();k=l.getY();this.restorePos=[d,k];if(!l.hasClass(e)){l.addClass(e)}this.maximizeEl.setStyle("display","none");this.restoreEl.setStyle("display","block");this.applyPanelEl({x:0,y:0,width:g-2,height:i-2});if(this.windowRegionDD){this.windowRegionDD.lock()}this.maximized=true;this.fireEvent("maximize",this)},minimize:function(){this.hide(function(){this.fireEvent("minimize",this)},this);return this},toggleMaximize:function(){return this[this.maximized?"restore":"maximize"]()},getBodyEl:function(){var d=this.bodyEl,j=this.panelEl;if(!d){var i=j.createChild({tag:"div",cls:"rs-app-window-bwrap"}),h=i.createChild({tag:"div",cls:"rs-app-window-bl x-app-window-bl"}),e=h.createChild({tag:"div",cls:"rs-app-window-br x-app-window-br"}),g=e.createChild({tag:"div",cls:"rs-app-window-bc x-app-window-bc"}),d=this.bodyEl=g.createChild({tag:"div",cls:"rs-app-window-body x-app-window-body"});d.appendChild(this.targetEl)}return d},getFooterEl:function(){var g=this.foolterEl,i=this.panelEl;if(!g){var e=i.createChild({tag:"div",cls:"rs-app-window-fwrap"}),h=e.createChild({tag:"div",cls:"rs-app-window-fl x-app-window-fl"}),d=h.createChild({tag:"div",cls:"rs-app-window-fr x-app-window-fr"}),g=this.foolterEl=d.createChild({tag:"div",cls:"rs-app-window-fc x-app-window-fc"})}return g},applyPanelEl:function(i){var d=i.x,j=i.y,e=i.width,g=i.height;this.setXY([d,j]);this.setSize({width:e,height:g})},onShow:Rs.emptyFn,beforeShow:Rs.emptyFn,showMask:function(){if(this.modal===true){this.mask.setStyle("display","block")}},hideMask:function(){if(this.modal===true){this.mask.setStyle("display","none")}},show:function(d,g){this.removeBlankClass();if(this.hidden===false){this.showMask();this.toFront();return this}if(this.fireEvent("beforeshow",this)===false||this.beforeShow(this)===false){return this}if(d){this.on("show",d,g,{single:true})}this.hidden=false;this.showMask();var e=this.hideCls,h=this.panelEl;if(h.hasClass(e)){h.removeClass(e)}this.afterShow()},afterShow:function(){if(this.isDestroyed){return false}if(this.modal===true){Rs.EventManager.onWindowResize(this.onWindowResize,this)}this.toFront();this.onShow();this.fireEvent("show",this)},onWindowResize:function(){if(this.modal===true&&this.mask){var j=Rs.lib.Dom,d=0,k=0,g=j.getViewWidth(true),i=j.getViewHeight(true),e=this.mask;e.setX(d);e.setY(k);e.setWidth(g);e.setHeight(i)}},onHide:Rs.emptyFn,hide:function(d,g){if(this.hidden||this.fireEvent("beforehide",this)===false){return this}if(Rs.isFunction(d)){this.on("hide",d,g,{single:true})}this.hidden=true;this.hideMask();var e=this.hideCls,h=this.panelEl;if(!h.hasClass(e)){h.addClass(e)}this.afterHide()},afterHide:function(){if(this.modal===true){Rs.EventManager.removeResizeListener(this.onWindowResize,this)}this.onHide();this.fireEvent("hide",this)},toFront:function(d){if(this.manager.bringToFront(this)){if(!d||!d.getTarget().focus){this.focus()}}return this},setActive:function(d){if(d){this.fireEvent("activate",this)}else{this.fireEvent("deactivate",this)}},focus:function(){var d=this.focusEl;if(d){d.focus.defer(10,d)}},setZIndex:function(d){if(this.modal){this.mask.setStyle("z-index",d)}var e=this.panelEl;if(e){e.setStyle("z-index",++d);d+=5}if(this.windowResizer){this.windowResizer.proxy.setStyle("z-index",++d)}this.lastZIndex=d},removeBlankClass:function(){var d="rs-app-blank-region",e=this.panelEl;if(e.hasClass(d)){e.removeClass(d)}},ghost:function(){var g=this.panelEl,i=this.bodyEl,e=i.dom.offsetWidth,j=i.dom.offsetHeight,d=g.getX(),l=g.getY(),k=Rs.DomHelper.append(document.body,{tag:"div",cls:"rs-app-window-ghost rs-app-window rs-app-window-plain"},true);k.appendChild(g.dom.firstChild.cloneNode(true));k.createChild({html:'<div class="rs-app-window-bwrap"><div class="rs-app-window-bl x-app-window-bl"><div class="rs-app-window-br x-app-window-br"><div class="rs-app-window-bc x-app-window-bc"><div class="rs-app-window-body x-app-window-body" style="width: '+e+"px; height: "+j+'px;"><ul style="width: '+e+"px; height: "+j+'px;"></ul></div></div></div></div></div>'});k.appendChild(g.dom.lastChild.cloneNode(true));k.setStyle("cursor","move !important");if(Rs.isIE){k.setStyle({opacity:"65",filter:"alpha(opacity=65)"})}else{k.setStyle({opacity:".65","-moz-opacity":".65",filter:"alpha(opacity=.65)"})}k.unselectable();k.setX(d);k.setY(l);this.hide();this.activeGhost=k;return k},unghost:function(){if(!this.activeGhost){return}this.show();this.activeGhost.hide();this.activeGhost.remove();delete this.activeGhost}});var c=function(e,g,d){this.win=e;this.header=g;this.panel=d;this.init()};c.prototype={loacked:false,init:function(){this.header.on("mouseenter",this.notifyEnter,this);this.header.on("mousedown",this.notifyOut,this,{scope:this})},notifyEnter:function(){},notifyOut:function(j,n,h){var n=Rs.get(j.getTarget());if(n&&(n.hasClass("rs-app-tool")||n.hasClass("rs-app-window-header-text"))){return}var p=j.getXY(),m=p[0],k=p[1],i=this.win,d=this.panel,g=d.getX(),l=d.getY();this.offsetXY={x:m-g,y:k-l};this.addOverlay();ghost=this.ghost=i.ghost();ghost.on("mousemove",this.notifyOver,this);ghost.on("mouseup",this.notifyDrop,this,{delay:100,scope:this})},addOverlay:function(){var j=Rs.lib.Dom,d=0,l=0,e=j.getViewWidth(true),i=j.getViewHeight(true),g,k;g=this.overlay=Rs.DomHelper.append(document.body,{tag:"div",cls:"rs-app-window-overlay"},true);g.setX(d);g.setY(l);g.setWidth(e);g.setHeight(i);g.unselectable();g.on("mousedown",this.notifyDrop,this);g.on("mousemove",this.notifyOver,this);g.on("mouseup",this.notifyDrop,this)},removeOverlay:function(){var d=this.overlay;if(d){d.removeAllListeners();d.remove();delete d}},notifyOver:function(k,q,h){var r=this.ghost,j=this.win,s=k.getXY(),p=s[0],m=s[1],i=this.offsetXY,g=0,n=0,d,l;if(i){g=i.x;n=i.y}d=p-g;l=m-n;r.setX(d);if(l>=0){r.setY(l)}else{j.unghost();j.setXY([d,0]);j.toFront(k);this.removeOverlay();this.offsetXY=null}},notifyDrop:function(k,q,h){var r=k.getXY(),p=r[0],m=r[1],i=this.offsetXY,g=0,n=0,j=this.win,d,l;if(i){g=i.x;n=i.y}d=p-g;l=m-n;j.unghost();j.setXY([d,l]);j.toFront(k);this.removeOverlay();this.offsetXY=null},lock:function(){if(this.loacked===false){this.header.un("mouseenter",this.notifyEnter,this);this.header.un("mousedown",this.notifyOut,this);this.locked=true}},unlock:function(){if(this.locked===true){this.header.on("mouseenter",this.notifyEnter,this);this.header.on("mousedown",this.notifyOut,this,{scope:this});this.locked=false}},destroy:function(){this.removeOverlay();if(this.header){this.header.un("mouseenter",this.notifyEnter,this);this.header.un("mousedown",this.notifyOut,this)}if(this.ghost){this.ghost.un("mousemove",this.notifyOver,this);this.ghost.un("mouseup",this.notifyDrop,this);delete this.ghost}}};var a=function(){var j={};var h=[];var i=null;var g=function(m,l){if(m.modal===true&&m.hidden!==true){return 1}else{if(l.modal===true&&l.hidden!==true){return -1}else{return(!m._lastAccess||m._lastAccess<l._lastAccess)?-1:1}}};var k=function(){var n=h,l=n.length;if(l>0){n.sort(g);var m=n[0].manager.zseed;for(var o=0;o<l;o++){var p=n[o];if(p&&!p.hidden){p.setZIndex(m+(o*10))}}}d()};var e=function(l){if(l!=i){if(i){i.setActive(false)}i=l;if(l){l.setActive(true)}}};var d=function(){for(var l=h.length-1;l>=0;--l){if(!h[l].hidden){e(h[l]);return}}e(null)};return{zseed:7000,register:function(l){if(l.manager){l.manager.unregister(l)}l.manager=this;j[l.id]=l;h.push(l);l.on("hide",d)},unregister:function(l){delete l.manager;delete j[l.id];l.un("hide",d);h.remove(l)},get:function(l){return typeof l=="object"?l:j[l]},bringToFront:function(l){l=this.get(l);if(l!=i){l._lastAccess=new Date().getTime();k();return true}return false},sendToBack:function(l){l=this.get(l);l._lastAccess=-(new Date().getTime());k();return l},hideAll:function(){for(var l in j){if(j[l]&&typeof j[l]!="function"&&j[l].isVisible()){j[l].hide()}}},getActive:function(){return i},getBy:function(n,m){var o=[];for(var l=h.length-1;l>=0;--l){var p=h[l];if(n.call(m||p,p)!==false){o.push(p)}}return o},each:function(m,l){for(var n in j){if(j[n]&&typeof j[n]!="function"){if(m.call(l||j[n],j[n])===false){return}}}}}};Rs.app.WindowRegionMgr=new a();var b=function(k,j,e){this.win=k;this.el=j;this.proxy=this.createProxy({tag:"div",cls:"rs-app-window-resizable-proxy",id:this.el.id+"-rzproxy"},Rs.getBody());this.proxy.unselectable();this.proxy.setStyle("display","block");Rs.apply(this,e);if(!this.handles){this.handles="s,e,se";if(this.multiDirectional){this.handles+=",n,w"}}if(this.handles=="all"){this.handles="n s e w ne nw se sw"}var h=this.handles.split(/\s*?[,;]\s*?| /),l=b.positions;for(var g=0,d=h.length;g<d;g++){if(h[g]&&l[h[g]]){var m=l[h[g]];this[m]=new b.Handle(this,m)}}this.corner=this.southeast;this.addEvents("beforeresize","resize");if(this.width&&this.height){this.resizeTo(this.width,this.height)}b.superclass.constructor.call(this)};Rs.extend(b,Rs.util.Observable,{enabled:true,heightIncrement:0,widthIncrement:0,minHeight:5,minWidth:5,maxHeight:10000,maxWidth:10000,minX:0,minY:0,preserveRatio:false,init:function(){this.proxy=this.createProxy({tag:"div",cls:"rs-app-window-resizable-proxy",id:this.el.id+"-rzproxy"},Rs.getBody());this.proxy.unselectable();this.proxy.setStyle("display","block")},createProxy:function(g,k){g=(typeof g=="object")?g:{tag:"div",cls:g};var l=this,e=Rs.DomHelper,d=l.el,j=e.append(k,g,true),n,m,o,i;return j},resizeTo:function(d,e){this.win.setSize({width:d,height:e});this.fireEvent("resize",this,d,e,null)},startSizing:function(l,k){this.fireEvent("beforeresize",this,l);if(this.enabled){var g=this.overlay;if(!g){g=this.overlay=this.createOverlay({tag:"div",cls:"rs-app-window-resizable-overlay",html:"&#160;"},Rs.getBody());g.on({scope:this,mousemove:this.onMouseMove,mouseup:this.onMouseUp})}this.resizing=true;g.setStyle("cursor",k.el.getStyle("cursor"));g.show();var d=this.el,m=this.proxy,p,o,q,j,i,n;p=d.getX();o=d.getY();q=d.getWidth();j=d.getHeight();i=this.startBox={x:p,y:o,width:q,height:j};n=this.startPoint=l.getXY();this.offsets=[(i.x+i.width)-n[0],(i.y+i.height)-n[1]];m.setStyle("visibility","hidden");m.setX(p);m.setY(o);m.setWidth(q);m.setHeight(j);m.show()}},createOverlay:function(e,j){e=(typeof e=="object")?e:{tag:"div",cls:e};var n=Rs.lib.Dom,d=Rs.DomHelper,l=0,k=0,m=n.getViewWidth(true),i=n.getViewHeight(true),g=d.append(j,e,true);g.setX(l);g.setY(k);g.setWidth(m);g.setHeight(i);g.unselectable();return g},onMouseDown:function(d,g){if(this.enabled){g.stopEvent();this.activeHandle=d;this.startSizing(g,d)}},onMouseUp:function(h){this.activeHandle=null;var g=this.resizeElement(),d=this.overlay;this.resizing=false;this.handleOut();d.hide();this.fireEvent("resize",this,g.width,g.height,h)},resizeElement:function(){var g=this.proxy,k=this.win,d=g.getX(),l=g.getY(),e=g.getWidth(),i=g.getHeight(),j;j={x:d,y:l,width:e,height:i};g.hide();k.handleResize(j);return j},constrain:function(e,g,d,h){if(e-g<d){g=e-d}else{if(e-g>h){g=e-h}}return g},snap:function(g,i,e){if(!i||!g){return g}var h=g;var d=g%i;if(d>0){if(d>(i/2)){h=g+(i-d)}else{h=g-d}}return Math.max(e,h)},onMouseMove:function(D){if(this.enabled&&this.activeHandle){try{var z=this.curSize||this.startBox,o=this.startBox.x,n=this.startBox.y,i=o,g=n,p=z.width,B=z.height,j=p,r=B,q=this.minWidth,E=this.minHeight,v=this.maxWidth,H=this.maxHeight,l=this.widthIncrement,d=this.heightIncrement,F=D.getXY(),u=-(this.startPoint[0]-Math.max(this.minX,F[0])),s=-(this.startPoint[1]-Math.max(this.minY,F[1])),m=this.activeHandle.position,I,k,A=this.proxy;switch(m){case"east":p+=u;p=Math.min(Math.max(q,p),v);break;case"south":B+=s;B=Math.min(Math.max(E,B),H);break;case"southeast":p+=u;B+=s;p=Math.min(Math.max(q,p),v);B=Math.min(Math.max(E,B),H);break;case"north":s=this.constrain(B,s,E,H);n+=s;B-=s;break;case"west":u=this.constrain(p,u,q,v);o+=u;p-=u;break;case"northeast":p+=u;p=Math.min(Math.max(q,p),v);s=this.constrain(B,s,E,H);n+=s;B-=s;break;case"northwest":u=this.constrain(p,u,q,v);s=this.constrain(B,s,E,H);n+=s;B-=s;o+=u;p-=u;break;case"southwest":u=this.constrain(p,u,q,v);B+=s;B=Math.min(Math.max(E,B),H);o+=u;p-=u;break}var t=this.snap(p,l,q);var G=this.snap(B,d,E);if(t!=p||G!=B){switch(m){case"northeast":n-=G-B;break;case"north":n-=G-B;break;case"southwest":o-=t-p;break;case"west":o-=t-p;break;case"northwest":o-=t-p;n-=G-B;break}p=t;B=G}if(this.preserveRatio){switch(m){case"southeast":case"east":B=r*(p/j);B=Math.min(Math.max(E,B),H);p=j*(B/r);break;case"south":p=j*(B/r);p=Math.min(Math.max(q,p),v);B=r*(p/j);break;case"northeast":p=j*(B/r);p=Math.min(Math.max(q,p),v);B=r*(p/j);break;case"north":I=p;p=j*(B/r);p=Math.min(Math.max(q,p),v);B=r*(p/j);o+=(I-p)/2;break;case"southwest":B=r*(p/j);B=Math.min(Math.max(E,B),H);I=p;p=j*(B/r);o+=I-p;break;case"west":k=B;B=r*(p/j);B=Math.min(Math.max(E,B),H);n+=(k-B)/2;I=p;p=j*(B/r);o+=I-p;break;case"northwest":I=p;k=B;B=r*(p/j);B=Math.min(Math.max(E,B),H);p=j*(B/r);n+=k-B;o+=I-p;break}}A.setX(o);A.setY(n);A.setWidth(p);A.setHeight(B)}catch(C){}}},handleOver:function(){if(this.enabled){this.el.addClass("rs-app-window-resizable-over")}},handleOut:function(){if(!this.resizing){this.el.removeClass("rs-app-window-resizable-over")}},destroy:function(){this.overlay=null;this.proxy=null;var e=b.positions;for(var d in e){if(typeof e[d]!="function"&&this[e[d]]){this[e[d]].destroy()}}this.purgeListeners()},syncHandleHeight:function(){var d=this.el.getHeight(true);if(this.west){this.west.el.setHeight(d)}if(this.east){this.east.el.setHeight(d)}}});b.positions={n:"north",s:"south",e:"east",w:"west",se:"southeast",sw:"southwest",nw:"northwest",ne:"northeast"};b.Handle=function(e,g,d){this.position=g;this.rz=e;this.init()};b.Handle.prototype={init:function(){this.el=this.rz.el.createChild({tag:"div",cls:"rs-app-window-resizable-handle rs-app-window-resizable-handle-"+this.position});this.el.unselectable();this.el.on("mousedown",this.onMouseDown,this);if(!this.disableTrackOver){this.el.on({scope:this,mouseover:this.onMouseOver,mouseout:this.onMouseOut})}},onMouseDown:function(d){this.rz.onMouseDown(this,d)},onMouseOver:function(d){this.rz.handleOver(this,d)},onMouseOut:function(d){this.rz.handleOut(this,d)},destroy:function(){this.el=null}}})();(function(){Rs.app.WindowShell=Rs.extend(Rs.app.Shell,{frameTpl:['<div class="rs-window-shell-background"></div>','<div class="rs-window-shell-taskbar"></div>'],taskBarCfg:{},taskBarPosition:"south",backgroundCls:"rs-window-shell-background-1",onWindowResize:function(){Rs.app.WindowShell.superclass.onWindowResize.apply(this,arguments);var c=this.taskbar;if(c){c.doLayout()}this.syncBackGround()},doBuild:function(){Rs.app.WindowShell.superclass.doBuild.apply(this,arguments);var h=this.frame,d=h.child(".rs-window-shell-taskbar");if(d){var c=this.taskbar,g,e;if(!c){c=this.taskbar=new b(this,this.taskBarPosition,this.taskBarCfg);c.renderTo(d)}}this.backgroundEl=h.child(".rs-window-shell-background");this.syncBackGround()},syncBackGround:function(){var d=this.backgroundEl;if(d){var c=this.getSize();d.setX(0);d.setY(0);d.setWidth(c.width);d.setHeight(c.height);d.addClass(this.backgroundCls)}}});Rs.app.SHELL.window=Rs.app.WindowShell;var b=function(e,c,d){this.shell=e;this.position=c||"south";Rs.apply(this,d);b.superclass.constructor.call(this)};Rs.extend(b,Rs.util.Observable,{width:30,height:30,startButtonText:"开始",rendered:false,renderTo:function(c){if(this.rendered===false&&this.fireEvent("beforerender",this)!==false){this.targetEl=c;this.rendered=true;this.targetEl.addClass("rs-window-shell-taskbar-"+this.position);this.getStartButtonEl();this.getTaskButtonsEl();this.taskButtons=new Rs.util.MixedCollection();this.initEvents();this.afterRender();this.syncPosSize()}},getStartButtonEl:function(){var h=this.position,e=this.startButtonEl,g;if(!e){if(h=="north"||h=="south"){g='<table><tr><td class="rs-window-shell-start-left-h"><i>&#160;</i></td><td class="rs-window-shell-start-center-h"><button id="rs-window-shell-start-button" class="rs-window-shell-start-text start"type="button" style="height:28px;">'+this.startButtonText+'</button></td><td class="rs-window-shell-start-right-h"><i>&#160;</i></td><td><i>&#160;</i></td><td class="rs-window-shell-start-split-h"><i></i></td></tr></table>'}else{if(h=="west"||h=="east"){g='<table><tr><td class="rs-window-shell-start-left-v"><i>&#160;</i></td></tr><tr><td class="rs-window-shell-start-center-v"><button id="rs-window-shell-start-button" class="rs-window-shell-start-text start" type="button" style="height:30px;"></button></td></tr><tr><td class="rs-window-shell-start-right-v"><i>&#160;</i></td></tr><tr><td><i>&#160;</i></td></tr><tr><td class="rs-window-shell-start-split-v"><i></i></td></tr><tr></table>'}}e=this.startButtonEl=this.targetEl.createChild({tag:"div",cls:"rs-window-shell-start",html:g});e.addClass("rs-window-shell-start-"+h);e.unselectable();var d=this.startButton=Rs.get("rs-window-shell-start-button");if(d){d.on("click",this.toggleStartMenu,this)}var c=Rs.getBody();c&&c.on("keydown",function(i,j){if(i&&i.ctrlKey===true&&i.getKey()==91){this.toggleStartMenu()}},this)}return e},getTaskButtonsEl:function(){var h=this.taskButtonsEl;if(!h){var j=this.position,c=(j=="west"||j=="east"),g=this.targetEl.createChild({tag:"div",cls:"rs-window-shell-taskbuttons-strip"+(c?"-vertical":"")}),e=this.taskButtonsWrap=g.createChild({tag:"div",cls:"rs-window-shell-taskbuttons-strip-wrap"+(c?"-vertical":"")}),d=this.leftScroller=e.createChild({tag:"div",cls:"rs-window-shell-taskbuttons-scroller-left"+(c?"-vertical":"")}),h=this.taskButtonsEl=e.createChild({tag:"ul"}),i=this.rightScroller=e.createChild({tag:"div",cls:"rs-window-shell-taskbuttons-scroller-right"+(c?"-vertical":"")});d.on("mousedown",function(){var k=setInterval((function(){if(this.scrollerToLeft()!==true){clearInterval(k)}}).createDelegate(this),15);d.on("mouseup",function(){clearInterval(k)},this,{single:true})},this);i.on("mousedown",function(){var k=setInterval((function(){if(this.scrollerToRight()!==true){clearInterval(k)}}).createDelegate(this),15);i.on("mouseup",function(){clearInterval(k)},this,{single:true})},this);d.hide();i.hide();d.unselectable();i.unselectable();h.unselectable()}return h},scrollerToLeft:function(){var n=this.taskButtonsEl,k=n.last("li"),i=this.rightScroller,h=this.position,l=(h=="west"||h=="east"),g=l?"getBottom":"getRight",e=l?"getTop":"getLeft",j=l?"setY":"setX",m=l?"getY":"getX";if(k){var c=k[g](),d=i[e]();if(c>d){n[j](n[m]()-5);return true}}},scrollerToRight:function(){var n=this.taskButtonsEl,h=n.first("li"),i=this.leftScroller,j=this.position,l=(j=="west"||j=="east"),g=l?"getBottom":"getRight",e=l?"getTop":"getLeft",k=l?"setY":"setX",m=l?"getY":"getX";if(h){var c=h[e](),d=i[g]();if(c<d){n[k](n[m]()+5);return true}}},toggleStartMenu:function(){var c=this.getStartMenu();if(c){c[c.isVisible()?"hide":"show"]()}},initEvents:function(){var c=this.shell,d=c.getEngine();d.on("install",this.onAppInstall,this);d.on("uninstall",this.onAppUninstall,this)},onAppInstall:function(c,e){var d=this.getStartMenu();d.onAppInstall(e);e.on("open",this.onAppOpen,this);e.on("close",this.onAppClose,this)},onAppUninstall:function(c,e){var d=this.getStartMenu();d.onAppUninstall(e);e.un("open",this.onAppOpen,this);e.un("close",this.onAppClose,this)},onAppOpen:function(d){var c=this.getStartMenu();c.onAppOpen(d);this.doAddTaskButton(d)},doAddTaskButton:function(m){var q=this.taskButtonsEl;if(q){var k=this.position,o=(k=="west"||k=="east"),g=this.startButtonEl,n=q.last("li"),j=(n?n:g)[o?"getBottom":"getRight"]()+3,e=m.region,p="taskbutton-"+m.getId(),w=m.getName()||"",u=m.getIcon16(),l,h=[];if(o){for(var r=0,s=w.length;r<s;r++){h.push((r==0?"":"<br/>")+w.charAt(r))}}l=o?'<table class="rs-window-shell-taskbuttons-activate"><tr><td class="rs-window-shell-taskbutton-left-vertical"><i></i></td></tr><tr><td class="rs-window-shell-taskbutton-center-vertical"><div class="rs-window-shell-taskbutton-text-vertical rs-window-shell-taskbutton-icon-vertical '+u+'">'+h.join("")+'</div></td></tr><tr><td class="rs-window-shell-taskbutton-right-vertical"><i></i></td></tr></table>':'<table class="rs-window-shell-taskbuttons-activate"><tr><td class="rs-window-shell-taskbutton-left"><i></i></td><td class="rs-window-shell-taskbutton-center"><button class="rs-window-shell-taskbutton-text rs-window-shell-taskbutton-icon '+u+'"type="button">'+w+'</button></td><td class="rs-window-shell-taskbutton-right"><i></i></td></tr></table>';var c=this.taskButtons.add(q.createChild({tag:"li",id:p,html:l}));c[o?"setY":"setX"](j);c.on("click",this.toggleTaskButton.createDelegate(this,[m,e]),this);var t=c.first("table"),d="rs-window-shell-taskbuttons-activate";e.on("activate",function(){if(t&&!t.hasClass(d)){t.addClass(d)}},this);e.on("deactivate",function(){if(t&&t.hasClass(d)){t.removeClass(d)}},this);this.toggleLeftRightScroller()}},toggleLeftRightScroller:function(){var j=this.taskButtonsWrap,p=this.taskButtonsEl,g=p.first("li"),i=p.last("li"),s=this.leftScroller,d=this.rightScroller,e=this.position,k=(e=="west"||e=="east"),w=k?"getY":"getX",m=k?"setY":"setX",q=k?"getTop":"getLeft",h=k?"getBottom":"getRight",z=function(r){var B=this.taskButtons,A,v=0,l=B.length;for(;v<l;v++){A=B.get(v);A[m](A[w]()-r)}},t=function(r){var B=this.taskButtons,A,v=0,l=B.length;for(;v<l;v++){A=B.get(v);A[m](A[w]()+r)}},c=function(){if(!s.isVisible()){s.show();t.call(this,19)}if(!d.isVisible()){d.show()}},u=function(){if(s.isVisible()){s.hide();z.call(this,19)}if(d.isVisible()){d.hide()}};if(i){var o=j[q](),n=j[h](),y=g[q](),x=i[h]();if(Math.abs(x-y)>Math.abs(n-o)){c.call(this);if(n>x){t.call(this,n-x)}else{if(o<y-19){z.call(this,y-19-o)}}}else{u.call(this)}}else{u.call(this)}},toggleTaskButton:function(d,c){if(c){if(Rs.app.WindowRegionMgr.getActive()!=c){c.show()}else{c[c.isVisible()?"hide":"show"]()}}},onAppClose:function(h){var e=this.taskButtons,d="taskbutton-"+h.getId(),n=this.startButtonEl,j=n.getRight()+3,r=false,m,o=this.position,q=(o=="west"||o=="east"),g=q?"getTop":"getLeft",l=q?"getBottom":"getRight",p=q?"setY":"setX";for(var k=0;k<e.length;k++){m=e.itemAt(k);if(d==m.id){j=m[g]();r=true;m.remove();e.remove(m);k--}else{if(r===true){m[p](j);j=m[l]()+3}}}this.toggleLeftRightScroller();var c=this.getStartMenu();c.onAppClose(h)},afterRender:Rs.emptyFn,syncPosSize:function(){var h=this.getXY(),e=this.getSize();this.setX(h[0]);this.setY(h[1]);this.setWidth(e.width);this.setHeight(e.height);var g=this.taskButtonsWrap;if(g){var i=this.position,d=(i=="west"||i=="east"),c=this.getTaskButtonsWrapWidth();g[d?"setHeight":"setWidth"](c)}this.toggleLeftRightScroller();this.fireEvent("render",this)},getTaskButtonsWrapWidth:function(){var h=this.position,c=(h=="west"||h=="east"),e=this.shell,d=e.getSize(),g=this.getStartButtonEl();if(c==true){return d.height-g.getHeight()}else{return d.width-g.getWidth()}},setX:function(c){var d=this.targetEl;if(d){d.setX(c)}},setY:function(d){var c=this.targetEl;if(c){c.setY(d)}},getXY:function(){var g=this.shell,e=g.getSize(),i=this.position,d=this.getSize(),c,h;if(i=="north"||i=="south"){c=0;h=e.height-(i=="north"?e.height:d.height)}else{if(i=="west"||i=="east"){h=0;c=e.width-(i=="west"?e.width:d.width)}}return[c,h]},setWidth:function(c){var d=this.targetEl;if(d){d.setWidth(c)}},setHeight:function(c){var d=this.targetEl;if(d){d.setHeight(c)}},getSize:function(){var e=this.shell,d=e.getSize(),i=this.position,c,g;if(i=="north"||i=="south"){c=d.width;g=this.height}else{if(i=="east"||i=="west"){c=this.width;g=d.height}}return{width:c,height:g}},doLayout:function(){this.syncPosSize()},getStartMenu:function(){var c=this.startMenu;if(!c){c=this.startMenu=new a(this.shell,this,{})}return c}});var a=function(e,d,c){this.shell=e;this.taskbar=d;Rs.apply(this,c);this.appEls=new Rs.util.MixedCollection();this.settings=new Rs.util.MixedCollection();a.superclass.constructor.call(this);this.init()};Rs.extend(a,Rs.util.Observable,{width:300,height:400,settingBodyWidth:100,hidden:true,init:function(){this.body=Rs.getBody().createChild({tag:"div",cls:"rs-window-shell-start-menu"});this.body.addClass("rs-window-shell-start-menu-hidden");var c=this.focusEl=this.body.insertFirst({tag:"a",href:"#",cls:"rs-app-window-focus",tabIndex:"-1",html:"&#160;"});c.swallowEvent("click",true);c.on("blur",function(h,g,d){this.hide()},this,{delay:300,scope:this});this.getHeaderEl();this.getContentEl()},getHeaderEl:function(){var d=this.body,h=this.headerEl;if(!h){var c=d.createChild({tag:"div",cls:"rs-window-shell-start-menu-hl"}),e=c.createChild({tag:"div",cls:"rs-window-shell-start-menu-hr"}),g=e.createChild({tag:"div",cls:"rs-window-shell-start-menu-hc"}),h=this.headerEl=g.createChild({tag:"div",cls:"rs-window-shell-start-menu-header"});h.addClass("user");h.createChild({html:'<span class="rs-window-shell-start-menu-user">'+(USERINFO&&USERINFO.USERNAME?USERINFO.USERNAME:"")+"</span>"})}return h},getContentEl:function(){var h=this.body,c=this.contentEl;if(!c){var g=h.createChild({tag:"div",cls:"rs-window-shell-start-menu-cb"}),l=g.createChild({tag:"div",cls:"rs-window-shell-start-menu-cl"}),j=l.createChild({tag:"div",cls:"rs-window-shell-start-menu-cr"}),c=this.contentEl=j.createChild({tag:"div",cls:"rs-window-shell-start-menu-content"});this.appBody=c.createChild({tag:"div",cls:"rs-window-shell-start-menu-app"});this.allAppEl=this.appBody.createChild({tag:"ul"});this.settingBody=c.createChild({tag:"div",cls:"rs-window-shell-start-menu-setting"});this.settingUl=this.settingBody.createChild({tag:"ul"});var e=this.footerEl=h.createChild({tag:"div",cls:"rs-window-shell-start-menu-fb"}),k=e.createChild({tag:"div",cls:"rs-window-shell-start-menu-fl"}),i=k.createChild({tag:"div",cls:"rs-window-shell-start-menu-fr"}),d=i.createChild({tag:"div",cls:"rs-window-shell-start-menu-footer"})}return c},onAppInstall:function(e){var g=e.getId(),c=e.getName()||"",d=this.appEls.add(g,this.allAppEl.createChild({tag:"li",cls:"rs-window-shell-start-menu-item"}));d.createChild({cls:e.getIcon16()||"rs-window-shell-default-app-icon",html:'<span class="rs-window-shell-start-menu-app-name">'+c+"</span>"});d.on("mouseover",function(){d.addClass("rs-window-shell-start-menu-item-over");d.on("mouseleave",function(){d.removeClass("rs-window-shell-start-menu-item-over")},this,{single:true})},this);d.on("click",function(h){if(!h.isOpen()){h.open();(function(){this.hide()}).defer(100,this)}}.createDelegate(this,[e]),this)},onAppUninstall:function(c){var d=this.appEls;id=c.getId(),appEl=d.get(id);if(appEl){appEl.removeAllListeners();appEl.remove();d.removeKey(id)}},onAppOpen:function(c){var d=this.appEls;id=c.getId(),appEl=d.get(id),cls="rs-window-shell-start-menu-app-opened";if(appEl&&!appEl.hasClass(cls)){appEl.addClass(cls)}},onAppClose:function(c){var d=this.appEls;id=c.getId(),appEl=d.get(id),cls="rs-window-shell-start-menu-app-opened";if(appEl&&appEl.hasClass(cls)){appEl.removeClass(cls)}},isVisible:function(){return this.hidden===false},syncPosSize:function(){var k=this.body,e=this.getContentEl(),o=this.settingBodyWidth,i=this.taskbar,c=this.appBody,g=this.settingBody,n=i.position,s=i.getXY(),d=s[0],q=s[1],l=i.getSize(),p,m,r,j;r=this.width;j=this.height;if(n=="north"||n=="south"){p=3;m=q-(n=="south"?j+3:(-1)*(3+l.height))}else{if(n=="west"||n=="east"){p=d+(n=="west"?(l.width+3):(-1)*(3+r));m=3}}k.setX(p);k.setY(m);k.setWidth(r);k.setHeight(j);e.setHeight(j-26);c.setWidth(r-o-6);c.setHeight(j-26);g.setX(p+r-o);g.setWidth(o);g.setHeight(j-26)},show:function(){var e=this.focusEl;if(e){e.focus.defer(10,e)}this.hidden=false;var d="rs-window-shell-start-menu-hidden",c=this.body;if(c.hasClass(d)){c.removeClass(d)}this.syncPosSize()},hide:function(){this.hidden=true;var d="rs-window-shell-start-menu-hidden",c=this.body;if(!c.hasClass(d)){c.addClass(d)}}})})();(function(){Rs.app.BorderShell=Rs.extend(Rs.app.Shell,{type:"border",frameTpl:['<div class="rs-app-region"><div class="rs-app-region-cell rs-app-region-center"></div></div>','<div class="rs-app-region"><div class="rs-app-region-cell rs-app-region-north"></div></div>','<div class="rs-app-region"><div class="rs-app-region-cell rs-app-region-west"></div></div>','<div class="rs-app-region"><div class="rs-app-region-cell rs-app-region-east"></div></div>','<div class="rs-app-region"><div class="rs-app-region-cell rs-app-region-south"></div></div>'],regionPos:["north","south","west","east","center"],initAllRegionCollection:function(){Rs.app.BorderShell.superclass.initAllRegionCollection.apply(this,arguments);var j=this.regionEls=new Rs.util.MixedCollection(false),d=this.frame,b=this.regionCls,l=this.regionPos,g=d.query("."+b),e,c;for(var h=0,k=l.length;h<k;h++){c=l[h];e=d.child("."+b+"-"+c);if(e){j.add(c,e)}}},doBuild:function(){Rs.app.BorderShell.superclass.doBuild.apply(this,arguments);var i=this.regionEls,g=i.get("north"),q=i.get("south"),o=i.get("west"),k=i.get("east"),m=i.get("center"),d;if(g){var h=this.north;if(!h||!(h instanceof Rs.app.BorderShell.SplitRegion)){d="north";h=this.north=new Rs.app.BorderShell.SplitRegion(this,this[d]||{},d);h.renderTo(g);this.regions.add(d,h)}}if(q){var j=this.south;if(!j||!(j instanceof Rs.app.BorderShell.SplitRegion)){d="south";j=this.south=new Rs.app.BorderShell.SplitRegion(this,this[d]||{},d);j.renderTo(q);this.regions.add(d,j)}}if(o){var p=this.west;if(!p||!(p instanceof Rs.app.BorderShell.SplitRegion)){d="west";p=this.west=new Rs.app.BorderShell.SplitRegion(this,this[d]||{},d);p.renderTo(o);this.regions.add(d,p)}}if(k){var l=this.east;if(!l||!(l instanceof Rs.app.BorderShell.SplitRegion)){d="east";l=this.east=new Rs.app.BorderShell.SplitRegion(this,this[d]||{},d);l.renderTo(k);this.regions.add(d,l)}}if(m){var b=this.center;if(!b||!(b instanceof Rs.app.BorderShell.SplitRegion)){d="center";b=this.center=new Rs.app.BorderShell.SplitRegion(this,this[d]||{},d);b.renderTo(m);this.regions.add(d,b)}}},doReBuild:function(c,b){Rs.app.BorderShell.superclass.doReBuild.apply(this,arguments);var d=this.regions;d.each(function(e){if(e.isApplyApp()){this.doReBuildRegion.defer(10,this,[e])}},this)},doReBuildRegion:function(p){var q=p.getSize(),d=p.getMargins(),c=p.position,t=this.getXY(),r=t[0],o=t[1],u=this.getSize(),s=u.width,j=u.height,i={},k={height:0,width:0},g=this.north?this.north.getSize():k,n=this.south?this.south.getSize():k,e=this.west?this.west.getSize():k,l=this.east?this.east.getSize():k;if(c!=="center"){i.x=((c=="east")?(s-q.width):0)+d.left+r;i.y=((c=="north")?0:(c=="south")?(j-q.height):g.height)+d.top+o;i.width=((c=="north"||c=="south")?s:q.width)-(d.left+d.right);i.height=((c=="north"||c=="south")?q.height:(j-g.height-n.height))-(d.top+d.bottom)}else{i.x=e.width+d.left+r;i.y=g.height+d.top+o;i.width=s-e.width-l.width-(d.left+d.right);i.height=j-g.height-n.height-(d.top+d.bottom)}if(!p.isVisible()){p.applyCollapsedEl(i)}else{p.applyPanelEl(i)}},afterReBuild:function(b,c){Rs.app.BorderShell.superclass.afterReBuild.apply(this,arguments);if(b instanceof Rs.app.BorderShell.SplitRegion){if(b&&c&&c.isOpen()!=true){c.open(!b.isVisible())}}}});Rs.app.SHELL.border=Rs.app.BorderShell;Rs.app.BorderShell.SplitRegion=function(c,b,d){Rs.apply(this,b);this.shell=c;this.position=d;if(typeof this.margins=="string"){this.margins=this.shell.parseMargins(this.margins)}this.margins=Rs.applyIf(this.margins||{},this.defaultMargins);Rs.app.BorderShell.SplitRegion.superclass.constructor.call(this,c,b)};Rs.extend(Rs.app.BorderShell.SplitRegion,Rs.app.Region,{defaultMargins:{left:0,top:0,right:0,bottom:0},collapsedCls:"rs-app-collapsed",isCollapsed:false,collapsed:false,headerHeight:25,header:true,collapsedElWidth:25,getState:function(){var b=Rs.app.BorderShell.SplitRegion.superclass.getState.call(this);return Rs.apply(b,{width:this.width,height:this.height,collapsed:this.collapsed})},afterApplyApp:function(b){if(!this.header){this.collapsedElWidth=6}},applyState:function(b){Rs.app.BorderShell.SplitRegion.superclass.applyState.apply(this,arguments);if(b&&Rs.isBoolean(b.collapsed)){this[b.collapsed===true?"onCollapse":"onExpand"]()}},open:function(){Rs.app.BorderShell.SplitRegion.superclass.open.apply(this,arguments);this.expand()},close:function(){Rs.app.BorderShell.SplitRegion.superclass.close.apply(this,arguments);this.collapse()},isVisible:function(){return this.collapsed!==true},applyPanelEl:function(d){this.removeBlankClass();var b=this.position,j=d.x,i=d.y,k=d.width,e=d.height;if(b!="center"){var g=this.getSplitEl();g.setXY([j+(b=="west"?k-5:0),i+(b=="north"?e-5:0)]);g.setWidth((b=="north"||b=="south")?k:5);g.setHeight((b=="west"||b=="east")?e:5)}if(b!="center"){if(this.header){var m=this.getHeaderEl();m.setXY([j+(b=="east"?5:0),i]);m.setWidth(k-((b=="east"||b=="west")?5:0));m.setHeight(this.headerHeight)}else{if(this.collapsible){var c=this.getToggle("middle")}}}var l=this.targetEl;if(b!="center"){l.setXY([j+(b=="east"?5:0),i+(this.header?this.headerHeight:5)]);k=k-((b=="west"||b=="east")?5:0);e=e-(this.header?this.headerHeight:5)-((b=="north"||b=="south")?5:0);l.setWidth(k);l.setHeight(e);this.fireEvent("resize",l,k,e)}else{l.setXY([j,i]);l.setWidth(k);l.setHeight(e);this.fireEvent("resize",l,k,e)}},getHeaderEl:function(){var h=this.headerEl,g=this.panelEl;if(!h){if(this.headerCfg){h=this.headerEl=g.insertFirst(this.headerCfg)}else{h=this.headerEl=g.insertFirst({tag:"div",cls:"rs-app-header x-app-header"})}if(this.collapsible==true){var e=this.position,d=this.collapsed,b=this.toggle;if(!b){this.getToggle("top")}}var c=this.app.getIcon16();h.createChild({html:'<span class="'+c+' rs-app-header-text x-app-header-text">'+(this.name||"")+"</span>"})}return h},getCollapsedEl:function(){var d=this.collapsedEl;if(!d){var i=this.panelEl,h=this.position,g=this.collapsed;d=this.collapsedEl=Rs.DomHelper.insertAfter(i,{cls:"rs-app-collapser x-app-collapser rs-app-collapser-"+h},true);d.on("click",this.onClickCollapsedEl,this);if(this.header){var b="rs-app-tool x-app-tool rs-app-tool-"+(g?"expand":"collapse")+"-"+h;var e="rs-app-tool-"+(g?"expand":"collapse")+"-"+h+"-over"}else{var b="rs-app-tool-middle x-app-tool-middle-"+(g?"expand":"collapse")+"-"+h+" rs-app-tool-middle-"+h;var e="rs-app-tool-middle-over"}var c=this.collapsedElToggle=d.createChild({tag:"div",cls:b});d.on("mouseover",function(){d.addClass("x-app-collapser-over");c.addClass(e);d.on("mouseleave",function(){d.removeClass("x-app-collapser-over");c.removeClass(e)},this,{single:true})},this);c.on("click",this.toggleCollapse,this)}return this.collapsedEl},onClickCollapsedEl:function(c,b){this.toggleCollapse(c,b)},getSplitEl:function(){if(!this.splitEl){var b=this.position;this.splitEl=this.panelEl.createChild({cls:"rs-app-split x-app-split",html:"&#160;"});this.splitEl.setStyle("cursor",(b=="north"||b=="south")?"row-resize":"col-resize");this.splitElDD=new a(this,this.splitEl,this.panelEl,(b=="east"||b=="west")?a.HORIZONTAL:a.VERTICAL)}return this.splitEl},getSize:function(){var b=this.width,e=this.height,g=this.position,d=this.collapsedElWidth,c=this.shell.getSize();if(this.collapsed!==true){b=(g=="west"||g=="east")?b?b:this.minWidth:c.width;e=(g=="north"||g=="south")?e?e:this.minHeight:c.height}else{b=(g=="west"||g=="east")?d:c.width;e=(g=="north"||g=="south")?d:c.height}return{width:b,height:e}},getMargins:function(){return this.margins},removeBlankClass:function(){var b="rs-app-blank-region",c=this.panelEl;if(c.hasClass(b)){c.removeClass(b)}},getToggle:function(c){var e=this.position,d=this.collapsed,b=this.toggle;if(!b){if(c=="top"){b=this.toggle=this.headerEl.createChild({tag:"div",cls:"rs-app-tool x-app-tool rs-app-tool-"+(d?"expand":"collapse")+"-"+e});b.on("click",this.toggleCollapse,this);b.on("mouseover",function(){var g="rs-app-tool-"+(d?"expand":"collapse")+"-"+e+"-over";b.addClass(g);b.on("mouseleave",function(){b.removeClass(g)},this,{single:true})},this)}else{if(c=="middle"){b=this.toggle=this.splitEl.createChild({tag:"div",cls:"rs-app-tool-middle x-app-tool-middle-"+(d?"expand":"collapse")+"-"+e+" rs-app-tool-middle-"+e});b.on("click",this.toggleCollapse,this);b.on("mouseover",function(){var g="rs-app-tool-middle-over";b.addClass(g);this.splitEl.un("mousedown",this.splitElDD.notifyOut,this.splitElDD);b.on("mouseleave",function(){b.removeClass(g);this.splitEl.on("mousedown",this.splitElDD.notifyOut,this.splitElDD)},this,{single:true})},this)}}}},toggleCollapse:function(b){this[this.collapsed?"expand":"collapse"]();if(b){b.stopEvent()}return this},onBeforeCollapse:Rs.emptyFn,collapse:function(){if(this.collapsed||this.fireEvent("beforecollapse",this)===false||this.onBeforeCollapse(this)===false){return}this.onCollapse();return this},onCollapse:function(){this.collapsed=true;this.showCollapsedEl();this.hidePanelEl();this.afterCollapse()},afterCollapse:function(){var b=this.shell;if(b){b.reBuild()}this.fireEvent("collapse",this,b)},showCollapsedEl:function(){var c=this.getCollapsedEl(),b=this.collapsedCls,d=this.position;if(c&&c.hasClass(b)){c.removeClass(b)}this.collapsedElToggle.removeClass("rs-app-tool-collapse-"+d);if(this.header){this.collapsedElToggle.addClass("rs-app-tool-expand-"+d)}},hideCollapsedEl:function(){var c=this.getCollapsedEl(),b=this.collapsedCls,d=this.position;if(c&&!c.hasClass(b)){c.addClass(b)}this.collapsedElToggle.removeClass("rs-app-tool-expand-"+d);if(this.header){this.collapsedElToggle.addClass("rs-app-tool-collapse-"+d)}},applyCollapsedEl:function(e){var g=this.getCollapsedEl(),b=e.x,j=e.y,c=e.width,d=e.height,i=this.position;g.setXY([b,j]);g.setWidth(c);g.setHeight(d)},hidePanelEl:function(){var b=this.collapsedCls,c=this.panelEl;if(!c.hasClass(b)){c.addClass(b)}},showPanelEl:function(){var b=this.collapsedCls,c=this.panelEl;if(c.hasClass(b)){c.removeClass(b)}},onBeforeExpand:Rs.emptyFn,expand:function(){if(!this.collapsed||this.fireEvent("beforeexpand",this)===false||this.onBeforeExpand(this)===false){return}this.onExpand();return this},onExpand:function(){this.collapsed=false;this.showPanelEl();this.hideCollapsedEl();this.afterExpand()},afterExpand:function(){var b=this.shell;if(b){b.reBuild()}this.fireEvent("expand",this,b)}});var a=function(d,c,e,b){this.region=d;this.splitEl=c;this.panelEl=e;this.orientation=b;this.init()};a.VERTICAL=1;a.HORIZONTAL=2;a.prototype={init:function(){this.splitEl.on("mouseenter",this.notifyEnter,this);this.splitEl.on("mousedown",this.notifyOut,this)},notifyEnter:function(){},notifyOut:function(){this.showProxy()},showProxy:function(){var j=Rs.lib.Dom,b=0,k=0,c=j.getViewWidth(true),i=j.getViewHeight(true),d,g,e=this.splitEl;d=this.overlay=Rs.DomHelper.append(document.body,{tag:"div",cls:"rs-app-split-overlay"},true);d.setX(b);d.setY(k);d.setWidth(c);d.setHeight(i);d.unselectable();if(Rs.isIE){d.setStyle({opacity:"30",filter:"alpha(opacity=30)"})}else{d.setStyle({opacity:".30","-moz-opacity":".30",filter:"alpha(opacity=.30)"})}d.on("mousemove",this.notifyOver,this);d.on("mouseup",this.notifyDrop,this);b=e.getX(),k=e.getY(),c=e.getWidth(),i=e.getHeight();g=this.proxy=Rs.DomHelper.append(document.body,{tag:"div",cls:"rs-app-split-proxy"},true);g.on("mouseup",this.notifyDrop,this);g.setX(b);g.setY(k);g.setWidth(c);g.setHeight(i);g.unselectable();this.sourceposition={x:b,y:k}},hideProxy:function(){var b=this.overlay,c=this.proxy;if(b){b.removeAllListeners();b.remove();delete b}if(c){c.removeAllListeners();c.remove();delete c}delete this.sourceposition},notifyOver:function(i,q,g){var d=this.orientation,j=this.proxy,s=i.getXY(),n=s[0],m=s[1],l=this.region,c=l.position,r=l.getSize(),b=this.sourceposition,h,k,p;if(d==a.VERTICAL){h=l.minHeight;k=l.maxHeight;p=r.height+(c=="north"?1:-1)*(m-b.y);if(p>=h&&p<=k){j.setY(m)}}else{if(d==a.HORIZONTAL){h=l.minWidth;k=l.maxWidth;p=r.width+(c=="west"?1:-1)*(n-b.x);if(p>=h&&p<=k){j.setX(n)}}}},notifyDrop:function(k,r,g){var l=this.proxy,p=l.getX(),n=l.getY(),q,i,m=this.region,j=m.shell,c=m.position,s=m.getSize(),b=this.sourceposition,d=this.orientation;if(d==a.VERTICAL){i=s.height+(c=="north"?1:-1)*(n-b.y);m.setHeight(i);j.reBuild()}else{if(d==a.HORIZONTAL){q=s.width+(c=="west"?1:-1)*(p-b.x);m.setWidth(q);j.reBuild()}}this.hideProxy()}}})();(function(){Rs.app.TabShell=Rs.extend(Rs.app.Shell,{frameTpl:['<div onselectstart="return false;" class="rs-tab-shell-tabheader x-tab-shell-tabheader"></div>','<div class="rs-tab-shell-tabbody-wrap"></div>'],tabBarCfg:{},tabBarPosition:"top",tabWidth:135,enableTabScroll:true,doBuild:function(){Rs.app.TabShell.superclass.doBuild.apply(this,arguments);var i=this.frame,d=i.child(".rs-tab-shell-tabheader"),h=i.child(".rs-tab-shell-tabbody-wrap");if(d){var g=this.tabheader;if(!g){g=this.tabheader=new b(this,this.tabBarPosition,Rs.apply(this.tabBarCfg,{tabWidth:this.tabWidth,enableTabScroll:this.enableTabScroll}));g.renderTo(d)}}if(h){var e=this.tabbody;if(!e){e=this.tabbody=new c(this,this.tabBarPosition);e.renderTo(h)}}},doReBuild:function(g,h){Rs.app.TabShell.superclass.doReBuild.apply(this,arguments);var e=this.tabheader;var d=this.tabbody;if(e){e.doLayout()}if(d){d.doLayout()}},getRegion:function(d){if(d=="tab"){region=new Rs.app.TabRegion(this,{});return region}else{region=new Rs.app.WindowRegion(this,{});return this.windowRegions.add(region)}}});Rs.app.SHELL.tab=Rs.app.TabShell;var b=function(g,d,e){this.shell=g;this.position=d||"top";Rs.apply(this,e);b.superclass.constructor.call(this);this.addEvents("beforetabchange","tabchange","beforetabclose","tabclose")};Rs.extend(b,Rs.util.Observable,{width:60,height:30,rendered:false,tabs:[],scrollDuration:0.35,animScroll:true,closable:true,tabWidth:120,scrollIncrement:100,accessStack:[],renderTo:function(d){if(this.rendered===false&&this.fireEvent("beforerender",this)!==false){this.header=d;this.rendered=true;this.header.addClass("rs-tab-shell-tabheader-"+this.position);this.stripWrap=this.header.createChild({tag:"div",cls:"rs-tab-strip-wrap-"+this.position,cn:{tag:"ul",cls:"rs-tab-strip-"+this.position+" x-tab-strip-"+this.position}});this.header.createChild({cls:"rs-tab-strip-spacer"});this.strip=new Rs.Element(this.stripWrap.dom.firstChild);this.edge=this.strip.createChild({tag:"li",cls:"rs-tab-edge-"+this.position,cn:[{tag:"span",cls:"rs-tab-strip-text",cn:"&#160;"}]});this.strip.createChild({cls:"rs-clear"});this.doLayout();this.afterRender()}},getSize:function(){var g=this.shell,e=g.getSize(),j=this.position,d,i;if(j=="top"){d=e.width;i=this.height}else{if(j=="left"){d=this.width;i=e.height}}return{width:d,height:i}},doLayout:function(){var d=this.shell.getSize();this.header.setWidth(d.width);this.autoScrollTabs()},autoScrollTabs:function(){this.pos=this.position=="top"?this.header:null;var n=this.tabs.length,g=this.pos.dom.offsetWidth,m=this.pos.dom.clientWidth,d=this.stripWrap,i=d.dom,k=i.offsetWidth,o=this.getScrollPos(),j=this.edge.getOffsetsTo(this.stripWrap)[0]+o;if(!this.enableTabScroll||k<20){return}if(n==0||j<=m){i.scrollLeft=0;d.setWidth(m);if(this.scrolling){this.scrolling=false;this.pos.removeClass("rs-tab-scrolling");this.scrollLeft.hide();this.scrollRight.hide();i.style.marginLeft="";i.style.marginRight=""}}else{if(!this.scrolling){this.pos.addClass("rs-tab-scrolling");i.style.marginLeft="18px";i.style.marginRight="18px"}var e=parseInt(i.style.marginLeft.substring(0,i.style.marginLeft.length-2),10);var h=parseInt(i.style.marginRight.substring(0,i.style.marginRight.length-2),10);m-=(e+h);d.setWidth(m>20?m:20);if(!this.scrolling){if(!this.scrollLeft){this.createScrollers()}else{this.scrollLeft.show();this.scrollRight.show()}}this.scrolling=true;if(o>(j-m)){i.scrollLeft=j-m}else{this.scrollToTab(this.activeTab,false)}this.updateScrollButtons()}},getScrollPos:function(){return parseInt(this.stripWrap.dom.scrollLeft,10)||0},getScrollArea:function(){return parseInt(this.stripWrap.dom.clientWidth,10)||0},getScrollWidth:function(){return this.edge.getOffsetsTo(this.stripWrap)[0]+this.getScrollPos()},getScrollIncrement:function(){return this.scrollIncrement||(this.resizeTabs?this.lastTabWidth+2:100)},createScrollers:function(){this.header.addClass("rs-tab-scrolling");var g=this.stripWrap.dom.offsetHeight;var d=this.header.insertFirst({cls:"rs-tab-scroller-left x-tab-scroller-left"});d.setHeight(g);d.on("mouseover",function(){d.addClass("rs-tab-scroller-left-over")},this);d.on("mouseleave",function(){d.removeClass("rs-tab-scroller-left-over")},this);d.on("mousedown",this.onScrollLeft,this);this.scrollLeft=d;var e=this.header.insertFirst({cls:"rs-tab-scroller-right x-tab-scroller-right"});e.setHeight(g);e.on("mouseover",function(){e.addClass("rs-tab-scroller-left-over")},this);e.on("mouseleave",function(){e.removeClass("rs-tab-scroller-left-over")},this);e.on("mousedown",this.onScrollRight,this);this.scrollRight=e},onScrollRight:function(){var d=this.getScrollWidth()-this.getScrollArea(),g=this.getScrollPos(),e=Math.min(d,g+this.getScrollIncrement());if(e!=g){this.scrollTo(e,this.animScroll)}},onScrollLeft:function(){var e=this.getScrollPos(),d=Math.max(0,e-this.getScrollIncrement());if(d!=e){this.scrollTo(d,this.animScroll)}},scrollToTab:function(h,d){if(!h){return}var g=h.tabEl,k=this.getScrollPos(),i=this.getScrollArea(),j=g.getOffsetsTo(this.stripWrap)[0]+k,e=j+g.dom.offsetWidth;if(j<k){this.scrollTo(j,d)}else{if(e>(k+i)){this.scrollTo(e-i,d)}}},scrollTo:function(e,d){this.stripWrap.scrollTo("left",e);this.updateScrollButtons()},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},updateScrollButtons:function(){var d=this.getScrollPos();this.scrollLeft[d===0?"addClass":"removeClass"]("rs-tab-scroller-left-disabled");this.scrollRight[d>=(this.getScrollWidth()-this.getScrollArea())?"addClass":"removeClass"]("rs-tab-scroller-right-disabled")},addTab:function(i,h){var d=this.tabs.length,e=this.strip.dom.childNodes[d],g=this.getTemplateArgs(i);cls="rs-tab-strip-over",tab=new a(this.strip,e,g,h);tab.hover(function(){tab.addClass(cls)},function(){tab.removeClass(cls)});tab.setWidth(this.tabWidth);tab.on("close",this.removeTab,this);tab.on("activated",this.setActiveTab,this);tab.on("mousedown",this.onTabMouseDown,this);this.tabs.push(tab);this.autoScrollTabs();return tab},onTabMouseDown:function(d,g){if(this.tabs.length==1){return}this.startTab=d;this.startTabX=this.startTab.getX();this.mousedownX=g.getXY()[0];this.activeX=this.startTabX;this.startOffset=g.getXY()[0]-this.startTabX;this.lfTabEl=this.startTab.next();this.header.on("mouseup",this.onHeaderMouseUp,this);this.header.on("mousemove",this.onHeaderMouseMove,this);this.header.on("mouseleave",this.onHeaderMouseLeave,this)},addEventHandler:function(e,g,d){if(e.addEventListener){e.addEventListener(g,d,false)}else{if(e.attachEvent){e.attachEvent("on"+g,d)}else{e["on"+g]=d}}},removeEventHandler:function(e,g,d){if(e.removeEventListener){e.removeEventListener(g,d,false)}else{if(e.detachEvent){e.detachEvent("on"+g,d)}else{e["on"+g]=null}}},bindAsEventListener:function(e,d){return function(g){return d.call(e,(g||window.event))}},onHeaderMouseLeave:function(d){Rs.fly(document.body).addClass("rs-tab-leave");this.header.on("mouseover",this.onHeaderMouseOver,this);this.shell.tabbody.on("mouseup",this.onTabbodyMouseUp,this);this.addEventHandler(document,"mouseup",this.bindAsEventListener(this,this.handleMouseUp))},handleMouseUp:function(d){if(d.x<0||d.y<0||d.x>window.innerWidth||d.y>window.innerHeight){this.cancelMove();this.shell.tabbody.un("mouseup",this.onTabbodyMouseUp,this)}this.removeEventHandler(document,"mouseup",this.handleMouseUp)},cancelMove:function(){if(this.startTab){this.startTab.insertBefore(this.lfTabEl);this.endMove()}},endMove:function(){if(this.startTab){Rs.fly(document.body).removeClass("rs-tab-leave");this.startTab.show();this.startTab=null;if(this.cloneTab){this.cloneTab.remove();delete (this.cloneTab)}this.removeTabListeners()}},onHeaderMouseOver:function(d){Rs.fly(document.body).removeClass("rs-tab-leave");this.header.un("mouseover",this.onHeaderMouseOver,this);this.shell.tabbody.un("mouseup",this.onTabbodyMouseUp,this)},onTabbodyMouseUp:function(d){this.cancelMove();this.shell.tabbody.un("mouseup",this.onTabbodyMouseUp,this)},removeTabListeners:function(){this.header.un("mouseover",this.onHeaderMouseOver,this);this.header.un("mousemove",this.onHeaderMouseMove,this);this.header.un("mouseup",this.onHeaderMouseUp,this);this.header.un("mouseleave",this.onHeaderMouseLeave,this)},onHeaderMouseMove:function(h){if(this.startTab){if(!this.cloneTab){this.cloneTab=this.startTab.tabEl.dom.cloneNode(true);this.cloneTab.id="clone-tab";if(this.cloneTab.style.setProperty){this.cloneTab.style.setProperty("position","absolute","")}else{this.cloneTab.style.setAttribute("position","absolute")}this.cloneTab=this.strip.appendChild(this.cloneTab);this.cloneTab.insertBefore(this.strip.dom.childNodes[0]);this.cloneTab.setStyle("position : absolute;")}var g=h.getXY()[0];this.cloneTab.setX(g-this.startOffset);if(this.startTab.isVisible()){this.startTab.hide()}if(this.scrollLeft&&this.scrollLeft.isVisible()){if(h.getXY()[0]>=this.scrollRight.getX()){this.onScrollRight()}if(h.getXY()[0]<=(this.scrollLeft.getX()+this.scrollLeft.getWidth())){this.onScrollLeft()}}if((g-this.mousedownX)>0&&(g-this.startOffset-this.activeX)>=this.tabWidth/2){var d=this.startTab.next();if(d.dom!=this.strip.dom.childNodes[this.strip.dom.childNodes.length-2]){this.startTab.insertAfter(d);this.activeX=this.startTab.getX();this.mousedownX=this.activeX+this.startOffset}}else{if((g-this.mousedownX)<0&&(this.activeX-(g-this.startOffset))>=this.tabWidth/2){this.startTab.insertBefore(this.startTab.prev());this.activeX=this.startTab.getX();this.mousedownX=this.activeX+this.startOffset}}}},onHeaderMouseUp:function(d){this.removeTabListeners();if(this.startTab){this.endMove()}return},moveTab:function(e,d,g){if(g>0){e.insertBefore(d)}else{e.insertAfter(d)}return},removeTab:function(e){if(e){for(var d=0;d<this.tabs.length;d++){if(this.tabs[d].id==e.id){this.tabs.splice(d,1);break}}e.un("close",this.removeTab,this);e.un("activated",this.setActiveTab,this);e.destroy()}this.removeFromAccessStack(e)},getTemplateArgs:function(d){return{id:"rs-app-tab-"+this.tabs.length,text:d.getName()||"&#160;",iconCls:d.getIcon16()||""}},setActiveTab:function(d){if(d.active!==true&&this.tabs.length>1){return}if(this.fireEvent("beforetabchange",this,d,this.activeTab)===false){return}if(!this.rendered){this.activeTab=d;return}if(this.activeTab!=d){if(this.activeTab){var e=this.activeTab;if(e){e.unActivated()}}this.activeTab=d;if(d){d.doActivated();this.addToAccessStack(d);this.autoScrollTabs();if(this.scrolling){this.scrollToTab(d,this.animScroll)}}this.fireEvent("tabchange",this,d)}},addToAccessStack:function(e){for(var d=0;d<this.accessStack.length;d++){if(this.accessStack[d].id==e.id){this.accessStack.splice(d,1);break}}this.accessStack.push(e)},removeFromAccessStack:function(e){for(var d=0;d<this.accessStack.length;d++){if(this.accessStack[d].id==e.id){this.accessStack.splice(d,1);if(d==this.accessStack.length){this.activeTab=null;if(d!=0){this.setActiveTab(this.accessStack[this.accessStack.length-1])}}}}},afterRender:Rs.emptyFn});var a=function(i,d,g,e){this.id=g.id;this.strip=i;Rs.apply(this,e);a.superclass.constructor.call(this);if(!this.itemTpl){var h=new Rs.Template(['<li class="rs-tab-with-icon" id="{id}"><a class="rs-tab-strip-close x-tab-strip-close"></a>','<a class="rs-tab-right x-tab-right"><em class="rs-tab-left x-tab-left">','<span class="rs-tab-strip-inner x-tab-strip-inner"><span class="rs-tab-strip-text x-tab-strip-text {iconCls}">{text}</span></span>',"</em></a></li>"]);h.compile();this.itemTpl=h}this.addEvents("beforeclose","close","activated","unactivated","mousedown","mouseup");this.tabEl=d?this.itemTpl.insertBefore(d,g,true):this.itemTpl.append(this.strip,g,true);this.tabEl.select("a").on("click",function(j){this.onStripClick(j)},this);this.tabEl.select("a").on("mousedown",function(j){this.onStripMouseDown(j)},this);this.tabEl.select("a").on("mouseup",function(j){this.onStripMouseUp(j)},this)};Rs.extend(a,Rs.util.Observable,{closable:true,active:false,onStripClick:function(d){if(d.button!==0){return}d.preventDefault();if(d.getTarget(".rs-tab-strip-close",this.strip)){if(this.fireEvent("beforeclose",this)!==false){this.fireEvent("close",this)}return}if(this.active==false){this.doActivated()}return},onStripMouseDown:function(d){if(d.button!==0){return}d.preventDefault();if(d.getTarget(".rs-tab-strip-close",this.strip)){return}if(this.active==false){this.doActivated()}this.fireEvent("mousedown",this,d);return},onStripMouseUp:function(d){this.mousedown=false;d.preventDefault();this.fireEvent("mouseup",this);return},doActivated:function(){this.active=true;if(this.closable){this.addClass("rs-tab-strip-closable")}this.addClass("rs-tab-strip-active");this.fireEvent("activated",this)},unActivated:function(){this.active=false;this.removeClass(["rs-tab-strip-closable","rs-tab-strip-active"]);this.fireEvent("unactivated",this)},isActivated:function(){return this.active},hover:function(e,d){if(this.tabEl){this.tabEl.hover(e,d)}},addClass:function(d){if(this.tabEl){this.tabEl.addClass(d)}},removeClass:function(d){if(this.tabEl){this.tabEl.removeClass(d)}},setWidth:function(d){this.tabEl.setWidth(d)},getTabEl:function(){return this.tabEl},destroy:function(){this.active=false;this.tabEl.removeAllListeners();this.tabEl.remove();delete (this.tabEl)},getX:function(){return this.tabEl.getX()},getY:function(){return this.tabEl.getY()},insertBefore:function(d){if(!d){return}if(d instanceof a){this.tabEl.insertBefore(d.tabEl)}else{this.tabEl.insertBefore(d)}},insertAfter:function(d){if(!d){return}if(d instanceof a){this.tabEl.insertAfter(d.tabEl)}else{this.tabEl.insertAfter(d)}},hide:function(){this.tabEl.hide()},show:function(){this.tabEl.show()},next:function(){return this.tabEl.next()},prev:function(){return this.tabEl.prev()},isVisible:function(){return this.tabEl.isVisible()}});var c=function(e,d){this.shell=e;this.position=d;c.superclass.constructor.call(this);this.addEvents("resize","mouseup")};Rs.extend(c,Rs.util.Observable,{rendered:false,regions:[],renderTo:function(d){if(this.rendered===false&&this.fireEvent("beforerender",this)!==false){this.targetEl=d.createChild({tag:"div",cls:"rs-tab-shell-tabbody rs-tab-shell-tabbody-"+this.position});this.targetEl.on("mouseup",this.onMouseUp,this);this.rendered=true}this.doLayout()},doLayout:function(){if(this.position=="top"){var d=this.shell.getSize();this.width=d.width;this.height=d.height-this.shell.tabheader.getSize().height;this.targetEl.setWidth(this.width);this.targetEl.setHeight(this.height)}this.fireEvent("resize",this.targetEl,this.width,this.height)},onMouseUp:function(d){this.fireEvent("mouseup",this)},addRegion:function(){var d=this.targetEl.createChild({tag:"div",cls:"rs-tab-region rs-tab-region-hide"});this.regions.push(d);return d},displayRegion:function(d){d.removeClass("rs-tab-region-hide")},hideRegion:function(d){d.addClass("rs-tab-region-hide")},removeRegion:function(d){d.remove()}});Rs.app.TabRegion=function(e,d){Rs.app.TabRegion.superclass.constructor.call(this);this.shell=e;this.engine=this.shell.getEngine();this.tabheader=e.tabheader;this.tabbody=e.tabbody;this.tabbody.on("resize",this.onTabbodyResize,this);this.config=d||{};this.targetEl=this.tabbody.addRegion()};Rs.extend(Rs.app.TabRegion,Rs.app.Region,{active:false,afterApplyApp:function(d){Rs.app.TabRegion.superclass.afterApplyApp.apply(this,arguments);this.tab=this.tabheader.addTab(d,Rs.apply(Rs.apply({active:this.active},this.config),d.getRegionCfg()));this.tab.on("activated",this.onTabActivated,this);this.tab.on("unactivated",this.onTabUnActivated,this);this.tab.on("close",this.onTabClose,this);this.tabheader.setActiveTab(this.tab);d.open()},onTabbodyResize:function(g,d,e){if(this.active&&this.app.isOpen()){this.fireEvent("resize",this.targetEl,d,e)}},onTabActivated:function(d){this.tabbody.displayRegion(this.targetEl);if(this.app.isOpen()){this.fireEvent("resize",this.targetEl,this.targetEl.getWidth(),this.targetEl.getHeight())}if(!this.app.isOpen()){this.app.open()}this.active=true},onTabUnActivated:function(d){this.active=false;this.tabbody.hideRegion(this.targetEl)},onTabClose:function(d){this.active=false;this.tabbody.removeRegion(this.targetEl);this.app.close()},isVisible:function(){return this.targetEl.isVisible()}})})();Rs.define("Rs.app.Resizable",{setWidth:function(){Rs.error("必须实现setWidth方法!")},setHeight:function(){Rs.error("必须实现setHeight方法!")}});Rs.define("Rs.app.Main",{mixins:[Rs.app.Resizable],main:function(a,b){this.render.defer(15,this,[b.getRawEl()]);this.region=b;this.region.addResizeListener(function(c,d){this.setWidth(c);this.setHeight(d)},this)},render:function(){Rs.error("必须实现render方法!")}});